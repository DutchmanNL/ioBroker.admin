{"version":3,"sources":["assets/no-image.png","assets/state.png","assets/channel.png","assets/device.png","assets/empty.png","components/Connection.js","components/ExperIcon.js","components/ConfirmDialog.js","Utils.js","components/DrawerItem.js","components/Drawer.js","components/Connecting.js","components/LogsWorker.js","components/InstancesWorker.js","components/HostsWorker.js","login/Login.js","dialogs/AddInstance.js","tabs/Adapters.js","dialogs/Config.js","tabs/Instances.js","components/IntroCard.js","tabs/Intro.js","tabs/Logs.js","components/TextInputDialog.js","components/FileViewer.js","components/FileBrowser.js","tabs/Files.js","components/cp-react-tree-table/src/component/Column.js","components/cp-react-tree-table/src/component/ColumnWrapper.js","components/cp-react-tree-table/src/component/VirtualListRow.js","components/cp-react-tree-table/src/model/row.js","components/cp-react-tree-table/src/util/search.js","components/cp-react-tree-table/src/util/index.js","components/cp-react-tree-table/src/model/bt_node.js","components/cp-react-tree-table/src/model/bt_leaf.js","components/cp-react-tree-table/src/model/bt_root.js","components/cp-react-tree-table/src/component/VirtualList.js","components/cp-react-tree-table/src/component/TreeDataTable.js","components/cp-react-tree-table/src/index.js","components/CopyIcon.js","components/ObjectBrowser.js","tabs/Objects.js","tabs/BaseSettings.js","tabs/CustomTab.js","components/CommandDialog.js","App.js","Theme.js","index.js"],"names":["module","exports","PROGRESS","CONNECTING","CONNECTED","OBJECTS_LOADED","READY","Connection","props","this","autoSubscribes","autoSubscribeLog","protocol","window","location","host","substr","indexOf","port","doNotLoadAllObjects","undefined","_socket","io","connect","replace","query","name","states","objects","acl","firstConnect","waitForRestart","systemLang","connected","statesSubscribes","objectsSubscribes","onProgress","onError","err","console","error","loaded","loadTimer","loadCounter","certPromise","onConnectionHandlers","onLogHandlers","promises","on","emit","isOk","isSecure","setTimeout","onConnect","subscribe","reload","forEach","cb","subscribed","authenticate","message","onLog","_err","toString","JSON","stringify","alert","operation","type","id","obj","objectChange","state","stateChange","text","onCmdStdoutHandler","onCmdStderrHandler","exitCode","onCmdExitHandler","clearTimeout","data","systemConfig","common","language","navigator","userLanguage","onLanguage","onReady","getObjects","pathname","search","hash","cbs","push","reg","RegExp","Object","keys","pos","splice","length","includes","Promise","resolve","oldObj","changed","_rev","_id","test","onBlocklyChanges","match","blockly","onObjectChange","task","hasOwnProperty","disableProgressUpdate","res","STATES_LOADED","reject","getState","val","setState","update","isEnable","adapter","startkey","endkey","doc","rows","map","item","value","objs","pop","delObject","then","newId","setObject","_renameGroups","catch","newName","getGroups","groups","groupsToRename","filter","group","startsWith","substring","find","instance","command","result","handler","_enum","_res","i","getObject","certs","native","certificates","c","cert","_cert","toLowerCase","split","t","trim","linesNumber","lines","files","fileName","base64","btoa","Uint8Array","reduce","byte","String","fromCharCode","hosts","users","timeout","args","cmd","cmdId","feature","features","checkFeatureSupported","config","pattern","PropTypes","func","SvgExpertIcon","viewBox","className","style","floodColor","glowColor","floodOpacity","in","operator","in2","stdDeviation","slope","intercept","fill","active","d","withStyles","theme","closeButton","position","right","spacing","top","color","palette","grey","Dialog","onClose","open","DialogTitle","header","IconButton","classes","onClick","DialogContent","dividers","Typography","gutterBottom","children","DialogActions","Button","autoFocus","onConfirm","confirmText","Utils","bytes","GB","Math","floor","MB","mhz","abs","units","u","toFixed","lastIndexOf","hex","bw","slice","Error","r","parseInt","g","b","padStart","seconds","days","hours","minutes","link","context","placeholder","hostname","replaceLink","parts","object","log","DrawerItem","ListItem","button","clsx","selected","compact","compactBadge","Grid","container","alignItems","noWrap","ListItemIcon","minWidth","Badge","badgeContent","badgeColor","icon","ListItemText","primary","React","Component","background","secondary","main","invertColor","paddingLeft","flexWrap","height","STATES","tabsInfo","order","Drawer","logErrors","tabs","logErrorHandlerBound","logErrorHandler","bind","instanceChangedHandlerBound","instanceChangedHandler","instances","getTabs","changes","logsWorker","registerErrorCountHandler","instancesWorker","registerHandler","unregisterErrorCountHandler","unregisterHandler","getInstances","dynamicTabs","adminTab","instNum","title","tab","singleton","m","lang","en","assign","READY_TO_USE","I18n","ucFirst","concat","sort","a","headerLogout","headerCompact","logoutTitle","onLogout","logout","onStateChange","items","key","handleNavigation","currentTab","width","SwipeableDrawer","root","anchor","onOpen","paper","getHeader","List","getNavigationItems","rootCompactWidth","rootFullWidth","variant","list","withWidth","flexShrink","transition","transitions","create","easing","easeOut","duration","enteringScreen","overflowX","display","padding","mixins","toolbar","justifyContent","paddingTop","styles","left","zIndex","connecting","spinner","animation","path","strokeDasharray","strokeDashoffset","transformOrigin","stroke","offset","transform","xmlns","strokeWidth","strokeLinecap","cx","cy","LogsWorker","socket","maxLogs","handlers","promise","logHandlerBound","logHandler","connectionHandlerBound","connectionHandler","errorCountHandlers","registerLogHandler","registerConnectionHandler","countErrors","errors","currentHost","isConnected","logs","getLogs","isEnabled","line","_processLine","lastKey","isNew","ts","time","Date","getTime","from","severity","unshift","shift","logSize","formatBytes","InstancesWorker","objectChangeHandlerBound","objectChangeHandler","subscribeObject","_readInstances","getAdapterInstances","HostsWorker","parse","_readHosts","getHosts","Copyright","align","loginMotto","Link","href","rel","target","useStyles","makeStyles","marginTop","avatar","margin","backgroundColor","form","submit","Login","action","login","Container","component","maxWidth","Paper","direction","loginHideLogo","Avatar","src","Alert","method","TextField","required","fullWidth","label","autoComplete","FormControlLabel","control","Checkbox","Box","mt","AddInstance","MenuItem","instanceNumber","disableTypography","typography","FormControl","disabled","InputLabel","Select","labelId","onChange","onHostChange","formControl","currentInstance","onInstanceChange","getAvailableInstances","paddingRight","Adapters","lastUpdate","repository","installed","categories","hostData","hostOs","nodeJsVersion","init","addInstanceDialog","addInstanceError","addInstanceAdapter","addInstanceId","addInstanceHost","currentHostName","ready","getAdaptersInfo","updateRepo","getHostInfo","os","getRepository","repo","activeRepo","getInstalled","categoriesSorted","controller","installedInGroup","count","translation","expanded","enabled","now","expertMode","cancel","executeCommand","category","event","categoryName","TableRow","TableCell","size","toggleCategory","green","blue","desc","image","localIcon","extIcon","hover","alt","smallAvatar","keywords","join","version","license","addInstance","hidden","upload","rebuild","LinearProgress","flexContainer","grow","TableContainer","Table","stickyHeader","table","TableHead","description","available","install","TableBody","getRows","closeAddInstanceDialog","handleHostsChange","handleInstanceChange","tableLayout","whiteSpace","overflow","textOverflow","visibility","default","flexGrow","Config","eventFunc","addEventListener","closeConfig","removeEventListener","Router","doNavigate","configStored","AppBar","Toolbar","materialize","flexDirection","Instances","runningInstances","dialog","dialogProp","columns","onlyExpert","actions","schedule","restart","ramLimit","events","ram","getData","getForeignStates","getForeignObjects","_instances","getStates","_states","formatted","objId","instanceId","titleLang","localLinks","localLink","mode","webExtension","webInstance","isRun","onlyWWW","canStart","noConfig","extendObject","headers","index","column","tableRow","hide","ExpansionPanel","square","handleChange","ExpansionPanelSummary","expandIcon","md","Hidden","mdDown","secondaryHeading","stopPropagation","onFocus","openConfig","ExpansionPanelDetails","panel","iframe","getPanels","getLocation","newState","red","borderRadius","border","boxShadow","IntroCard","editClass","edit","xs","sm","lg","Card","card","reveal","expand","handleExpandClick","media","CardMedia","img","contentContainer","CardContent","content","Divider","CardActions","underline","Collapse","collapse","unmountOnExit","save","copyToClipboard","close","toggleActivation","breakpoints","up","flex","minHeight","maxHeight","overflowY","opacity","userSelect","pointerEvents","bottom","formatInfo","formatSeconds","formatRam","formatSpeed","Intro","editActive","updateIntro","linkText","info","toggleCard","getHostDescription","buttons","Fab","saveCards","deactivateEditMode","activateEditMode","intro","showAlert","all","results","hostsData","deactivated","introInstances","ws","welcomeScreen","CircularProgress","_hosts","getHostsData","getCards","getButtons","success","dark","Logs","Number","prototype","pad","s","source","logDeleteDialog","logDownloadDialog","logFiles","pause","pauseCount","severities","getLogsFiles","reverse","file","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","words","enableCountErrors","newLogs","clearLines","currentTarget","delLogs","clearLog","closeLogDelete","focus","entry","downloadEntry","openTab","closeLogDownload","downloadLogSize","sources","ids","row","regExp","matches","isHidden","lastRowRender","updatedRow","lastRowRenderTimeout","pauseChild","pauseButton","handleLogPause","openLogDelete","startIcon","openLogDownload","anchorEl","keepMounted","Boolean","getLogFiles","handleSourceChange","getSources","pid","timestamp","handleSeverityChange","getSeverities","handleMessageChange","handleLogDelete","warn","amber","debug","marginRight","marginLeft","borderBottom","TextInputDialog","input","aria-labelledby","titleText","DialogContentText","promptText","labelText","onKeyPress","e","charCode","verify","rule","cancelText","applyText","EXTENSIONS","images","code","txt","FileViewer","ext","getFileExtension","fetch","response","json","onerror","NoImage","viewType","textarea","multiline","readOnly","getContent","USER_DATA","sortFolders","folder","FileBrowser","localStorage","getItem","folders","filterEmpty","addFolder","uploadFile","deleteItem","marked","levelPadding","mounted","suppressDeleteConfirm","loadFolders","browseFolder","browseFolders","findItem","scrollToSelected","el","document","getElementById","scrollIntoView","foldersList","_newFolders","_resolve","folderId","_checkEmpty","level","relPath","readDir","_folders","isDir","stats","modified","modifiedAt","readMetaItems","userData","meta","setItem","temp","Icon","OpenedFolderIcon","ClosedFolderIcon","select","onDoubleClick","toggleFolder","itemSelected","formatAcl","allowDownload","allowDelete","aria-label","fontSize","access","permissions","getFileIcon","formatSize","download","renderFolder","renderItems","renderFile","edge","menuButton","allowCreateFolder","allowUpload","parentFolder","findFirstFolder","parent","writeFile64","uploadCloseButton","onDragEnter","onDragLeave","onDrop","acceptedFiles","reader","FileReader","onabort","onload","readAsArrayBuffer","getRootProps","getInputProps","uploadDiv","uploadDivDragging","uploadCenterDiv","uploadCenterTextAndIcon","uploadCenterIcon","uploadCenterText","deleteRecursive","deleteFile","showToolbar","renderToolbar","filesDiv","renderInputDialog","renderUpload","renderDeleteDialog","itemTable","cursor","lineHeight","itemNameTable","verticalAlign","itemNameFolderTable","fontWeight","itemSizeTable","textAlign","itemAccessTable","itemImageTable","objectFit","itemIconTable","itemFolderTable","itemFolderTemp","itemFolderIconTable","itemDownloadButtonTable","itemDeleteButtonTable","Files","Column","ColumnWrapper","rowData","toggle","rowMetadata","renderCell","classNameColumn","_width","cWidth","baseClass","STYLE_COLUMN","boxSizing","VirtualListRow","overscanHeight","topOffset","hasVisibleChildren","onToggle","classNameRow","classNameSelected","metadata","getMetadata","STYLE_ROW","getHeight","data-rindex","onRowClick","data-depth","depth","Children","toArray","Row","hasChildren","isVisible","_height","_cacheHeight","_hasChildren","_updateHeight","show","diff","n","findNodeData","dataNode","mapAll","processData","rowHeightDefault","processLevel","needle","haystack","noop","BTNode","_size","ch","getSize","at","child","sz","rm","min","oldHeight","removeInner","BTLeaf","insertInner","remaining","leaf","maybeSpill","me","sibling","myIndex","copy","op","used","mapRange","apply","BTRoot","insert","node","cur","chunk","y","rHeight","getRow","rowObj","p","VirtualList","_handleScroll","onScroll","scrollTop","_setHeight","offsetHeight","lastVisibleRowIndex","classNamePartlyVisible","classNameMover","classNameInner","startYMax","max","startY","startIndex","getIndexAtY","endY","endIndex","contentTopOffset","getYAtIndex","visibleRowsData","visibleRows","relativeIndex","visible","STYLE_LIST","ref","elem","STYLE_WRAPPER","STYLE_CONTENT","posY","parentNode","WebkitOverflowScrolling","TreeDataTable","_handleOnToggle","delta","_toggleRow","hasChange","toggleOpen","currentDepth","rowIndex","getRowIndex","rowHeight","virtualList","expandAncestors","ancestors","currentRowIndex","previousDepth","currentRow","currentRoot","scrollTo","to","_from","_to","_isOpRangeValid","hasChanged","_walkOne","expandOrCollapse","_showRowsInRange","_hideRowsInRange","maxTo","SvgCopyContent","binarySearch","applyFilter","filters","filteredOut","role","room","members","expert","fID","fName","getName","_item","findNode","_parts","_path","_level","found","formatDate","dateObj","v","formatValue","texts","valFull","ex","isCommon","valText","round","lc","unit","ack","user","quality","q","custom","toUpperCase","quality2text","getSelectIdIcon","prefix","_id_","IconDefaultDevice","IconDefaultChannel","IconDefaultState","IconDefault","DEFAULT_FILTER","ObjectBrowser","defaultFilters","statesUpdate","selectedFound","copyContentImg","CopyContentIcon","treeTableRef","createRef","mainRef","getLanguage","subscribes","onStateChangeBound","connection","options","currentPathArr","currentPath","currentPathLen","funcEnums","roomEnums","roles","croot","statesOnly","repeat","move","curPath","k","_croot","buildTree","onSelect","isDouble","getObjectName","toggleChildren","createElement","body","appendChild","selection","getSelection","range","createRange","selectNode","removeAllRanges","addRange","execCommand","removeChild","preventDefault","current","getElementsByClassName","__installed","cellCopy","div","A200","onCopy","dataset","cellCopyPressed","installCopyButtons","recordStates","unsubscribe","unsubscribeState","statesUpdateTimer","subscribeState","isState","data-index","cellWrapper","toggleButtonWrapper","cellWrapperElement","findRoomsForObject","withParentInfo","rooms","origin","findFunctionsForObject","funcs","filterTimer","onFilterChanged","forceUpdate","headerCellInput","marginBottom","onFilter","values","inputProps","displayEmpty","selectNone","selectIcon","getFilterSelect","expandAll","collapseAll","toolbarButtons","onExpandAll","onCollapseAll","visibleButtons","onExpandVisible","onCollapseVisible","unsubscribeTimer","checkUnsubscribes","WIDTHS","mainDiv","getToolbar","headerCell","getFilterInput","getFilterSelectRole","getFilterSelectRoom","getFilterSelectFunction","tableDiv","partlyVisible","treeTableDark","treeTable","treeTableRow","isDoubleClick","renderIndexColumn","cellDivId","renderColumnName","cellDiv","renderColumnRole","renderColumnRoom","renderColumnFunc","renderColumnValue","borderTop","selectSpan","A700","Objects","dialogName","themeName","filterConfig","BaseSettings","CustomTab","materializeTab","ConfirmDialog","progressText","registerCmdStdoutHandler","cmdStdoutHandler","registerCmdStderrHandler","cmdStderrHandler","registerCmdExitHandler","cmdExitHandler","activeCmdId","random","cmdExec","gotAdmin","gotWww","elevation","getLog","attr","decodeURIComponent","App","translations","require","setTranslations","setLanguage","getTheme","getThemeName","themeType","getThemeType","drawerState","DrawerStates","progress","getProtocol","getPort","allTabs","currentDialog","currentUser","subscribesStates","subscribesObjects","subscribesLogs","stateChanged","alertType","alertMessage","allStored","dataNotStoredDialog","dataNotStoredTab","baseSettingsOpened","unsavedDataInDialog","cmdDialog","hostsWorker","hasUnsavedData","scripts","getSystemConfig","setCurrentHost","isNaN","matchMedia","createMuiTheme","overrides","MuiAppBar","colorDefault","MuiLink","textTransform","orange","MuiPaper","elevation1","elevation2","elevation3","elevation4","newThemeName","prevState","onUnsaveChanged","setUnsavedData","clearErrors","clearLogErrors","reason","handleDrawerState","setTitle","ThemeProvider","small","appBar","appBarShift","appBarShiftCompact","toggleTheme","expertIcon","expertIconActive","baseSettingsButton","logoWhite","contentMargin","contentMarginCompact","contentShift","getCurrentTab","Snackbar","autoHideDuration","handleAlertClose","closeDataNotStoredDialog","i18n","confirmDataNotStored","CommandDialog","closeCmdDialog","sharp","leavingScreen","Sentry","dsn","release","integrations","SentryIntegrations","build","ReactDOM","render","createTheme","onThemeChange","_theme"],"mappings":"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","file":"static/js/main.63673cb7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADcAAAA3CAYAAACo29JGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnMAABJzAYwiuQcAAAL7SURBVGhD7ZqxTyoxGMB7b4WEP4AJFkPi4MImiSQwMcFAojGyqUQZGHByExICAwNBUWcHHQiLIQYnHFlIGNjY+AMYGE3ffaR9+o6vdy3ey6N6v+QL/Y67pr/2ei0XDEop+a78Yp/fEk9OV6Tn3P39PX1/f2fZ/8Pv95PDw0ODpbbYyuXzefry8sKyzcLn85GTkxNyfn4uFBXKmRfSfr/Pss3l4uKCnJ6eooKoXKPRoM1mk2WbDYzgeDxG5dAHynA4ZKXNZ7FYkHq9jt5+qNx8PmclPRC111vndMWT0xVPTlc8OV35J3I7Ozskm80ut0ZuEIlEyP7+vnJ9rstBQzqdjlGtVo1CofBlwXA4TJ6fn41KpWKUSiWl+lyVAzFoCEvJ8fHxlwRB7PX19U99R0dHSoKoXC6XU26QVYyzrqBVjKMiiMqZ80Wph/itw9IVVAWDwSAqxpEVFN6WshWIetiKrCCIvb29OdYn0z7bOQcV2DVIVozjJCgrxuGChoFfIvWC6O7ubvnLHH4YclQb8hm36xMCcjJxc3NDQ6HQMnZ3d81D+HkQ19fXjufc3t7S7e1tqfoeHx9pJpMxi/j3okAPigIEZcRkOwEE4/G4WcS/hwAx3gnpdNo8hJ+HBXpw3fgsJitoF5/FeKgIog+Ug4MD54lood1u03q9zrIPZrMZicViyvU9PT3Rq6urv+YlMBqNCNyiLLUFlYMXLolEQrpBIFar1Vi2iqqgSIwjKyhcCqbTqZSgkxhHVtBJjCMjaLvOOQnKinGcBGXFOE6CtnKASBDWqlarxTJ5RIKqYhwQvLy8RAUd5QCrILYIq2AVXFfMCXSHkkql6GQyYdkHsN3a2toig8HAlYbArmRvb490u90v1Wc+3Um5XF7Z3UiNHAdGsNfrudbDMIIPDw+ujxhHSU43PDld8eR0xZPTlZ8nFwgEWEkPRO1F5aLRKCttPvAmrVQqoS+WULlisWgkk0mWbTZnZ2estMrP/HuUlW/3xzbd8dY5XfHk9ISQ379mNiuxXPzWAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAT3SURBVHhe7V0tUxxBEKVSkREIZCQiMhKZH4BKRSAQCAQmLgKBQ/AD8gMQSEREJAKBRCAQkYiIiIiIiIiISz+qu2pqs9zN3rzh5nafmDo+dofufvO6Z7p7l43ZbLah0YYNBERDi1FgCIw23EJr7lnMEDPEjD5WihlihpghZjTEAoEhMOSScrfQCuANsUVgCAy5LgXwhlggMKYMxov3H1/Z2LdxYePexi8bszUckBvyX9o4sLGZu0Macl21AG4C79r4voaGz1ksP02vD0MMnXMtHQxnw+cEhCv7+tDGNn6XI1Rr17hOb1wP6BOAnTNZQgXDhf7mwoLaB60ZliGPu6pwuQ8sQNhgBCNuTMDXDMVbnQP62YCeYMk5Q04aGB4jIBhWzKiBCMM7IMGQ3VJAKGC4e4pgPUrX9JSh3WVhEUL/opjIAgPbVwh0Vbo61vF+0/va9d8vkZ8FBs4RAOOwRJh1vdf0PnH9L0p0YIGBAxHA2C4RZl3vTeLlfYkOLDAiiBX5zBJFVnmvgbEV2/kSOVhgPB6CSgRZ93sdjCIbCAxS8lBgkAzJYKXAEBj/V+kYq4KxOlc5B8MGihkkdgkMkiEZjBIYAmP1McMTk3v2iTTMnSfpIlmH71EeRb7s2Q6hk2OGKbxp48zGn1B+wSeuw/VVatape5sUGKYsmJA2NNza90jQ7dh4rJ/g07/Hz6PwEzUWes16cmCYUV/aOE0YgHT1u5yg68BEehugnObct8w1k2BGAsRf+/p4SUMd2724vxogowfDXRMMCEMWuRncnwBSNFffghg1GAi6SYxYihFdo9l8R240xB5qUB87GNgFgRXXy7imOTXrrz7vGXne4jJCk+kQMxbaQmP7mhWscw1r8751MDA/7RwyWmYkseI218hDrgPb3Hh7Q+6bd+2YwYgGhxOWsTpngk9uvKIGgkmcM8xQSGnAB+9UAgMHRcx/x5p/zMyIhrgqnYlmOJzUH3NZAmNBtpWxyhYZmf03GPO1upv64cqJGYtWVc9hqniP3QmG0RSnmNEAGKhHAODau6nLobrOOUwWL8hW3VQ0Ut+wjNVhXjx9VNSoPJWtbXoCp7oqYxseB0PiUSfw3JVuxlJuKtdYbIr2bAqUtW0FDMiR5KhUz8gFhnHgmbNLiZIrADnKlanDXNQxVOlbxngdQ3Zr4F+QBs+Z14N11C+qlVydxePc2vYZ2l1W2h2CNDiyr33dIfg5tq/BBtxHL7Wy42aT54w5Lkt9U4tcQs2Y8QRLcA5RR+ETxin2l4sAb/33jAW5Vm6qZUAEhrrQV9+F3iJDxAwxQ8yotYlRACexS26KZEhGDGoJjN8uDK1dkmGg55rDdG/q3SHxXkK9VaeArayYEQ0EU3/fVFGDAwsMvHgXKZGpv4mt6JWALDCQTcWLdwFIkUDP5edZfwf6ut7Qv+gBHAoYXlzBY1rxZGmVTkCWAVnzmL7o2Y0aS3G9hAaGAxKt/FN7r21RrIjFwQYD7uohYcgoXZa7pmAE+oK3GGyjguHsACDncQiyT5RH8ZA8XlRPEZqh+JA5/BwB+aFH+lw5dpE0nehghJJufP2XgAHnjmpgOEv0/zNaAWOIK9C1s42qzJCBh/2jL4ExwI3UXlwCQ2AMo2/tFdnK/GKGmCFm9LFRzBAzxAwxoyEWCAyBIZeUu3VWAG+ILQJDYMh1KYA3xAKB0TgY/wCrKvMDWcWHNQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAR7SURBVHhe7Z2hUhxBEIap6AhEZAQCkQeIiIjgAVApJAKBTVUkAkFVHiEPgEAikQhEREQkIhIREYFAREZc+j96iq27pdid+Xe2b/cXUyHczl7PfP13z8zODluLxWJLJUYfCEQgZxQMwYgRFqKFZylDypAy2lQpZUgZUoaUEUgFgiEYCkldh9BK4IHUIhiCodClBB5IBYIxZxivPn1+beXQyoWVWysPVhYbWGA37L+0cmRlu+sIqc91gyVwM3jfyu8N7PguznJv7Tro09FdrqXDcDV8a0C4tp+Prezisy5GRbvG2/TO24H2JGDnTJVQYbjRv9xYSPsoWscy7PFQlULuHQsIG0ZSxHcz8C2j4VHvgfZZQTuhknOGnTQYniNgGDxm0iBSxzuQpJD9UiAUGB6eUrKeZGh6rqM9ZMEJ0f6inMiCgeErDLou9Y5NrG/tvvH2H5bYz4KBeQRgHJcYk1PXvvPMv/sspz6jjn3/qdtwUXI/FgxMiABjt8SYnLpBYGBOhfbf5rQh1WHBSEmsKGbmNKQRsykjmkwb3jiMh5z6bBjLSVCJIbl1I8CA7Q6jqA9YyhAMn5XnOhXqTQFGGskVJc+STpQyfDncwsOeh4ib0g4tqa8w9RirBaPpRQyvyPVKwVh5YjYyjA/+/T9ygTLqMfpgCgl8xzvijtGpufcQjMecIRiBcoZgBIKRliLuc0MMo57C1NNcY7QVgARSMARjfWsmwytKQsXY36/lkMZcx2CkJfxBNpd1cRSGQ2z8PMO9EttlkDd2unTcENfMFkZq+Ev/DtHpz91TMF7YtysYFXZ6r3qh/f+n/+49K5n2BTl7ZTTG+GmrzJ5gEB459vHEFmUIBnP2mQNDCbwlJzDipWBMYEOC5wi8J4F5xmj7fBkOOZVJn2CMlTNWQ5p5pWAEgvHVw8Rpn9zDvFZh6mkJPcJO9OJnKlPJGYIRKEwJRhQYzNifey/ljAqLkl3hCIZgxHsG3tV7h7xOypAypIw2hUkZUkYsZZhHfrRyZQXHDqHg5+UTv5pl9sqwDvhi5V/LQyb8ruo61axhuCLQ6cuOt4JTblBOGoCqKWTuMBCOsDi3pgCHg8+uaoWqucNAfkCHrx2n5ArBZ9VeExAMwWgdTf11z6h2doiPmuD9Jy1P/pA3qoUp+65QZ4ekcwmrnaqD4asn6tETuNkR6lQdnPda/bypRqJePmVbKdXOn2rYcVkyYKBMjMwYHLw7yklsrpBRJ31mQ9rRWLRViAVjGyMXB1JkUIlnjVG34Yhof9HLOhQYvpHswGHgLaI5nt5ZfAI0DYYDSWcVzu1c26JckRTNhoFwlV7pgkImGbI8NKX3CP9gaMsIkVQYrg4ASTv8kNSR3LB2hOEfxWhGw/vcw+cRsB/tSMkabcMoktYmOozGjhH9lYCey/iDwXCV6O9n9AAyKIw+oUDXkt7PUEdynipKGT3CyNBOJxiCwZH10J5a+/5ShpQhZbSpTsqQMqQMKSOQCgRDMBSSug6RlcADqUUwBEOhSwk8kAoEIziM/5ZTLyXvAlkpAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAUXSURBVHhe7V2rUlxBEE1FRyCQEQhEPiAiIoIPQKWQCAQ2VZEIBFX5hHwAAolEIhAREZGISEREBAIRGbHpQ/VUpnYvl57pvtne3SOmCnZnhp4+fU7P497hxWw2e8GSwwcEIlEwEgyCkUMWsskzmUFmkBlDrCQzyAwyg8xIxAKCQTAoSdYpNBN4IrYQDIJB6WICT8QCgrHJYLz88PGVlEMpF1JupTxIma1ggd2w/1LKkZQt6wyppd5kCVwM3pfycwUdbwmWexnXQYujLXXDwVA2fKlAuJafj6Xs4juLUdnq6Jje6DgwngLYeSRLQsFQo3+osaD2UTbHRtijUlUk9y4KkGgwCiO+ioGvIwaetQ+MTwrGCZacR9gZBobmCBiGiFlrIIrjFZDCkH0vICFgqDyVZL2W0vSUo1WyEIQYvysnRoGB6SsMuvZGxyq2l3Hf6PgPPfZHgYF1BMA4bjVG2pxp27PWtqjvbV9JTrcdYsOpjuGiZwylTRQYWBABjN1WY7zO9LYPAgNrKoz/tnX8df0oMEoSa9ZMrzMrzXbNaDx2SNttBeMhAxiPi6AeQzxOUJnC9oR7ehlgR7cPomXKbIg6zrLlYAI3AzM0KMw+eCpoo2TKbMgEYJSZnCt5bjQzxhJnAcwie1J3T+vfWOpXf9fETqv8tticjhkEY/G0c2kylQWMQDvMUp2OGZbcYZEd6eed9vXNUn9epgiG8bTP4lwBYkfBuLPUJxgjZ88BsxgXGIEMXT2Zmo9egvEvkf/3BD4BGGUr4r5Fpiawg8yIWv0GMJRgEIy5hOxZfXojkmDkA6Ns4Xc/XOYNCk9ALm3XNjpxKjPwuAw0e6c3iROMzmNTy9rAusE3tgJvAXZjmUEwxlfR3dO6HnmYj0L5/bt+9rY3offYUTNn45lRSUx5VGaPYOjGX4vGerR6gBkE46kd0BZQeuSBOSNhzngOlKmDgjljICgElHMFpvs53x6GEgyCMf6qsGda541InT2RGctK4ANbKp81IE5b8sSczHQ/+Nw7nZ63deUPl9QRLkdG9OFRh3XbKCQYiWSKYESA0avx2dqthUxlc2qvPQQj0V0gBINgLC4AI6KiVx6ytIvwwdLXGVmc6bWDYFCm4mRKoum9lCspuDIIBT8/ntZZi7cPb/vI6b150GPO6aGotPkk5c/AmQQ+M+0xefvwtl+LLXSNRjj90fFScEMNykkF0ChDvH142w9sVnY/lLHUvSmVIxi/wAAFB99dPcNGSFp3HxE2rAszkB/gyIWrkJQh+G70EX/NMd19eNuvEzMIxsAkJSqB/9ZIN90dUknEyUCEIW+0yFRXHxE2VDOpVHeHlHsJTbfqiCPwIr03gbv6iLChAiPVrTq477XpvqkqUQ/dVGC6e8rbh7d9BUa5b+rSuj4aqhclU+Vmm6ab2DQ6vYs+MKS7jyAbyhON3Y8KAZwoMLaq2YnLIE9kLaOtjLsEIiYl3S/rhIGhB/oHKlV4i2gTb+903wAdwoxKO8tdhZt2r60rV4SuwCswIFfllS4wZC0lS6WpvEf4S37fjpDIUGaoXAGQ8oQfZkpIbphtYPoXYnTEwFv6gN1qP8ZRkjXGhllk2JjCwZibe/O/BDQcB0wGhrKE/z8jCxgtUsC6QesMOtJ+Mjnmq0lliiC1gUQwGjR96uAiGASjjb5TR2SW/skMMoPMmOw8IwvNV90OyhRlijJFmUrEAoJBMChJ1okFE3githAMgkHpGpKuv887tA5HhhPjAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABiCAYAAABEZ20wAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAPhJREFUeF7tyKEBADAQhLDff+nrAngqEDG5bfkEZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZhyYcWDGgRkHZgy7B/6DRu7DB74QAAAAAElFTkSuQmCC\"","/* This file is temporary here to speed-up the development of this component.\n    Later it will be moved to adapter-react\n */\n\nimport PropTypes from 'prop-types';\n\nexport const PROGRESS = {\n    CONNECTING: 0,\n    CONNECTED: 1,\n    OBJECTS_LOADED: 2,\n    READY: 3\n};\n\nconst PERMISSION_ERROR = 'permissionError';\n\nclass Connection {\n    constructor(props) {\n        props = props || {};\n        this.props = props;\n\n        this.autoSubscribes   = this.props.autoSubscribes || [];\n        this.autoSubscribeLog = this.props.autoSubscribeLog;\n\n        this.props.protocol = this.props.protocol || window.location.protocol;\n        this.props.host     = this.props.host     || (window.location.host && window.location.host.substr(0, window.location.host.indexOf(':')));\n        this.props.port     = this.props.port     || 8081;\n\n        // breaking change. Do not load all objects by default is true\n        this.doNotLoadAllObjects = this.props.doNotLoadAllObjects === undefined ? true : this.props.doNotLoadAllObjects;\n\n        this._socket = window.io.connect(\n            this.props.protocol.replace(':', '') + '://' + this.props.host + ':' + this.props.port,\n            {query: 'ws=true', name: props.name}\n        );\n\n        this.states = {};\n        this.objects = null;\n        this.acl = null;\n        this.firstConnect = true;\n        this.waitForRestart = false;\n        this.systemLang = 'en';\n        this.connected = false;\n        this.statesSubscribes = {}; // subscribe for states\n        this.objectsSubscribes = {}; // subscribe for objects\n        this.onProgress = this.props.onProgress || function () {};\n        this.onError = this.props.onError || function (err) {console.error(err);};\n        this.loaded = false;\n        this.loadTimer = null;\n        this.loadCounter = 0;\n        this.certPromise = null;\n        \n        this.onConnectionHandlers = [];\n        this.onLogHandlers = [];\n\n        this.promises = {};\n\n        this._socket.on('connect', () => {\n            this._socket.emit('authenticate', (isOk, isSecure) => {\n                this.connected = true;\n                this.isSecure = isSecure;\n                if (this.firstConnect) {\n                    // retry strategy\n                    this.loadTimer = setTimeout(() => {\n                        this.loadTimer = null;\n                        this.loadCounter++;\n                        if (this.loadCounter < 10) {\n                            this.onConnect();\n                        }\n                    }, 1000);\n\n                    if (!this.loaded) {\n                        this.onConnect();\n                    }\n                } else {\n                    this.onProgress(PROGRESS.READY);\n                }\n\n                this.subscribe(true);\n\n                if (this.waitForRestart) {\n                    window.location.reload();\n                } else {\n                    this.onConnectionHandlers.forEach(cb => cb(true));\n                }\n            });\n        });\n\n        this._socket.on('disconnect', () => {\n            this.connected  = false;\n            this.subscribed = false;\n            this.onProgress(PROGRESS.CONNECTING);\n            this.onConnectionHandlers.forEach(cb => cb(false));\n        });\n\n        this._socket.on('reconnect', () => {\n            this.onProgress(PROGRESS.READY);\n            if (this.waitForRestart) {\n                window.location.reload();\n            }\n        });\n\n        this._socket.on('reauthenticate', () => this.authenticate());\n        this._socket.on('log', message => {\n            this.props.onLog && this.props.onLog(message);\n            this.onLogHandlers.forEach(cb => cb(message));\n        });\n\n        this._socket.on('error', err => {\n            let _err = (err || '');\n            if (typeof _err.toString !== 'function') {\n                _err = JSON.stringify(_err);\n                console.error('Received strange error: ' + _err);\n            }\n            _err = _err.toString();\n            if (_err.indexOf('User not authorized') !== -1) {\n                this.authenticate();\n            } else {\n                window.alert('Socket Error: ' + err);\n            }\n        });\n        this._socket.on('connect_error', err =>\n            console.error('Connect error: ' + err));\n\n        this._socket.on('permissionError', err =>\n            this.onError({message: 'no permission', operation: err.operation, type: err.type, id: (err.id || '')}));\n\n        this._socket.on('objectChange', (id, obj) => setTimeout(() => this.objectChange(id, obj), 0));\n        this._socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0));\n\n        this._socket.on('cmdStdout', (id, text) => {\n            this.onCmdStdoutHandler && this.onCmdStdoutHandler(id, text);\n        });\n\n        this._socket.on('cmdStderr', (id, text) => {\n            this.onCmdStderrHandler && this.onCmdStderrHandler(id, text);\n        });\n\n        this._socket.on('cmdExit', (id, exitCode) => {\n            this.onCmdExitHandler && this.onCmdExitHandler(id, exitCode);\n        });\n    }\n    \n    isConnected() {\n        return this.connected;\n    }\n\n    onConnect() {\n        this._socket.emit('getUserPermissions', (err, acl) => {\n            if (this.loaded) {\n                return;\n            }\n            this.loaded = true;\n            clearTimeout(this.loadTimer);\n            this.loadTimer = null;\n\n            this.onProgress(PROGRESS.CONNECTED);\n            this.firstConnect = false;\n\n            this.acl = acl;\n            // Read system configuration\n            this._socket.emit('getObject', 'system.config', (err, data) => {\n                this.systemConfig = data;\n                if (!err && this.systemConfig && this.systemConfig.common) {\n                    this.systemLang = this.systemConfig.common.language;\n                } else {\n                    this.systemLang = window.navigator.userLanguage || window.navigator.language;\n\n                    if (this.systemLang !== 'en' && this.systemLang !== 'de' && this.systemLang !== 'ru') {\n                        this.systemConfig.common.language = 'en';\n                        this.systemLang = 'en';\n                    }\n                }\n\n                this.props.onLanguage && this.props.onLanguage(this.systemLang);\n\n                if (!this.doNotLoadAllObjects) {\n                    this.getObjects(() => {\n                        this.onProgress(PROGRESS.READY);\n                        this.props.onReady && this.props.onReady(this.objects);\n                    });\n                } else {\n                    this.objects = {'system.config': data};\n                    this.onProgress(PROGRESS.READY);\n                    this.props.onReady && this.props.onReady(this.objects);\n                }\n            });\n        });\n    }\n\n    authenticate() {\n        window.location = `${window.location.protocol}//${window.location.host}${window.location.pathname}?login&href=${window.location.search}${window.location.hash}`;\n    }\n\n    subscribeState(id, cb) {\n        if (!this.statesSubscribes[id]) {\n            let reg = id\n                .replace(/\\./g, '\\\\.')\n                .replace(/\\*/g, '.*')\n                .replace(/\\(/g, '\\\\(')\n                .replace(/\\)/g, '\\\\)')\n                .replace(/\\+/g, '\\\\+')\n                .replace(/\\[/g, '\\\\[');\n\n            if (reg.indexOf('*') === -1) {\n                reg += '$';\n            }\n            this.statesSubscribes[id] = {reg: new RegExp(reg), cbs: []};\n            this.statesSubscribes[id].cbs.push(cb);\n            if (this.connected) {\n                this._socket.emit('subscribe', id);\n            }\n        } else {\n            this.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb);\n        }\n        if (typeof cb === 'function') {\n            if (this.connected) {\n                this._socket.emit('getForeignStates', id, (err, states) =>\n                    states && Object.keys(states).forEach(id => cb(id, states[id])));\n            }\n        }\n    }\n\n    unsubscribeState(id, cb) {\n        if (this.statesSubscribes[id]) {\n            if (cb) {\n                const pos = this.statesSubscribes[id].cbs.indexOf(cb);\n                pos !== -1 && this.statesSubscribes[id].cbs.splice(pos, 1);\n            } else {\n                this.statesSubscribes[id].cbs = null;\n            }\n\n            if (!this.statesSubscribes[id].cbs || !this.statesSubscribes[id].cbs.length) {\n                delete this.statesSubscribes[id];\n                this.connected && this._socket.emit('unsubscribe', id);\n            }\n        }\n    }\n\n    subscribeObject(id, cb) {\n        if (!this.objectsSubscribes[id]) {\n            let reg = id.replace(/\\./g, '\\\\.').replace(/\\*/g, '.*');\n            if (reg.indexOf('*') === -1) {\n                reg += '$';\n            }\n            this.objectsSubscribes[id] = {reg: new RegExp(reg), cbs: []};\n            this.objectsSubscribes[id].cbs.push(cb);\n            if (this.connected) {\n                this._socket.emit('subscribeObjects', id);\n            }\n        } else {\n            !this.objectsSubscribes[id].cbs.includes(cb) && this.objectsSubscribes[id].cbs.push(cb);\n        }\n        return Promise.resolve();\n    }\n\n    unsubscribeObject(id, cb) {\n        if (this.objectsSubscribes[id]) {\n            if (cb) {\n                const pos = this.objectsSubscribes[id].cbs.indexOf(cb);\n                pos !== -1 && this.objectsSubscribes[id].cbs.splice(pos, 1);\n            } else {\n                this.objectsSubscribes[id].cbs = null;\n            }\n\n            if (this.connected && (!this.objectsSubscribes[id].cbs || !this.objectsSubscribes[id].cbs.length)) {\n                delete this.objectsSubscribes[id];\n                this._socket.emit('unsubscribeObjects', id);\n            }\n        }\n        return Promise.resolve();\n    }\n\n    objectChange(id, obj) {\n        // update main.objects cache\n        if (!this.objects) {\n            return;\n        }\n\n        let oldObj;\n\n        let changed = false;\n        if (obj) {\n            if (obj._rev && this.objects[id]) {\n                this.objects[id]._rev = obj._rev;\n            }\n\n            if (this.objects[id]) {\n                oldObj = {_id: id, type: this.objects[id].type};\n            }\n\n            if (!this.objects[id] || JSON.stringify(this.objects[id]) !== JSON.stringify(obj)) {\n                this.objects[id] = obj;\n                changed = true;\n            }\n        } else if (this.objects[id]) {\n            oldObj = {_id: id, type: this.objects[id].type};\n            delete this.objects[id];\n            changed = true;\n        }\n\n        Object.keys(this.objectsSubscribes).forEach(_id => {\n            if (_id === id || this.objectsSubscribes[_id].reg.test(id)) {\n                this.objectsSubscribes[_id].cbs.forEach(cb => cb(id, obj, oldObj));\n            }\n        });\n\n        if (this.props.onBlocklyChanges && id.match(/^system\\.adapter\\.[-\\w\\d]+\\$/)) {\n            if (obj[id].common && obj[id].common.blockly) {\n                this.props.onBlocklyChanges(id);\n            }\n        }\n\n        if (changed && this.props.onObjectChange) {\n            this.props.onObjectChange(this.objects);\n        }\n    }\n\n    stateChange(id, state) {\n        id = id ? id.replace(/[\\s'\"]/g, '_') : '';\n        for (const task in this.statesSubscribes) {\n            if (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\n                this.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\n            }\n        }\n    }\n\n    getStates(cb, disableProgressUpdate) {\n        this._socket.emit('getStates', (err, res) => {\n            this.states = res;\n            !disableProgressUpdate && this.onProgress(PROGRESS.STATES_LOADED);\n            cb && setTimeout(() => cb(this.states), 0);\n        });\n    }\n\n    getState(id) {\n        return new Promise((resolve, reject) =>\n            this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\n    }\n\n    setState(id, val) {\n        return new Promise((resolve, reject) =>\n            this.setState(id, val, err => err ? reject(err) : resolve()));\n    }\n\n    getObjects(update, disableProgressUpdate) {\n        return new Promise((resolve, reject) => {\n            if (!update && this.objects) {\n                return resolve(this.objects);\n            }\n\n            this._socket.emit('getAllObjects', (err, res) => {\n                this.objects = res;\n                disableProgressUpdate && this.onProgress(PROGRESS.OBJECTS_LOADED);\n                err ? reject(err) : resolve(this.objects);\n            });\n        });\n    }\n\n    subscribe(isEnable) {\n        if (isEnable && !this.subscribed) {\n            this.subscribed = true;\n            this.autoSubscribes.forEach(id => this._socket.emit('subscribeObjects', id));\n            Object.keys(this.objectsSubscribes).forEach(id => this._socket.emit('subscribeObjects', id));\n            this.autoSubscribeLog && this._socket.emit('requireLog', true);\n\n            Object.keys(this.statesSubscribes).forEach(id => this._socket.emit('subscribe', id));\n        } else if (!isEnable && this.subscribed) {\n            this.subscribed = false;\n            this.autoSubscribes.forEach(id => this._socket.emit('unsubscribeObjects', id));\n            Object.keys(this.objectsSubscribes).forEach(id => this._socket.emit('unsubscribeObjects', id));\n            this.autoSubscribeLog && this._socket.emit('requireLog', false);\n\n            Object.keys(this.statesSubscribes).forEach(id => this._socket.emit('unsubscribe', id));\n        }\n    }\n\n    delObject(id) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('delObject', id, err =>\n                err ? reject(err) : resolve()));\n    }\n\n    setObject(id, obj) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('setObject', id, obj, err =>\n                err ? reject(err) : resolve()));\n    }\n\n    getObject(id) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('getObject', id, (err, obj) =>\n                err ? reject(err) : resolve(obj)));\n    }\n\n    getAdapterInstances(adapter, update) {\n        if (typeof adapter === 'boolean') {\n            update = adapter;\n            adapter = '';\n        }\n        adapter = adapter || '';\n        if (update) {\n            this.promises['instances' + adapter] = null;\n        }\n\n        this.promises['instances' + adapter]  = this.promises['instances' + adapter] || new Promise((resolve, reject) => {\n            this._socket.emit(\n                'getObjectView',\n                'system',\n                'instance',\n                {startkey: 'system.adapter.' + (adapter || ''), endkey: 'system.adapter.' + (adapter ? adapter + '.' : '') + '\\u9999'},\n                (err, doc) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve(doc.rows.map(item => item.value));\n                    }\n                });\n        });\n\n        return this.promises['instances' + adapter];\n    }\n\n    _renameGroups(objs, cb) {\n        if (!objs || !objs.length) {\n            cb && cb();\n        } else {\n            let obj = objs.pop();\n            this.delObject(obj._id)\n                .then(() => {\n                    obj._id = obj.newId;\n                    delete obj.newId;\n                    return this.setObject(obj._id, obj)\n                })\n                .then(() => setTimeout(() => this._renameGroups(objs, cb), 0))\n                .catch(err => cb && cb(err));\n        }\n    }\n\n    renameGroup(id, newId, newName) {\n        return this.getGroups(true)\n            .then(groups => {\n                if (groups.length) {\n                    // find all elements\n                    const groupsToRename = groups\n                        .filter(group => group._id.startsWith(id + '.'))\n                        .forEach(group => group.newId = newId + group._id.substring(id.length));\n\n                    return new Promise((resolve, reject) =>\n                        this._renameGroups(groupsToRename, err => err ? reject(err) : resolve()))\n                        .then(() => {\n                            const obj = groups.find(group => group._id === id);\n\n                            if (obj) {\n                                obj._id = newId;\n                                if (newName !== undefined) {\n                                    obj.common = obj.common || {};\n                                    obj.common.name = newName;\n                                }\n\n                                return this.setObject(obj._id, obj);\n                            }\n                        });\n                }\n            });\n    }\n\n    sendTo(instance, command, data) {\n        return new Promise(resolve =>\n            this._socket.emit('sendTo', instance, command, data, result => resolve(result)));\n    }\n\n    extendObject(id, obj) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('extendObject', id, obj, err => err ? reject(err) : resolve()));\n    }\n\n    registerLogHandler(handler) {\n        !this.onLogHandlers.includes(handler) && this.onLogHandlers.push(handler);\n    }\n\n    unregisterLogHandler(handler) {\n        const pos = this.onLogHandlers.indexOf(handler);\n        pos !== -1 && this.onLogHandlers.splice(pos, 1);\n    }\n\n    registerConnectionHandler(handler) {\n        !this.onConnectionHandlers.includes(handler) && this.onConnectionHandlers.push(handler);\n    }\n    \n    unregisterConnectionHandler(handler) {\n        const pos = this.onConnectionHandlers.indexOf(handler);\n        pos !== -1 && this.onConnectionHandlers.splice(pos, 1);\n    }\n\n    registerCmdStdoutHandler(handler) {\n        this.onCmdStdoutHandler = handler;\n    }\n\n    unregisterCmdStdoutHandler(handler) {\n        this.onCmdStdoutHandler = null;\n    }\n\n    registerCmdStderrHandler(handler) {\n        this.onCmdStderrHandler = handler;\n    }\n\n    unregisterCmdStderrHandler(handler) {\n        this.onCmdStderrHandler = null;\n    }\n\n    registerCmdExitHandler(handler) {\n        this.onCmdExitHandler = handler;\n    }\n\n    unregisterCmdExitHandler(handler) {\n        this.onCmdExitHandler = null;\n    }\n\n    getEnums(_enum) {\n        return new Promise((resolve, reject) => {\n            this._socket.emit('getObjectView', 'system', 'enum', {startkey: 'enum.' + (_enum || ''), endkey: 'enum.' + (_enum ? (_enum + '.') : '') + '\\u9999'}, (err, res) => {\n                if (!err && res) {\n                    const _res   = {};\n                    for (let i = 0; i < res.rows.length; i++) {\n                        if (_enum && res.rows[i].id === 'enum.' + _enum) continue;\n                        _res[res.rows[i].id] = res.rows[i].value;\n                    }\n                    resolve(_res);\n                } else {\n                    reject(err);\n                }\n            });\n        });\n    }\n\n    getCertificates() {\n        if (this.certPromise) {\n            return this.certPromise;\n        }\n\n        this.certPromise = this.getObject('system.certificates')\n            .then(res => {\n                const certs = [];\n                if (res && res.native && res.native.certificates) {\n                    Object.keys(res.native.certificates).forEach(c => {\n                            const cert = res.native.certificates[c];\n                            if (!cert) {\n                                return;\n                            }\n                            const _cert = {\n                                name: c,\n                                type: ''\n                            };\n                            // If it is filename, it could be everything\n                            if (cert.length < 700 && (cert.indexOf('/') !== -1 || cert.indexOf('\\\\') !== -1)) {\n                                if (c.toLowerCase().includes('private')) {\n                                    _cert.type = 'private';\n                                } else if (cert.toLowerCase().includes('private')) {\n                                    _cert.type = 'private';\n                                } else if (c.toLowerCase().includes('public')) {\n                                    _cert.type = 'public';\n                                } else if (cert.toLowerCase().includes('public')) {\n                                    _cert.type = 'public';\n                                }\n                                certs.push(_cert);\n                            } else {\n                                _cert.type = (cert.substring(0, '-----BEGIN RSA PRIVATE KEY'.length) === '-----BEGIN RSA PRIVATE KEY' || cert.substring(0, '-----BEGIN PRIVATE KEY'.length) === '-----BEGIN PRIVATE KEY') ? 'private' : 'public';\n\n                                if (_cert.type === 'public') {\n                                    const m = cert.split('-----END CERTIFICATE-----');\n                                    if (m.filter(t => t.replace(/\\r\\n|\\r|\\n/, '').trim()).length > 1) {\n                                        _cert.type = 'chained';\n                                    }\n                                }\n\n                                certs.push(_cert);\n                            }\n                        });\n                }\n                return certs;\n            });\n\n        return this.certPromise;\n    }\n\n    getLogs(host, linesNumber) {\n        return new Promise(resolve =>\n            this._socket.emit('sendToHost', host, 'getLogs', linesNumber || 200, lines =>\n                resolve(lines)));\n    }\n\n    getLogsFiles() {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('readLogs', (err, files) =>\n                err ? reject(err) : resolve(files)));\n    }\n\n    delLogs(host) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('sendToHost', host, 'delLogs', null, error =>\n                error ? reject(error) : resolve()));\n    }\n\n    readMetaItems() {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('getObjectView', 'system', 'meta', {startkey: '', endkey: '\\u9999'}, (err, objs) =>\n                err ? reject(err) : resolve(objs.rows && objs.rows.map(obj => obj.value))));\n    }\n\n    readDir(adapter, fileName) {\n        return new Promise((resolve, reject) => {\n            this._socket.emit('readDir', adapter, fileName, (err, files) => {\n                err ? reject(err) : resolve(files);\n            });\n        });\n    }\n\n    writeFile64(adapter, fileName, data) {\n        return new Promise((resolve, reject) => {\n            if (typeof data === 'string') {\n                this._socket.emit('writeFile', adapter, fileName, data, err =>\n                    err ? reject(err) : resolve());\n            } else {\n                const base64 = btoa(\n                    new Uint8Array(data)\n                        .reduce((data, byte) => data + String.fromCharCode(byte), '')\n                );\n\n                this._socket.emit('writeFile64', adapter, fileName, base64, err =>\n                    err ? reject(err) : resolve());   \n            }\n        });\n    }\n    \n    deleteFile(adapter, fileName) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('deleteFile', adapter, fileName, err =>\n                err ? reject(err) : resolve()));\n    }\n\n    getHosts(update) {\n        if (update || !this.promises.hosts) {\n            this.promises.hosts = new Promise((resolve, reject) =>\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'host',\n                    {startkey: 'system.host.', endkey: 'system.host.\\u9999'},\n                    (err, doc) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(doc.rows.map(item => item.value));\n                        }\n                    }));\n        }\n\n        return this.promises.hosts;\n    }\n\n    getUsers(update) {\n        if (update || !this.promises.users) {\n            this.promises.hosts = new Promise((resolve, reject) =>\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'user',\n                    {startkey: 'system.user.', endkey: 'system.user.\\u9999'},\n                    (err, doc) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(doc.rows.map(item => item.value));\n                        }\n                    }));\n        }\n\n        return this.promises.users;\n    }\n\n    getGroups(update) {\n        if (update || !this.promises.users) {\n            this.promises.hosts = new Promise((resolve, reject) =>\n                this._socket.emit(\n                    'getObjectView',\n                    'system',\n                    'group',\n                    {startkey: 'system.group.', endkey: 'system.group.\\u9999'},\n                    (err, doc) => {\n                        if (err) {\n                            reject(err);\n                        } else {\n                            resolve(doc.rows.map(item => item.value));\n                        }\n                    }));\n        }\n\n        return this.promises.users;\n    }\n\n    getHostInfo(host) {\n        if (!host.startsWith(host)) {\n            host += 'system.host.' + host;\n        }\n\n        return new Promise((resolve, reject) => {\n            let timeout = setTimeout(() => {\n                if (timeout) {\n                    timeout = null;\n                    reject('timeout');\n                }\n            }, 5000);\n\n            this._socket.emit('sendToHost', host, 'getHostInfo', null, data => {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                    if (data === PERMISSION_ERROR) {\n                        reject('May not read \"getHostInfo\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getHostInfo\"');\n                    } else {\n                        resolve(data);\n                    }\n                }\n            });\n        });\n    }\n\n    getRepository(host, args) {\n        if (!host.startsWith(host)) {\n            host += 'system.host.' + host;\n        }\n\n        return new Promise((resolve, reject) => {\n            let timeout = setTimeout(() => {\n                if (timeout) {\n                    timeout = null;\n                    reject('timeout');\n                }\n            }, 5000);\n\n            this._socket.emit('sendToHost', host, 'getRepository', args, data => {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                    if (data === PERMISSION_ERROR) {\n                        reject('May not read \"getRepository\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getRepository\"');\n                    } else {\n                        resolve(data);\n                    }\n                }\n            });\n        });\n    }\n\n    getInstalled(host) {\n        if (!host.startsWith(host)) {\n            host += 'system.host.' + host;\n        }\n\n        return new Promise((resolve, reject) => {\n            let timeout = setTimeout(() => {\n                if (timeout) {\n                    timeout = null;\n                    reject('timeout');\n                }\n            }, 5000);\n\n            this._socket.emit('sendToHost', host, 'getInstalled', null, data => {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                    if (data === PERMISSION_ERROR) {\n                        reject('May not read \"getInstalled\"');\n                    } else if (!data) {\n                        reject('Cannot read \"getInstalled\"');\n                    } else {\n                        resolve(data);\n                    }\n                }\n            });\n        });\n    }\n\n    cmdExec(host, cmd, cmdId) {\n        if (!host.startsWith(host)) {\n            host += 'system.host.' + host;\n        }\n\n        return new Promise((resolve, reject) => {\n            let timeout = setTimeout(() => {\n                if (timeout) {\n                    timeout = null;\n                    reject('timeout');\n                }\n            }, 5000);\n\n            this._socket.emit('cmdExec', host, cmdId, cmd, null, err => {\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                    if (err) {\n                        reject(err);\n                    } else {\n                        resolve();\n                    }\n                }\n            });\n        });\n    }\n    \n    checkFeatureSupported(feature, update) {\n        if (update) {\n            this.promises['supportedFeatures_' + feature] = null;\n        }\n\n        this.promises['supportedFeatures_' + feature] = this.promises['supportedFeatures_' + feature] || new Promise((resolve, reject) =>\n            this._socket.emit('checkFeatureSupported', features => resolve(features)));\n\n        return this.promises['supportedFeatures_' + feature];\n    }\n\n    readBaseSettings(host) {\n        return this.checkFeatureSupported('CONTROLLER_READWRITE_BASE_SETTINGS')\n            .then(result => {\n                if (result) {\n                    return new Promise((resolve, reject) => {\n                        let timeout = setTimeout(() => {\n                            if (timeout) {\n                                timeout = null;\n                                reject('timeout');\n                            }\n                        }, 5000);\n\n                        this._socket.emit('sendToHost', host, 'readBaseSettings', null, data => {\n                            if (timeout) {\n                                clearTimeout(timeout);\n                                timeout = null;\n\n                                if (data === PERMISSION_ERROR) {\n                                    reject('May not read \"BaseSettings\"');\n                                } else if (!data) {\n                                    reject('Cannot read \"BaseSettings\"');\n                                } else {\n                                    resolve(data);\n                                }\n                            }\n                        });\n                    });\n                } else {\n                    return Promise.reject('Not supported');\n                }\n            })\n    }\n\n    writeBaseSettings(host, config) {\n        return this.checkFeatureSupported('CONTROLLER_READWRITE_BASE_SETTINGS')\n            .then(result => {\n                if (result) {\n                    return new Promise((resolve, reject) => {\n                        let timeout = setTimeout(() => {\n                            if (timeout) {\n                                timeout = null;\n                                reject('timeout');\n                            }\n                        }, 5000);\n\n                        this._socket.emit('sendToHost', host, 'writeBaseSettings', config, data => {\n                            if (timeout) {\n                                clearTimeout(timeout);\n                                timeout = null;\n\n                                if (data === PERMISSION_ERROR) {\n                                    reject('May not write \"BaseSettings\"');\n                                } else if (!data) {\n                                    reject('Cannot write \"BaseSettings\"');\n                                } else {\n                                    resolve(data);\n                                }\n                            }\n                        });\n                    });\n                } else {\n                    return Promise.reject('Not supported');\n                }\n            })\n    }\n\n    getForeignStates(pattern) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('getForeignStates', pattern || '*', (err, states) =>\n                err ? reject(err) : resolve(states)));\n    }\n\n    // type could be undefined\n    getForeignObjects(pattern, type) {\n        return new Promise((resolve, reject) =>\n            this._socket.emit('getForeignObjects', pattern || '*', type, (err, states) =>\n                err ? reject(err) : resolve(states)));\n    }\n\n    getSystemConfig(update) {\n        if (update) {\n            this.promises.systemConfig = null;\n        }\n        this.promises.systemConfig = this.promises.systemConfig || this.getObject('system.config');\n\n        return this.promises.systemConfig;\n    }\n}\n\nConnection.Connection = {\n    onLog: PropTypes.func,\n    onReady: PropTypes.func,\n    onProgress: PropTypes.func,\n};\n\nexport default Connection;\n","import * as React from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction SvgExpertIcon(props) {\n    return (\n        <svg viewBox=\"0 0 384.754 384.754\" className={ props.className || ''} style={ props.style || {} }>\n            <filter id=\"expert-neon\">\n                <feFlood floodColor={ props.glowColor || '#2978d0' } floodOpacity=\"0.5\" in=\"SourceGraphic\" />\n                <feComposite operator=\"in\" in2=\"SourceGraphic\" />\n                <feGaussianBlur stdDeviation=\"10\" />\n                <feComponentTransfer result=\"glow1\">\n                    <feFuncA type=\"linear\" slope=\"4\" intercept=\"0\" />\n                </feComponentTransfer>\n                <feMerge>\n                    <feMergeNode in=\"glow1\" />\n                    <feMergeNode in=\"SourceGraphic\" />\n                </feMerge>\n            </filter>\n            <path fill=\"currentColor\" filter={props.active ? 'url(#expert-neon)' : ''} d=\"M214.86,374.508c0,4.971-4.029,9-9,9h-65.01c-4.971,0-9.223-3.57-9.223-8.541V288.87c0-4.971,4.252-9.361,9.223-9.361\n\th99.585c4.971,0,9,4.029,9,9s-4.029,9-9,9h-90.808v68h56.232C210.83,365.508,214.86,369.538,214.86,374.508z M136.65,115.508h10\n\tc4.971,0,9-4.029,9-9s-4.029-9-9-9h-10c-4.971,0-9,4.029-9,9S131.679,115.508,136.65,115.508z M180.947,115.508h10\n\tc4.97,0,9-4.029,9-9s-4.029-9-9-9h-10c-4.971,0-9,4.029-9,9S175.976,115.508,180.947,115.508z M152.056,142.508c0,4.971,4.029,9,9,9\n\th5c4.971,0,9-4.029,9-9s-4.029-9-9-9h-5C156.086,133.508,152.056,137.538,152.056,142.508z M127.875,220.987\n\tc6.952,11.05,21.072,18.33,36.689,18.33c15.619,0,29.74-7.282,36.691-18.332c12.326,0.961,24.51,6.008,33.264,13.909\n\tc3.69,3.329,9.381,3.038,12.712-0.651c3.33-3.69,3.038-9.536-0.651-12.866c-12.984-11.718-31.526-18.868-49.6-18.868h-1.237\n\tc-3.845,0-7.265,2.597-8.513,6.232c-2.119,6.173-10.584,12.499-22.666,12.499c-12.08,0-20.546-6.366-22.667-12.539\n\tc-1.249-3.636-4.668-6.193-8.512-6.193h-1.236c-30.601,0-59.207,19.216-65.123,43.549L40.6,354.841\n\tc-0.119,0.442-0.205,0.936-0.255,1.402c-0.124,1.119-0.033,2.244,0.243,3.289c0.245,0.932,0.635,1.814,1.145,2.602\n\tc1.056,1.635,2.77,2.936,4.713,3.615c0.342,0.119,0.181,0.45,1.181,0.528v0.23c0,0-0.258,0-0.257,0c0.646,0,1.293,0.107,1.93,0.107\n\tc0.089,0,0.177-0.107,0.266-0.107h54.025c4.971,0,9-4.029,9-9s-4.029-9-9-9H60.743l23.773-97.92\n\tC88.17,235.565,107.472,222.596,127.875,220.987z M189.97,248.508c-4.971,0-9,4.029-9,9s4.029,9,9,9h31.78c4.971,0,9-4.029,9-9\n\ts-4.029-9-9-9H189.97z M74.842,100.475c-0.417-4.952,3.259-9.306,8.212-9.723c1.519-0.126,2.98,0.13,4.292,0.692\n\tc1.424-6.374,3.641-12.519,6.628-18.336c-0.344-0.283-0.681-0.594-0.982-0.93c-0.329-0.366-0.648-0.756-0.91-1.164\n\tc-0.819-1.275-1.455-2.772-1.455-4.38c0-0.002,0-0.005,0-0.008s0-0.007,0-0.01c0-0.218,0-0.437,0-0.656c0-0.003,0-0.006,0-0.009\n\tc0-0.001,0-0.003,0-0.004c0-0.301,0.07-0.51,0.105-0.802C94.772,27.947,126.077,0,163.556,0c34.778,0,64.202,23.508,71.492,57.508\n\th24.149c4.971,0,9,4.029,9,9s-4.029,9-9,9h-25.056c2.481,5,4.362,10.481,5.62,16.11c1.31-0.562,2.771-0.992,4.293-0.866\n\tc4.953,0.417,8.631,4.77,8.215,9.723l-1.17,13.92c-0.417,4.952-4.763,8.622-9.723,8.215c-0.326-0.027-0.646-0.072-0.961-0.133\n\tc-6.549,36.481-38.522,64.25-76.86,64.25c-38.337,0-70.31-27.769-76.858-64.25c-0.314,0.061-0.635,0.104-0.961,0.133\n\tc-4.945,0.421-9.306-3.261-9.723-8.215L74.842,100.475z M110.646,57.508h105.822c-6.838-23-28.063-39.334-52.912-39.334\n\tC138.708,18.174,117.483,34.508,110.646,57.508z M103.471,108.857c0,33.132,26.955,59.957,60.086,59.957\n\tc33.132,0,60.087-26.868,60.087-60c0-12.091-3.508-23.305-10.183-33.305h-99.809C106.977,85.508,103.471,96.765,103.471,108.857z\n\t M344.428,256.584c-0.107-1.239-0.475-2.471-1.114-3.609c-0.174-0.312-0.367-0.614-0.579-0.905l-8.921-12.739\n\tc-2.851-4.072-8.461-5.063-12.534-2.21c-4.071,2.851-5.062,8.463-2.21,12.534l6.039,8.625l-5.512,11.819\n\tc-0.003,0.008-0.007,0.015-0.01,0.022l-5.523,12.046l-13.016,1.341c-0.002,0-0.004,0-0.006,0l-13.012,0.936l-7.494-10.805\n\tc-0.004-0.005-0.007-0.059-0.011-0.064l-7.484-10.715l11.044-23.697l10.49-0.924c4.952-0.434,8.615-4.802,8.182-9.753\n\tc-0.434-4.952-4.813-8.609-9.75-8.183l-15.495,1.356c-0.355,0.024-0.708,0.069-1.057,0.135c-1.297,0.243-2.487,0.761-3.515,1.485\n\tc-1.014,0.713-1.893,1.644-2.556,2.764c-0.182,0.306-0.345,0.621-0.49,0.947l-15.289,32.79c-0.16,0.328-0.3,0.664-0.419,1.006\n\tc-0.43,1.233-0.575,2.51-0.465,3.749c0.108,1.236,0.474,2.463,1.11,3.599c0.176,0.314,0.37,0.62,0.583,0.912l10.376,14.817\n\tc0.005,0.007,0.01,0.014,0.015,0.021l7.479,10.685l-36.083,77.381c-2.101,4.505-0.151,9.86,4.354,11.961\n\tc1.23,0.573,2.524,0.845,3.798,0.845c3.39,0,6.636-1.924,8.163-5.198l36.082-77.146l13.012-0.902c0.002,0,0.004,0,0.006,0\n\tl18.021-1.813c0.358-0.024,0.714-0.188,1.064-0.256c1.292-0.243,2.477-0.817,3.501-1.539c1.014-0.711,1.891-1.669,2.555-2.786\n\tc0.185-0.309,0.351-0.644,0.497-0.975l7.644-16.398c0.001-0.002,0.002-0.008,0.003-0.009l7.644-16.396\n\tc0.159-0.326,0.299-0.66,0.417-1.001C344.392,259.102,344.538,257.825,344.428,256.584z\"/>\n        </svg>\n    );\n}\n\nSvgExpertIcon.propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    glowColor: PropTypes.string,\n    active: PropTypes.bool\n};\n\nexport default SvgExpertIcon;\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst styles = theme => ({\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500],\n    }\n});\n\nfunction ConfirmDialog(props) {\n    return (\n        <Dialog onClose={ props.onClose } open={ props.open }>\n            <DialogTitle>\n                { props.header || '' }\n                <IconButton className={ props.classes.closeButton } onClick={ props.onClose }>\n                    <CloseIcon />\n                </IconButton>\n            </DialogTitle>\n            <DialogContent dividers>\n                <Typography gutterBottom>\n                    { props.children }\n                </Typography>\n            </DialogContent>\n            <DialogActions>\n                <Button autoFocus onClick={ props.onConfirm } color=\"primary\">\n                    { props.confirmText || 'OK' }\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nConfirmDialog.propTypes = {\n    confirmText: PropTypes.string,\n    header: PropTypes.string,\n    onClose: PropTypes.func.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n    open: PropTypes.bool.isRequired\n};\n\nexport default withStyles(styles)(ConfirmDialog);","class Utils {\n\n    /**\n     * Format bytes to MB or GB\n     * @param {!number} bytes\n     * @returns {String}\n     */\n    static formatRam(bytes) {\n\n        const GB = Math.floor(bytes / (1024 * 1024 * 1024) * 10) / 10;\n        bytes %= (1024 * 1024 * 1024);\n        const MB = Math.floor(bytes / (1024 * 1024) * 10) / 10;\n        let text = '';\n\n        if (GB > 1) {\n            text += GB + ' GB';\n        } else {\n            text += MB + ' MB';\n        }\n\n        return text;\n    }\n\n    static formatSpeed(mhz) {\n        return mhz + ' MHz';\n    }\n\n    static formatBytes(bytes) {\n        if (Math.abs(bytes) < 1024) {\n            return bytes + ' B';\n        }\n\n        const units = ['KB','MB','GB'];\n        //const units = ['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];\n        let u = -1;\n\n        do {\n            bytes /= 1024;\n            ++u;\n        } while (Math.abs(bytes) >= 1024 && u < units.length - 1);\n\n        return bytes.toFixed(1) + ' ' + units[u];\n    }\n\n    static getFileExtension(fileName) {\n        const pos = fileName.lastIndexOf('.');\n        if (pos !== -1) {\n            return fileName.substring(pos + 1).toLowerCase();\n        } else {\n            return null;\n        }\n    }\n\n    // Big thanks to : https://stackoverflow.com/questions/35969656/how-can-i-generate-the-opposite-color-according-to-current-color\n    static invertColor(hex, bw) {\n        if (hex.indexOf('#') === 0) {\n            hex = hex.slice(1);\n        }\n        // convert 3-digit hex to 6-digits.\n        if (hex.length === 3) {\n            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n        }\n        if (hex.length !== 6) {\n            throw new Error('Invalid HEX color.');\n        }\n        let r = parseInt(hex.slice(0, 2), 16);\n        let g = parseInt(hex.slice(2, 4), 16);\n        let b = parseInt(hex.slice(4, 6), 16);\n\n        if (bw) {\n            // http://stackoverflow.com/a/3943023/112731\n            return (r * 0.299 + g * 0.587 + b * 0.114) > 186\n                ? '#000000'\n                : '#FFFFFF';\n        }\n        // invert color components\n        r = (255 - r).toString(16);\n        g = (255 - g).toString(16);\n        b = (255 - b).toString(16);\n        // pad each with zeros and return\n        return '#' + r.padStart(2, '0') + g.padStart(2, '0') + b.padStart(2, '0');\n    }\n\n        /**\n     * Format number in seconds to time text\n     * @param {!number} seconds\n     * @returns {String}\n     */\n    static formatSeconds(seconds, t) {\n        const days = Math.floor(seconds / (3600 * 24));\n        seconds %= 3600 * 24;\n        let hours = Math.floor(seconds / 3600);\n        if (hours < 10) {\n            hours = '0' + hours;\n        }\n        seconds %= 3600;\n        let minutes = Math.floor(seconds / 60);\n        if (minutes < 10) {\n            minutes = '0' + minutes;\n        }\n        seconds %= 60;\n        seconds = Math.floor(seconds);\n        if (seconds < 10) {\n            seconds = '0' + seconds;\n        }\n        let text = '';\n        if (days) {\n            text += days + ' ' + t('daysShortText') + ' ';\n        }\n        text += hours + ':' + minutes + ':' + seconds;\n\n        return text;\n    }\n\n    static replaceLink(link, adapter, instance, context) {\n        if (link) {\n\n            let placeholder = link.match(/%(\\w+)%/g);\n\n            if (placeholder) {\n                if (placeholder[0] === '%ip%') {\n                    link = link.replace('%ip%', context.hostname);\n                    link = Utils.replaceLink(link, adapter, instance, context);\n                } else if (placeholder[0] === '%protocol%') {\n                    link = link.replace('%protocol%', context.protocol.substr(0, context.protocol.length - 1));\n                    link = Utils.replaceLink(link, adapter, instance, context);\n                } else if (placeholder[0] === '%instance%') {\n                    link = link.replace('%instance%', instance);\n                    link = Utils.replaceLink(link, adapter, instance, context);\n                } else {\n                    // remove %%\n                    placeholder = placeholder[0].replace(/%/g, '');\n\n                    if (placeholder.match(/^native_/)) {\n                        placeholder = placeholder.substring(7);\n                    }\n                    // like web.0_port\n                    let parts;\n                    if (placeholder.indexOf('_') === -1) {\n                        parts = [adapter + '.' + instance, placeholder];\n                    } else {\n                        parts = placeholder.split('_');\n                        // add .0 if not defined\n                        if (!parts[0].match(/\\.[0-9]+$/)) {\n                            parts[0] += '.0';\n                        }\n                    }\n\n                    if (parts[1] === 'protocol') {\n                        parts[1] = 'secure';\n                    }\n\n                    try {\n                        const object = context.objects['system.adapter.' + parts[0]];\n\n                        if (link && object) {\n                            if (parts[1] === 'secure') {\n                                link = link.replace('%' + placeholder + '%', object.native[parts[1]] ? 'https' : 'http');\n                            } else {\n                                if (link.indexOf('%' + placeholder + '%') === -1) {\n                                    link = link.replace('%native_' + placeholder + '%', object.native[parts[1]]);\n                                } else {\n                                    link = link.replace('%' + placeholder + '%', object.native[parts[1]]);\n                                }\n                            }\n                        } else {\n                            console.log('Cannot get link ' + parts[1]);\n                            link = link.replace('%' + placeholder + '%', '');\n                        }\n\n                    } catch(error) {\n                        console.log(error);\n                    }\n\n                    link = Utils.replaceLink(link, adapter, instance, context);\n                }\n            }\n        }\n\n        return link;\n    }\n\n}\n\nexport default Utils;","import React from 'react';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport PropTypes from 'prop-types';\n\nimport clsx from 'clsx';\n\nimport Badge from '@material-ui/core/Badge';\nimport Grid from '@material-ui/core/Grid';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport Utils from '../Utils';\n\nconst styles = theme => ({\n    selected: {\n        background: theme.palette.secondary.main,\n        color: Utils.invertColor(theme.palette.secondary.main, true),\n        '&:hover': {\n            color: theme.palette.text.primary\n        }\n    },\n    compactBadge: {\n        paddingLeft: 12,\n    },\n    noWrap: {\n        flexWrap: 'nowrap',\n        height: 40\n    }\n});\n\nclass DrawerItem extends React.Component {\n\n    render() {\n\n        const { classes } = this.props;\n\n        return (\n            <ListItem\n                button\n                className={ clsx({ [classes.selected]: this.props.selected }, this.props.compact && classes.compactBadge) }\n                onClick={ this.props.onClick }\n            >\n                <Grid\n                    container\n                    spacing={1}\n                    alignItems=\"center\"\n                    className={ classes.noWrap }\n                >\n                    <Grid item>\n                        <ListItemIcon style={{ minWidth: 0 }}>\n                            <Badge\n                                badgeContent={ this.props.badgeContent || 0 }\n                                color={ this.props.badgeColor || 'primary' }\n                            >\n                                { this.props.icon }\n                            </Badge>\n                        </ListItemIcon>\n                    </Grid>\n                    { !this.props.compact &&\n                        <Grid item>\n                            <ListItemText primary={this.props.text}/>\n                        </Grid>\n                    }\n                </Grid>\n            </ListItem>\n        )\n    }\n}\n\nDrawerItem.propTypes = {\n    icon: PropTypes.object,\n    onClick: PropTypes.func,\n    selected: PropTypes.bool,\n    compact: PropTypes.bool,\n    text: PropTypes.string,\n    badgeContent: PropTypes.number,\n    badgeColor: PropTypes.string\n};\n\nexport default withStyles(styles)(DrawerItem);","import React from 'react';\n\nimport withWidth from '@material-ui/core/withWidth';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\n\nimport { Drawer as MaterialDrawer } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport DrawerItem from './DrawerItem';\n\nimport I18n from '@iobroker/adapter-react/i18n';\n\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport { FaSignOutAlt as LogoutIcon } from 'react-icons/fa';\nimport AppsIcon from '@material-ui/icons/Apps';\nimport InfoIcon from '@material-ui/icons/Info';\nimport StoreIcon from '@material-ui/icons/Store';\nimport SubtitlesIcon from '@material-ui/icons/Subtitles';\nimport ViewListIcon from '@material-ui/icons/ViewList';\nimport ArtTrackIcon from '@material-ui/icons/ArtTrack';\nimport DvrIcon from '@material-ui/icons/Dvr';\nimport ViewHeadlineIcon from '@material-ui/icons/ViewHeadline';\nimport SubscriptionsIcon from '@material-ui/icons/Subscriptions';\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\nimport CodeIcon from '@material-ui/icons/Code';\nimport AcUnitIcon from '@material-ui/icons/AcUnit';\nimport DeviceHubIcon from '@material-ui/icons/DeviceHub';\nimport PermContactCalendarIcon from '@material-ui/icons/PermContactCalendar';\nimport StorageIcon from '@material-ui/icons/Storage';\nimport FilesIcon from '@material-ui/icons/FileCopy';\nimport HelpIcon from '@material-ui/icons/Help';\n\nexport const DRAWER_FULL_WIDTH = 180;\nexport const DRAWER_COMPACT_WIDTH = 50;\n\nconst styles = theme => ({\n    root: {\n        flexShrink: 0,\n        transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.easeOut,\n            duration: theme.transitions.duration.enteringScreen,\n        })\n    },\n    rootFullWidth: {\n        width: DRAWER_FULL_WIDTH,\n    },\n    rootCompactWidth: {\n        width: DRAWER_COMPACT_WIDTH,\n    },\n    paper: {\n        width: 'inherit',\n        overflowX: 'hidden'\n    },\n    header: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: theme.spacing(0, 1),\n        ...theme.mixins.toolbar,\n        justifyContent: 'flex-end',\n    },\n    headerCompact: {\n        padding: 0,\n    },\n    headerLogout: {\n        justifyContent: 'space-between'\n    },\n    list: {\n        paddingTop: 0,\n    },\n    logout: {\n        color: theme.palette.primary.main\n    }\n});\n\nexport const STATES = {\n    opened: 0,\n    closed: 1,\n    compact: 2\n};\n\nconst tabsInfo = {\n    'tab-intro':            {order: 1,    icon: <AppsIcon />},\n    'tab-info':             {order: 5,    icon: <InfoIcon />,               host: true},\n    'tab-adapters':         {order: 10,   icon: <StoreIcon />,              host: true},\n    'tab-instances':        {order: 15,   icon: <SubtitlesIcon />,          host: true},\n    'tab-objects':          {order: 20,   icon: <ViewListIcon />},\n    'tab-enums':            {order: 25,   icon: <ArtTrackIcon />},\n    'tab-devices':          {order: 27,   icon: <DvrIcon />,                host: true},\n    'tab-logs':             {order: 30,   icon: <ViewHeadlineIcon />,       host: true},\n    'tab-scenes':           {order: 35,   icon: <SubscriptionsIcon />},\n    'tab-events':           {order: 40,   icon: <FlashOnIcon />},\n    'tab-users':            {order: 45,   icon: <PersonOutlineIcon />},\n    'tab-javascript':       {order: 50,   icon: <CodeIcon />},\n    'tab-text2command-0':   {order: 55,   icon: <AcUnitIcon />, instance: 0},\n    'tab-text2command-1':   {order: 56,   icon: <AcUnitIcon />, instance: 1},\n    'tab-text2command-2':   {order: 57,   icon: <AcUnitIcon />, instance: 2},\n    'tab-node-red-0':       {order: 60,   icon: <DeviceHubIcon />, instance: 0},\n    'tab-node-red-1':       {order: 61,   icon: <DeviceHubIcon />, instance: 1},\n    'tab-node-red-2':       {order: 62,   icon: <DeviceHubIcon />, instance: 2},\n    'tab-fullcalendar-0':   {order: 65,   icon: <PermContactCalendarIcon />, instance: 0},\n    'tab-fullcalendar-1':   {order: 66,   icon: <PermContactCalendarIcon />, instance: 1},\n    'tab-fullcalendar-2':   {order: 67,   icon: <PermContactCalendarIcon />, instance: 2},\n    'tab-hosts':            {order: 100,  icon: <StorageIcon />},\n    'tab-files':            {order: 110,  icon: <FilesIcon />},\n};\n\nclass Drawer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            logErrors: 0,\n            tabs: []\n        };\n\n        this.logErrorHandlerBound = this.logErrorHandler.bind(this);\n        this.instanceChangedHandlerBound = this.instanceChangedHandler.bind(this);\n\n        this.instances = null;\n\n        this.getTabs();\n    }\n\n    instanceChangedHandler(changes) {\n        this.getTabs();\n    }\n\n    componentDidMount() {\n        this.props.logsWorker.registerErrorCountHandler(this.logErrorHandlerBound);\n        this.props.instancesWorker.registerHandler(this.instanceChangedHandlerBound);\n    }\n\n    componentWillUnmount () {\n        this.props.logsWorker.unregisterErrorCountHandler(this.logErrorHandlerBound);\n        this.props.instancesWorker.unregisterHandler(this.instanceChangedHandlerBound);\n    }\n\n    logErrorHandler(logErrors) {\n        if (logErrors !== this.state.logErrors) {\n            this.setState({\n                logErrors\n            });\n        }\n    }\n\n    getTabs() {\n        return this.props.instancesWorker.getInstances()\n            .then(instances => {\n                let dynamicTabs = [];\n\n                if (instances) {\n                    Object.keys(instances).forEach(id => {\n                        const instance = instances[id];\n\n                        if (!instance.common || !instance.common.adminTab) {\n                            return;\n                        }\n\n                        let tab = 'tab-' + id.replace('system.adapter.', '').replace(/\\.\\d+$/, '');\n\n                        const singleton = instance && instance.common && instance.common.adminTab && instance.common.adminTab.singleton;\n                        let instNum;\n                        if (!singleton) {\n                            const m = id.match(/\\.(\\d+)$/);\n                            if (m) {\n                                instNum = parseInt(m[1], 10);\n                                tab += '-' + instNum;\n                            }\n                        }\n\n                        if (dynamicTabs.find(item => item.name === tab)) {\n                            return;\n                        }\n\n                        let title;\n\n                        if (instance.common.adminTab.name) {\n                            if (typeof instance.common.adminTab.name === 'object') {\n                                if (instance.common.adminTab.name[this.props.lang]) {\n                                    title = instance.common.adminTab.name[this.props.lang];\n                                } else if (instance.common.adminTab.name.en) {\n                                    title = this.props.t(instance.common.adminTab.name.en);\n                                } else {\n                                    title = this.props.t(instance.common.name);\n                                }\n                            } else {\n                                title = this.props.t(instance.common.adminTab.name);\n                            }\n                        } else {\n                            title = this.props.t(instance.common.name);\n                        }\n\n\n                        let obj;\n                        if (tabsInfo[tab]) {\n                            obj = Object.assign({name: tab}, tabsInfo[tab]);\n                        } else {\n                            obj = {name: tab, order: 200, icon: <HelpIcon />};\n                        }\n\n                        obj.title = title;\n\n                        if (!singleton) {\n                            obj.instance = instance;\n                            if (instNum) {\n                                obj.title += ' ' + instNum;\n                            }\n                        }\n                        dynamicTabs.push(obj);\n                    });\n                }\n\n                const READY_TO_USE = ['tab-intro', 'tab-adapters', 'tab-instances', 'tab-logs', 'tab-files', 'tab-objects'];\n                // DEV ONLY\n                let tabs = Object.keys(tabsInfo).filter(name => READY_TO_USE.includes(name));\n\n                tabs = tabs.map(name => {\n                    const obj = Object.assign({name}, tabsInfo[name]);\n                    obj.title = I18n.t(name.replace('tab-', '').replace('-0', '').replace(/-(\\d+)$/, ' $1').ucFirst());\n                    return obj;\n                });\n\n                // add dynamic tabs\n                tabs = tabs.concat(dynamicTabs);\n\n                // tabs ith order first, then by name\n                tabs.sort((a, b) => {\n                    if (a.order && b.order) {\n                        return a.order > b.order ? 1 : (a.order < b.order ? -1 : 0);\n                    } else if (a.order) {\n                        return 1;\n                    } else if (b.order) {\n                        return -1;\n                    } else {\n                        return a.name > b.name ? 1 : (a.name < b.name ? -1 : 0);\n                    }\n                });\n\n                // Convert\n                this.setState({\n                    tabs,\n                });\n            });\n    }\n\n    getHeader() {\n\n        const { classes } = this.props;\n\n        return (\n            <div className={ clsx(\n                classes.header,\n                this.props.state === STATES.opened && this.props.isSecure && classes.headerLogout,\n                this.props.state !== STATES.opened && classes.headerCompact\n            ) }>\n                { this.props.isSecure &&\n                    <IconButton title={ this.props.logoutTitle } onClick={ this.props.onLogout }>\n                        <LogoutIcon className={ classes.logout }/>\n                    </IconButton>\n                }\n                <IconButton onClick={ () => {\n                    if (this.props.state === STATES.compact) {\n                        this.props.onStateChange(STATES.closed);\n                    } else {\n                        this.props.onStateChange(STATES.compact)\n                    }\n                } }>\n                    <ChevronLeftIcon />\n                </IconButton>\n            </div>\n        );\n    }\n\n    getNavigationItems() {\n        const items = [];\n\n        this.state.tabs.forEach(tab => {\n            items.push(\n                <DrawerItem\n                    key={ tab.name }\n                    compact={ this.props.state !== STATES.opened }\n                    onClick={ () => this.props.handleNavigation(tab.name) }\n                    icon={ tab.icon }\n                    text={ tab.title }\n                    selected={ this.props.currentTab === tab.name }\n                    badgeContent={ tab.name === 'tab-logs' ? this.props.logErrors : 0 }\n                    badgeColor={ tab.name === 'tab-logs' ? 'error' : '' }\n                />\n            );\n        });\n\n        return items;\n    }\n\n    render() {\n\n        const { classes } = this.props;\n\n        if (this.props.width === 'xs' || this.props.width === 'sm') {\n            return (\n                <SwipeableDrawer\n                    className={ classes.root }\n                    anchor=\"left\"\n                    open={ this.props.state !== STATES.closed }\n                    onClose={ () => this.props.onStateChange(STATES.closed) }\n                    onOpen={ () => this.props.onStateChange(STATES.opened) }\n                    classes={{ paper: classes.paper }}\n                >\n                    { this.getHeader() }\n                    <List>\n                        { this.getNavigationItems() }\n                    </List>\n                </SwipeableDrawer>\n            );\n        } else {\n            return (\n                <MaterialDrawer\n                    className={ clsx(classes.root, this.props.state !== STATES.opened ? classes.rootCompactWidth : classes.rootFullWidth) }\n                    variant=\"persistent\"\n                    anchor=\"left\"\n                    open={ this.props.state !== STATES.closed }\n                    classes={{ paper: classes.paper }}\n                >\n                    { this.getHeader() }\n                    <List className={ classes.list }>\n                        { this.getNavigationItems() }\n                    </List>\n                </MaterialDrawer>\n            );\n        }\n    }\n}\n\nDrawer.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    state: PropTypes.number,\n    onStateChange: PropTypes.func,\n    onLogout: PropTypes.func,\n    logoutTitle: PropTypes.string,\n    isSecure: PropTypes.bool,\n    currentTab: PropTypes.string,\n    socket: PropTypes.object,\n    currentHost: PropTypes.string,\n    ready: PropTypes.bool,\n    expertMode: PropTypes.bool,\n    handleNavigation: PropTypes.func,\n    logsWorker: PropTypes.object,\n    instancesWorker: PropTypes.object,\n};\n\nexport default withWidth()(withStyles(styles)(Drawer));","import React from 'react';\n\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst offset = 187;\n\nconst styles = {\n    root: {\n        left: 0,\n        top: 0,\n        width: '100%',\n        height: '100%',\n        position: 'fixed',\n        background: 'rgba(0, 0, 0, .3)',\n        zIndex: 20000\n    },\n    connecting: {\n        left: '40%',\n        top: '40%',\n        width: '20%',\n        height: '20%',\n        position: 'absolute'\n    },\n    spinner: {\n        animation: '$rotator 1.4s linear infinite'\n    },\n    path: {\n        strokeDasharray: 187,\n        strokeDashoffset: 0,\n        transformOrigin: 'center',\n        animation: '$dash 1.4s ease-in-out infinite, $colors 5.6s ease-in-out infinite'\n    },\n    '@keyframes colors': {\n        '0%': {\n            stroke: '#4285F4'\n        },\n        '25%': {\n            stroke: '#DE3E35'\n        },\n        '50%': {\n            stroke: '#F7C223'\n        },\n        '75%': {\n            stroke: '#1B9A59'\n        },\n        '100%': {\n            stroke: '#4285F4'\n        }\n    },\n    '@keyframes dash': {\n        '0%': {\n            strokeDashoffset: offset\n        },\n        '50%': {\n            strokeDashoffset: offset / 4,\n            transform: 'rotate(135deg)'\n        },\n        '100%': {\n            strokeDashoffset: offset,\n            transform: 'rotate(450deg)'\n        }\n    },\n    '@keyframes rotator': {\n        '0%': {\n            transform: 'rotate(0deg)'\n        },\n        '100%': {\n            transform: 'rotate(270deg)'\n        }\n    }\n};\n\nfunction Connecting(props) {\n\n    const { classes } = props;\n\n    return (\n        <div className={ classes.root }>\n            <div className={ classes.connecting }>\n                <svg className={ classes.spinner } width=\"100%\" height=\"100%\" viewBox=\"0 0 66 66\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <circle className={ classes.path } fill=\"none\" strokeWidth=\"6\" strokeLinecap=\"round\" cx=\"33\" cy=\"33\" r=\"30\"/>\n                </svg>\n            </div>\n        </div>\n    );\n}\n\nexport default withStyles(styles)(Connecting);","import Utils from '../Utils';\n\nclass LogsWorker {\n    constructor(socket, maxLogs) {\n        this.socket = socket;\n        this.handlers = [];\n        this.promise = new Promise(resolve => this.resolve = resolve);\n\n        this.logHandlerBound = this.logHandler.bind(this);\n        this.connectionHandlerBound = this.connectionHandler.bind(this);\n        this.errorCountHandlers = [];\n        socket.registerLogHandler(this.logHandlerBound);\n        socket.registerConnectionHandler(this.connectionHandlerBound);\n        this.countErrors = true;\n        this.errors = 0;\n        this.currentHost = '';\n        this.connected = this.socket.isConnected();\n        this.maxLogs = maxLogs || 1000;\n        this.logs = null;\n    }\n\n    setCurrentHost(currentHost) {\n        if (currentHost !== this.currentHost) {\n            this.currentHost = currentHost;\n            this.getLogs(true);\n        }\n    }\n\n    enableCountErrors(isEnabled) {\n        if (this.countErrors !== isEnabled) {\n            this.countErrors = isEnabled;\n            if (!this.countErrors) {\n                const errors = this.errors;\n                this.error = 0;\n                if (errors) {\n                    this.errorCountHandlers.forEach(handler => handler && handler(errors));\n                }\n            }\n        }\n    }\n    \n    logHandler(line) {\n        const errors = this.errors;\n        const obj = this._processLine(line);\n        obj && this.handlers.forEach(handler => handler && handler([obj]));\n        if (errors !== this.errors) {\n            this.errorCountHandlers.forEach(handler => handler && handler(this.errors));\n        }\n    }\n\n    connectionHandler(isConnected) {\n        if (isConnected && !this.connected) {\n            this.connected = true;\n            this.getLogs(true);\n        } else if (!isConnected && this.connected) {\n            this.connected = false;\n        }\n    }\n    \n    registerHandler(cb) {\n        if (!this.handlers.includes(cb)) {\n            this.handlers.push(cb);\n        }\n    }\n\n    unregisterHandler(cb) {\n        const pos = this.handlers.indexOf(cb);\n\n        if (pos !== -1) {\n            this.handlers.splice(pos, 1);\n        }\n    }\n\n    registerErrorCountHandler(cb) {\n        if (!this.errorCountHandlers.includes(cb)) {\n            this.errorCountHandlers.push(cb);\n        }\n    }\n\n    unregisterErrorCountHandler(cb) {\n        const pos = this.errorCountHandlers.indexOf(cb);\n\n        if (pos !== -1) {\n            this.errorCountHandlers.splice(pos, 1);\n        }\n    }\n\n    _processLine(line, lastKey) {\n        // do not update logs before the first logs from host received\n        if (!this.logs) {\n            return;\n        }\n        /* const line = {\n            \"severity\": \"error\",\n            \"ts\": 1588162801514,\n            \"message\": \"host.DESKTOP-PLLTPO1 Invalid request getLogs. \\\"callback\\\" or \\\"from\\\" is null\",\n            \"from\": \"host.DESKTOP-PLLTPO1\",\n            \"_id\": 48358425\n        };*/\n\n        let obj;\n        let isNew = true;\n        const length = this.logs.length;\n        lastKey = lastKey || (length && this.logs[this.logs.length - 1].key) || 0;\n\n        if (typeof line === 'object') {\n            if (lastKey && lastKey <= line.ts) {\n                line.key = lastKey + 1;\n            } else {\n                line.key = line.ts;\n            }\n\n            obj = line;\n        } else {\n            const time = line.match(/^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}\\.\\d{3}/);\n\n            if (time && time.length > 0) {\n                let ts = new Date(time[0]).getTime();\n                let key = ts;\n\n                if (lastKey && lastKey <= ts) {\n                    key = lastKey + 1;\n                }\n\n                // detect from\n                const from = line.match(/: (\\D+\\.\\d+ \\(|host\\..+? )/);\n\n                obj = {\n                    key,\n                    from:  from ? from[0].replace(/[ :(]/g, '') : '',\n                    message: line.split(/\\[\\d+m: /)[1],\n                    severity: line.match(/\\d+m(silly|debug|info|warn|error)/)[0].replace(/[\\dm]/g, ''),\n                    ts\n                };\n            } else {\n                isNew = false;\n                // if no time found\n                if (length) {\n                    obj = this.logs[length - 1];\n                    obj.message += line;\n                }\n            }\n        }\n\n        if (isNew) {\n            // if new message time is less than last message in log\n            if (length && this.logs[length - 1].key > obj.key) {\n                let i;\n                // find place\n                for (i = length - 1; i >= 0; i--) {\n                    if (this.logs[i].key < obj.key) {\n                        break;\n                    }\n                }\n                if (i === -1) {\n                    this.logs.unshift(obj);\n                } else {\n                    this.logs.splice(i + 1, 0, obj);\n                }\n            } else {\n                this.logs.push(obj);\n            }\n\n            if (length + 1 === this.maxLogs) {\n                this.logs.shift();\n            }\n\n            if (isNew && obj.severity === 'error' && obj.countErrors) {\n                this.errors++;\n            }\n        }\n\n        return obj;\n    }\n\n    getLogs(update) {\n        if (!this.currentHost) {\n            this.promise = this.promise ||\n                new Promise(resolve => this.resolve = resolve);\n\n            return this.promise;\n        }\n\n        if (!update && this.logs) {\n            return Promise.resolve({logs: this.logs, logSize: this.logSize});\n        }\n\n        if (update && this.logs) {\n            this.promise = null;\n        }\n\n        this.promise = this.promise ||\n            new Promise(resolve => this.resolve = resolve);\n\n        this.errors = 0;\n\n        this.socket.getLogs(this.currentHost, 200)\n            .then(lines => {\n                const logSize = lines ? Utils.formatBytes(lines.pop()) : -1;\n\n                this.logs = [];\n                let lastKey;\n                lines.sort((a, b) => a.ts > b.ts ? 1 : (a.ts < b.ts ? -1 : 0));\n\n                lines.forEach(line => {\n                    const obj = this._processLine(line, lastKey);\n                    lastKey = obj.key;\n                });\n\n                this.logSize = logSize;\n\n                // inform subscribes about each line\n                this.handlers.forEach(cb => cb && cb(this.logs));\n\n                this.errors && this.errorCountHandlers.forEach(handler => handler && handler(this.errors));\n\n                this.resolve({logs: this.logs, logSize});\n            });\n\n        return this.promise;\n    }\n\n    clearLines() {\n        this.logs    = [];\n        this.logSize = 0;\n\n        if (this.errors) {\n            const errors = this.errors;\n            this.errors = 0;\n            this.errorCountHandlers.forEach(handler => handler && handler(errors));\n        }\n    }\n}\n\nexport default LogsWorker;\n","class InstancesWorker {\n    constructor(socket) {\n        this.socket = socket;\n        this.handlers = [];\n        this.resolve = null;\n        this.promise = new Promise(resolve => this.resolve = resolve);\n\n        this.objectChangeHandlerBound = this.objectChangeHandler.bind(this);\n        this.connectionHandlerBound   = this.connectionHandler.bind(this);\n        socket.registerConnectionHandler(this.connectionHandlerBound);\n        socket.subscribeObject('system.adapter.*', this.objectChangeHandlerBound);\n        this.connected = this.socket.isConnected();\n\n        // read instances\n        this.connected && this._readInstances();\n\n        this.objects = null;\n    }\n\n    objectChangeHandler(id, obj) {\n        // if instance\n        if (id.match(/^system\\.adapter\\.[^.]+\\.\\d+$/)) {\n            let type;\n            let oldObj;\n            if (obj) {\n                if (this.objects[id]) {\n                    oldObj = this.objects[id];\n                    if (JSON.stringify(this.objects[id]) !== JSON.stringify(obj)) {\n                        type = 'changed';\n                        this.objects[id] = obj;\n                    } else {\n                        // no changes\n                        return;\n                    }\n                } else {\n                    type = 'new';\n                    this.objects[id] = obj;\n                }\n            } else {\n                if (this.objects[id]) {\n                    oldObj = this.objects[id];\n                    type = 'deleted';\n                    delete this.objects[id];\n                } else {\n                    // deleted unknown instance\n                    return;\n                }\n            }\n\n            this.handlers.forEach(cb => cb([{id, obj, type, oldObj}]));\n        }\n    }\n\n    // be careful with this object. Do not change them.\n    getInstances(update) {\n        if (!this.objects) {\n            this.promise = this.promise ||\n                new Promise(resolve => this.resolve = resolve);\n\n            return this.promise;\n        }\n\n        if (!update && this.objects) {\n            return Promise.resolve(this.objects);\n        }\n\n        if (update && this.objects) {\n            this.resolve = null;\n            this.promise = null;\n        }\n\n        this.promise = this.promise ||\n            new Promise(resolve => this.resolve = resolve);\n\n        return this.socket.getAdapterInstances(update)\n            .then(objects => {\n                this.objects = {};\n                objects.forEach(obj => this.objects[obj._id] = obj);\n                this.resolve(this.objects);\n                this.resolve = null;\n            });\n    }\n\n    connectionHandler(isConnected) {\n        if (isConnected && !this.connected) {\n            this.connected = true;\n            this._readInstances(true);\n        } else if (!isConnected && this.connected) {\n            this.connected = false;\n        }\n    }\n    \n    registerHandler(cb) {\n        this.handlers.includes(cb) && this.handlers.push(cb);\n    }\n\n    unregisterHandler(cb) {\n        const pos = this.handlers.indexOf(cb);\n        pos !== -1 && this.handlers.splice(pos, 1);\n    }\n\n    _readInstances(update) {\n        return this.socket.getAdapterInstances(update)\n            .then(objects => {\n                this.objects = {};\n                objects.forEach(obj => this.objects[obj._id] = obj);\n                this.handlers.forEach(cb => cb(objects.map(obj => ({id: obj._id, obj, type: 'new'}))));\n            });\n    }\n}\n\nexport default InstancesWorker;\n","class HostsWorker {\n    constructor(socket) {\n        this.socket = socket;\n        this.handlers = [];\n        this.objectChangeHandlerBound = this.objectChangeHandler.bind(this);\n        this.connectionHandlerBound   = this.connectionHandler.bind(this);\n        socket.registerConnectionHandler(this.connectionHandlerBound);\n        socket.subscribeObject('system.host.*', this.objectChangeHandlerBound);\n        this.connected = this.socket.isConnected();\n        this.objects = {};\n    }\n\n    objectChangeHandler(id, obj) {\n        // if instance\n        if (id.match(/^system\\.host\\.[^.]+\\.\\d+$/)) {\n            let type;\n            let oldObj;\n            if (obj) {\n                if (this.objects[id]) {\n                    if (JSON.stringify(this.objects[id]) !== JSON.stringify(obj)) {\n                        type = 'changed';\n                        this.objects[id] = obj;\n                    } else {\n                        // no changes\n                        return;\n                    }\n                } else {\n                    type = 'new';\n                    this.objects[id] = obj;\n                }\n            } else {\n                if (this.objects[id]) {\n                    type = 'deleted';\n                    oldObj = this.objects[id];\n                    delete this.objects[id];\n                } else {\n                    // deleted unknown instance\n                    return;\n                }\n            }\n            this.handlers.forEach(cb => cb(id, obj, type, oldObj));\n        }\n    }\n\n    getHosts() {\n        return JSON.parse(JSON.stringify(this.objects));\n    }\n\n    connectionHandler(isConnected) {\n        if (isConnected && !this.connected) {\n            this.connected = true;\n            this._readHosts(true);\n        } else if (!isConnected && this.connected) {\n            this.connected = false;\n        }\n    }\n    \n    registerHandler(cb) {\n        this.handlers.includes(cb) && this.handlers.push(cb);\n    }\n\n    unregisterHandler(cb) {\n        const pos = this.handlers.indexOf(cb);\n        pos !== -1 && this.handlers.splice(pos, 1);\n    }\n\n    forceUpdate() {\n        return this._readHosts(true);\n    }\n\n    _readHosts(update) {\n        return this.socket.getHosts(update)\n            .then(objects => {\n                this.objects = {};\n                objects.forEach(obj => this.objects[obj._id] = obj);\n                this.handlers.forEach(cb => cb(objects));\n            });\n    }\n}\n\nexport default HostsWorker;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Container from '@material-ui/core/Container';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Grid from '@material-ui/core/Grid';\nimport Link from '@material-ui/core/Link';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport Alert from '@material-ui/lab/Alert';\n\nfunction Copyright() {\n    return (\n        <Typography\n            variant=\"body2\"\n            color=\"textSecondary\"\n            align=\"center\"\n        >\n            { (window.loginMotto || 'Discover awesome.') + ' ' }\n            <Link\n                color=\"inherit\"\n                href=\"https://www.iobroker.net/\"\n                rel=\"noreferrer\"\n                target=\"_blank\"\n            >\n                ioBroker\n            </Link>\n        </Typography>\n    );\n}\n\nconst useStyles = makeStyles(theme => ({\n    root:{\n        padding: 0,\n        marginTop: theme.spacing(8)\n    },\n    paper: {\n        background: theme.palette.background.paper + (theme.palette.background.paper.length < 7 ? 'd' : 'dd'),\n        padding: theme.spacing(3)\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: '#fff',\n        width: 100,\n        height: 100,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n    alert: {\n        marginTop: theme.spacing(2)\n    }\n}));\n\nexport default function Login(props) {\n\n    const classes = useStyles();\n\n    const action = `${window.location.port === '3000' ? window.location.protocol + '//' + window.location.hostname + ':8081' : ''}/login?${window.location.port === '3000' ? 'dev&' : ''}href=${window.location.hash}`;\n\n    if (window.login !== 'true') {\n        debugger;\n        window.location = `${window.location.protocol}//${window.location.host}${window.location.pathname}`;\n    }\n    \n    return (\n        <Container component=\"main\" maxWidth=\"xs\" className={ classes.root }>\n            <Paper className={ classes.paper }>\n                <Grid\n                    container\n                    direction=\"column\"\n                    alignItems=\"center\"  \n                >\n                    { window.loginHideLogo && window.loginHideLogo === 'false' &&\n                        <Avatar className={ classes.avatar } src=\"img/logo.png\" />\n                    }\n                    <Typography component=\"h1\" variant=\"h5\">\n                        { props.t('loginTitle') }\n                    </Typography>\n                    { window.location.search.indexOf('error') !== -1 &&\n                        <Alert\n                            severity=\"error\"\n                            className={ classes.alert }\n                        >\n                            { props.t('wrongPassword') }\n                        </Alert>\n                    }\n                    <form\n                        className={ classes.form }\n                        action={ action }\n                        method=\"post\"\n                    >\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            id=\"username\"\n                            label={ props.t('enterLogin') }\n                            name=\"username\"\n                            autoComplete=\"username\"\n                            autoFocus\n                        />\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            name=\"password\"\n                            label={ props.t('enterPassword') }\n                            type=\"password\"\n                            id=\"password\"\n                            autoComplete=\"current-password\"\n                        />\n                        <FormControlLabel\n                            control={ <Checkbox id=\"stayloggedin\" name=\"stayloggedin\" value=\"on\" color=\"primary\" /> }\n                            label={ props.t('Stay signed in') }\n                        />\n                        <input id=\"origin\" type=\"hidden\" name=\"origin\" value={ window.location.search.replace('&error', '') }/>\n                        <Button\n                            type=\"submit\"\n                            fullWidth\n                            variant=\"contained\"\n                            color=\"primary\"\n                            className={ classes.submit }\n                        >\n                            { props.t('login') }\n                        </Button>\n                    </form>\n                </Grid>\n                <Box mt={ 8 }>\n                    <Copyright />\n                </Box>\n            </Paper>\n        </Container>\n    );\n}\n","import React from 'react';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport PropTypes from 'prop-types';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from '@material-ui/core/FormControl';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Typography from '@material-ui/core/Typography';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst styles = theme => ({\n    formControl: {\n        marginTop: theme.spacing(3)\n    },\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500],\n    },\n    paper: {\n        //minWidth: 600\n    },\n    typography: {\n        paddingRight: 30\n    }\n});\n\nclass AddInstance extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.t = props.t;\n    }\n\n    getHosts() {\n        return this.props.hosts.map(host => {\n            return <MenuItem value={ host.common.name } key={ host._id }>{ host.common.name }</MenuItem>\n        });\n    }\n\n    getAvailableInstances() {\n\n        const result = [];\n        const instanceNumber = {};\n\n        if (!this.props.instances) {\n            return null;\n        }\n\n        for(let i = 0; i < this.props.instances.length; i++) {\n\n            const instance = this.props.instances[i];\n\n            if(instance.common && instance.common.name === this.props.adapter) {\n                const id = instance._id.substring(instance._id.lastIndexOf('.') + 1);\n\n                instanceNumber[id] = true;\n            }\n        }\n\n        result.push(<MenuItem value=\"auto\" key=\"auto\">{ this.t('auto') }</MenuItem>);\n\n        for(let i = 0; i <= 10; i++) {\n            if(!instanceNumber[i]) {\n                result.push(<MenuItem value={ `${i}` } key={ i }>{ i }</MenuItem>);\n            }\n        }\n\n        return result;\n    }\n\n    render() {\n\n        const { classes } = this.props;\n\n        return (\n            <Dialog\n                onClose={ this.props.onClose }\n                open={ this.props.open }\n                classes={{ paper: classes.paper }}\n            >\n                <DialogTitle disableTypography={ true }>\n                    <Typography component=\"h2\" variant=\"h6\" classes={{ root: classes.typography }}>\n                        { this.t('You are going to add new instance: ') } { this.props.adapter }\n                        <IconButton className={ classes.closeButton } onClick={ this.props.onClose }>\n                            <CloseIcon />\n                        </IconButton>\n                    </Typography>\n                </DialogTitle>\n                <DialogContent dividers>\n                    <Grid\n                        container\n                        direction=\"column\"\n                    >\n                        <FormControl\n                            disabled={ this.props.hosts && this.props.hosts.length <= 1 ? true : false }\n                        >\n                            <InputLabel id=\"host-label\">{ this.t('Host') }</InputLabel>\n                            <Select\n                                labelId=\"host-label\"\n                                value={ this.props.currentHost }\n                                onChange={ this.props.onHostChange }\n                            >\n                                { this.getHosts() }\n                            </Select>\n                        </FormControl>\n                        <FormControl\n                            className={ classes.formControl }\n                        >\n                            <InputLabel id=\"instance-label\">{ this.t('Instance') }</InputLabel>\n                            <Select\n                                labelId=\"instance-label\"\n                                value={ this.props.currentInstance }\n                                onChange={ this.props.onInstanceChange }\n                            >\n                                { this.getAvailableInstances() }\n                            </Select>\n                        </FormControl>\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        autoFocus\n                        onClick={ () => {\n                            this.props.onClick();\n                            this.props.onClose();\n                        }}\n                        color=\"primary\">\n                        { this.t('Add') }\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nAddInstance.propTypes = {\n    open: PropTypes.bool.isRequired,\n    adapter: PropTypes.string.isRequired,\n    hosts: PropTypes.array.isRequired,\n    instances: PropTypes.array.isRequired,\n    currentHost: PropTypes.string.isRequired,\n    currentInstance: PropTypes.string.isRequired,\n    t: PropTypes.func.isRequired,\n    onClick: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onHostChange: PropTypes.func.isRequired,\n    onInstanceChange: PropTypes.func.isRequired\n}\n\nexport default withStyles(styles)(AddInstance);","import React from 'react';\n\nimport { withStyles } from '@material-ui/core/styles';\n//import { MdContactPhone } from 'react-icons/md';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport AddIcon from '@material-ui/icons/Add';\nimport AddToPhotosIcon from '@material-ui/icons/AddToPhotos';\nimport BuildIcon from '@material-ui/icons/Build';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport HelpIcon from '@material-ui/icons/Help';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nimport { FaGithub as GithubIcon } from 'react-icons/fa';\n\nimport { blue } from '@material-ui/core/colors';\nimport { green } from '@material-ui/core/colors';\n\nimport AddInstance from '../dialogs/AddInstance';\n\nconst styles = theme => ({\n    root: {\n        margin: theme.spacing(1)\n    },\n    smallAvatar: {\n        width: theme.spacing(3),\n        height: theme.spacing(3)\n    },\n    table: {\n        tableLayout: 'fixed',\n        minWidth: 960,\n        '& td': {\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis'\n        }\n    },\n    hidden: {\n        visibility: 'hidden'\n    },\n    name: {\n        flexWrap: 'nowrap',\n        width: 300\n    },\n    description: {\n        width: 600\n    },\n    keywords: {\n        \n    },\n    installed: {\n        width: 120\n    },\n    available: {\n        width: 100\n    },\n    license: {\n        width: 150\n    },\n    install:{\n        width: 220\n    },\n    green: {\n        color: green[500]\n    },\n    blue: {\n        color: blue[700]\n    },\n    category: {\n        backgroundColor: theme.palette.background.default,\n    },\n    grow: {\n        flexGrow: 1\n    }\n});\n\nclass Adapters extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            lastUpdate: 0,\n            repository: {},\n            installed: {},\n            instances: [],\n            categories: [],\n            hostData: {},\n            hostOs: '',\n            nodeJsVersion: '',\n            init: false,\n            addInstanceDialog: false,\n            addInstanceError: false,\n            addInstanceAdapter: '',\n            addInstanceId: 'auto',\n            addInstanceHost: props.currentHostName\n        };\n\n        this.t = props.t;\n    }\n\n    componentDidMount() {\n        if (this.props.ready) {\n            this.getAdaptersInfo(true);\n        }\n    }\n\n    componentDidUpdate() {\n        if (!this.state.init && this.props.ready) {\n            this.getAdaptersInfo(true);\n        }\n    }\n\n    async getAdaptersInfo(update, updateRepo = false) {\n        if (!this.props.currentHost) {\n            return;\n        }\n\n        if (update) {\n            // Do not update too often\n            if (new Date().getTime() - this.state.lastUpdate > 1000) {\n\n                const currentHost = this.props.currentHost;\n\n                try {\n                    const hostData = await this.props.socket.getHostInfo(currentHost);\n                    const nodeJsVersion = hostData['Node.js'].replace('v', '');\n                    const hostOs = hostData.os;\n        \n                    const repository = await this.props.socket.getRepository(currentHost, {repo: this.props.systemConfig.common.activeRepo, update: updateRepo});\n                    const installed = await this.props.socket.getInstalled(currentHost);\n                    const instances = await this.props.socket.getAdapterInstances();\n                    const categories = {};\n                    const categoriesSorted = [];\n\n                    Object.keys(installed).forEach(value => {\n                        \n                        const adapter = installed[value];\n\n                        if (!adapter.controller && value !== 'hosts') {\n                            if (!repository[value]) {\n                                repository[value] = adapter;\n                            }\n                        }\n                    });\n\n                    Object.keys(repository).forEach(value => {\n                        \n                        const adapter = repository[value];\n\n                        if (!adapter.controller) {\n\n                            const type = adapter.type;\n                            const installedInGroup = installed[value];\n\n                            if (!categories[type]) {\n                                categories[type] = {\n                                    name: type,\n                                    translation: this.t(type + '_group'),\n                                    expanded: false,\n                                    count: 1,\n                                    installed: installedInGroup ? 1 : 0\n                                };\n                            } else {\n                                categories[type].count++;\n                                if (installedInGroup) {\n                                    categories[type].installed++;\n                                }\n                            }\n                        }\n                    });\n\n                    Object.keys(instances).forEach(value => {\n\n                        const instance = instances[value];\n                        const name = instance.common.name;\n                        const enabled = instance.common.enabled;\n\n                        if (installed[name]) {\n                            if (installed[name].count) {\n                                installed[name].count++;\n                            } else {\n                                installed[name].count = 1;\n                            }\n\n                            if (enabled) {\n                                if (installed[name].enabled) {\n                                    installed[name].enabled++;\n                                } else {\n                                    installed[name].enabled = 1;\n                                }\n                            }\n                        }\n                    });\n\n                    Object.keys(categories).forEach(value => {\n                        categoriesSorted.push(categories[value]);\n                    });\n\n                    categoriesSorted.sort((a, b) => {\n\n                        const result = b.installed - a.installed;\n\n                        return result !== 0 ? result : a.translation < b.translation ? -1 :\n                            a.translation > b.translation ? 1 : 0;\n                    });\n\n                    this.setState({\n                        lastUpdate: Date.now(),\n                        hostData,\n                        hostOs,\n                        nodeJsVersion,\n                        repository,\n                        installed,\n                        instances,\n                        categories: categoriesSorted,\n                        init: true\n                    });\n                } catch(error) {\n                    console.error(error);\n                }\n            }\n        }\n    }\n\n    addInstance(adapter, instance) {\n\n        if (!instance && this.props.expertMode) {\n            this.setState({\n                addInstanceDialog: true,\n                addInstanceAdapter: adapter,\n                addInstanceHost: this.props.currentHostName\n            });\n        } else {\n            \n            if (instance) {\n\n                const cancel = false;\n\n                for(let i = 0; i < this.state.instances.length; i++) {\n\n                    const instance = this.state.instances[i];\n\n                    if (instance._id === `system.adapter.${adapter}.${instance}`) {\n\n                        cancel = true;\n\n                        break;\n                    }\n                }\n\n                if (cancel) {\n                    this.setState({\n                        addInstanceError: true\n                    });\n\n                    return;\n                }\n            }\n\n            this.props.executeCommand(`add ${adapter} ${instance ? instance + ' ' : ''}--host ${this.props.currentHostName}`);\n        }\n    }\n\n    upload(adapter) {\n        this.props.executeCommand('upload ' + adapter);\n    }\n\n    rebuild(adapter) {\n        this.props.executeCommand('rebuild ' + adapter) \n    }\n\n    closeAddInstanceDialog() {\n        this.setState({\n            addInstanceDialog: false\n        });\n    }\n\n    toggleCategory(category) {\n\n        const categories = this.state.categories;\n        categories[category].expanded = !categories[category].expanded;\n\n        this.setState({\n            categories\n        });\n    }\n\n    handleHostsChange(event) {\n        this.setState({\n            addInstanceHost: event.target.value\n        });\n    }\n\n    handleInstanceChange(event) {\n        this.setState({\n            addInstanceId: event.target.value\n        });\n    }\n\n    getRows() {\n        const rows = [];\n        const { classes } = this.props;\n\n        Object.keys(this.state.categories).forEach(value => {\n\n            const category = this.state.categories[value];\n            const categoryName = category.name;\n\n            rows.push(\n                <TableRow\n                    key={ categoryName }\n                    className={ classes.category }\n                >\n                    <TableCell>\n                        <Grid container spacing={ 1 } alignItems=\"center\" className={ classes.name }>\n                            <Grid item>\n                                <IconButton\n                                    size=\"small\"\n                                    onClick={ () => this.toggleCategory(value) }\n                                >\n                                    { category.expanded ? <ExpandMoreIcon /> : <ChevronRightIcon />}\n                                </IconButton>\n                            </Grid>\n                            <Grid item>\n                                { category.translation }\n                            </Grid>\n                        </Grid>\n                    </TableCell>\n                    <TableCell>\n                        <Typography component=\"span\" variant=\"body2\" className={ classes.green }>\n                            { category.installed }\n                        </Typography>\n                        { ` ${this.t('of')} ` }\n                        <Typography component=\"span\" variant=\"body2\" className={ classes.blue }>\n                            { category.count }\n                        </Typography>\n                        { ` ${this.t('Adapters from this Group installed')}` }\n                    </TableCell>\n                    <TableCell />\n                    <TableCell />\n                    <TableCell />\n                    <TableCell />\n                    <TableCell />\n                </TableRow>\n            );\n\n            if (category.expanded) {\n            \n                Object.keys(this.state.repository).forEach(value => {\n\n                    const adapter = this.state.repository[value];  \n\n                    if (!adapter.controller && adapter.type === categoryName) {\n\n                        const installed = this.state.installed[value];\n\n                        const title = (adapter.title.toString() || '').replace('ioBroker Visualisation - ', '');\n                        const desc = adapter.desc ? adapter.desc[this.props.lang] || adapter.desc['en'] : '';\n                        const image = installed ? installed.localIcon : adapter.extIcon;\n\n                        if (title instanceof Object || !desc) {\n                            console.log(adapter);\n                        }\n\n                        rows.push(\n                            <TableRow\n                                key={ value }\n                                hover\n                            >\n                                <TableCell>\n                                    <Grid container spacing={ 1 } alignItems=\"center\" className={ classes.name }>\n                                        <Grid item>\n                                            <Avatar\n                                                variant=\"square\"\n                                                alt={ title.toString() }\n                                                src={ image }\n                                                className={ classes.smallAvatar }\n                                            />\n                                        </Grid>\n                                        <Grid item>\n                                            { title.toString() }\n                                        </Grid>\n                                    </Grid>\n                                </TableCell>\n                                <TableCell>\n                                    { desc }\n                                </TableCell>\n                                <TableCell>\n                                    { adapter.keywords && adapter.keywords.join(' ') }\n                                </TableCell>\n                                <TableCell>\n                                    { installed &&\n                                        installed.version +\n                                        (installed.count ? ` (${installed.count}${installed.count !== installed.enabled ? '~' : ''})` : '')\n                                    }\n                                </TableCell>\n                                <TableCell>\n                                    { adapter.version }\n                                </TableCell>\n                                <TableCell>\n                                    { adapter.license }\n                                </TableCell>\n                                <TableCell>\n                                    <IconButton\n                                        size=\"small\"\n                                        onClick={ () => this.addInstance(value) }\n                                    >\n                                        <AddIcon />\n                                    </IconButton>\n                                    <IconButton size=\"small\">\n                                        <HelpIcon />\n                                    </IconButton>\n                                    { this.props.expertMode &&\n                                        <IconButton\n                                            size=\"small\"\n                                            className={ !installed ? classes.hidden : '' }\n                                            onClick={ () => this.upload(value) }\n                                        >\n                                            <PublishIcon />\n                                        </IconButton>\n                                    }\n                                    <IconButton size=\"small\" className={ !installed ? classes.hidden : '' }>\n                                        <DeleteForeverIcon />\n                                    </IconButton>\n                                    { this.props.expertMode &&\n                                        <IconButton size=\"small\" className={ !installed ? classes.hidden : '' }>\n                                            <AddToPhotosIcon />\n                                        </IconButton>\n                                    }\n                                    { this.props.expertMode &&\n                                        <IconButton\n                                            size=\"small\"\n                                            className={ !installed ? classes.hidden : '' }\n                                            onClick={ () => this.rebuild(value) }\n                                        >\n                                            <BuildIcon />\n                                        </IconButton>\n                                    }\n                                </TableCell>\n                            </TableRow>\n                        );\n                    }\n                });\n            }\n        });\n\n        return rows;\n    }\n\n    render() {\n\n        if (!this.state.init) {\n            return <LinearProgress />\n        }\n\n        const { classes } = this.props;\n\n        return (\n            <Paper className={ classes.root }>\n                <Grid\n                    container\n                    direction=\"column\"\n                    className={ classes.flexContainer }\n                >\n                    <Grid\n                        item\n                        container\n                        alignItems=\"center\"\n                    >\n                        <IconButton\n                            onClick={ () => this.getAdaptersInfo(true, true) }\n                        >\n                            <RefreshIcon />\n                        </IconButton>\n                        <IconButton>\n                            <GithubIcon />\n                        </IconButton>\n                        <div className={ classes.grow } />\n                        <TextField label={ this.t('Filter') } />\n                        <div className={ classes.grow } />\n                    </Grid>\n                    <TableContainer className={ classes.container }>\n                        <Table stickyHeader size=\"small\" className={ classes.table }>\n                            <TableHead>\n                                <TableRow>\n                                    <TableCell className={ classes.name }>\n                                        <Typography>{ this.t('Name') }</Typography>\n                                    </TableCell>\n                                    <TableCell className={ classes.description }>\n                                        <Typography>{ this.t('Description') }</Typography>\n                                    </TableCell>\n                                    <TableCell className={ classes.keywords }>\n                                        <Typography>{ this.t('Keywords') }</Typography>\n                                    </TableCell>\n                                    <TableCell className={ classes.installed }>\n                                        <Typography>{ this.t('Installed') }</Typography>\n                                    </TableCell>\n                                    <TableCell className={ classes.available }>\n                                        <Typography>{ this.t('Available') }</Typography>\n                                    </TableCell>\n                                    <TableCell className={ classes.license }>\n                                        <Typography>{ this.t('License') }</Typography>\n                                    </TableCell>\n                                    <TableCell className={ classes.install }>\n                                        <Typography>{ this.t('Install') }</Typography>\n                                    </TableCell>\n                                </TableRow>\n                            </TableHead>\n                            <TableBody>\n                                { this.getRows() }\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                </Grid>\n                { this.state.addInstanceDialog &&\n                    <AddInstance\n                        open={ this.state.addInstanceDialog }\n                        adapter={ this.state.addInstanceAdapter }\n                        hosts={ this.props.hosts }\n                        instances={ this.state.instances }\n                        currentHost={ this.state.addInstanceHost }\n                        currentInstance={ this.state.addInstanceId }\n                        t={ this.t }\n                        onClick={ () => this.addInstance(this.state.addInstanceAdapter, this.state.addInstanceId) }\n                        onClose={ () => this.closeAddInstanceDialog() }\n                        onHostChange={ event => this.handleHostsChange(event) }\n                        onInstanceChange={ event => this.handleInstanceChange(event) }\n                    />\n                }\n            </Paper>\n        );\n    }\n}\n\nexport default withStyles(styles)(Adapters);","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Paper from '@material-ui/core/Paper';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nimport Router from '@iobroker/adapter-react/Components/Router';\n\nconst styles = {\n    root: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column'\n    }\n};\n\nclass Config extends React.Component {\n\n    componentDidMount() {\n\n        // receive messages from IFRAME\n        const eventFunc = window.addEventListener ? 'addEventListener' : 'attachEvent';\n        const emit = window[eventFunc];\n        const eventName = eventFunc === 'attachEvent' ? 'onmessage' : 'message';\n\n        emit(eventName, event => this.closeConfig(event), false);\n    }\n    \n    componentWillUnmount() {\n\n        const eventFunc = window.removeEventListener ? 'removeEventListener' : 'detachEvent';\n        const emit = window[eventFunc];\n        const eventName = eventFunc === 'detachEvent' ? 'onmessage' : 'message';\n\n        emit(eventName, event => this.closeConfig(event), false);\n    }\n\n    closeConfig(event) {\n        if (event.data === 'close' || event.message === 'close') {\n            Router.doNavigate('tab-instances');\n        } else if (event.data === 'change' || event.message === 'change' ) {\n            this.props.configStored(false);\n        } else if (event.data === 'nochange' || event.message === 'nochange' ) {\n            this.props.configStored(true);\n        }\n    }\n\n    render() {\n\n        const { classes } = this.props;\n\n        return (\n            <Paper className={ classes.root }>\n                <AppBar color=\"default\" position=\"static\">\n                    <Toolbar variant=\"dense\">\n                        <Typography variant=\"h6\" color=\"inherit\">\n                            { `${this.props.t('adapterConfig')}: ${this.props.adapter}.${this.props.instance}` }\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n                <iframe\n                    title=\"config\"\n                    className={ this.props.className }\n                    src={ 'adapter/' + this.props.adapter + '/' + (this.props.materialize ? 'index_m.html' : '') + '?' + this.props.instance }>\n                </iframe>\n            </Paper>\n        );\n    }\n}\n\n\nConfig.propTypes = {\n    adapter: PropTypes.string,\n    instance: PropTypes.number,\n    materialize: PropTypes.bool,\n    t: PropTypes.func\n};\n\nexport default withStyles(styles)(Config);","import React from 'react';\nimport PropTypes from \"prop-types\";\n\nimport withWidth from '@material-ui/core/withWidth';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Grid from '@material-ui/core/Grid';\nimport Hidden from '@material-ui/core/Hidden';\nimport IconButton from '@material-ui/core/IconButton';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\n\nimport BuildIcon from '@material-ui/icons/Build';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport InputIcon from '@material-ui/icons/Input';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nimport green from '@material-ui/core/colors/green';\nimport grey from '@material-ui/core/colors/grey';\nimport red from '@material-ui/core/colors/red';\n\nimport Router from '@iobroker/adapter-react/Components/Router';\n\nimport Config from '../dialogs/Config';\nimport Utils from '../Utils';\n\nconst styles = theme => ({\n    root: {\n        margin: theme.spacing(1)\n    },\n    table: {\n        minWidth: 650,\n    },\n    tableRow: {\n        '&:nth-of-type(odd)': {\n            backgroundColor: grey[300],\n        },\n        '&:nth-of-type(even)': {\n            backgroundColor: grey[200],\n        }\n    },\n    smallAvatar: {\n        width: theme.spacing(3),\n        height: theme.spacing(3)\n    },\n    button: {\n        padding: '5px'\n    },\n    enabled: {\n        color: green[400],\n        //backgroundColor: green[300],\n        '&:hover': {\n            backgroundColor: green[200],\n        },\n        '&:focus': {\n            backgroundColor: green[300]\n        }\n    },\n    disabled: {\n        color: red[400],\n        //backgroundColor: red[300],\n        '&:hover': {\n            backgroundColor: red[200],\n            //color: '#ffffff'\n        },\n        '&:focus': {\n            backgroundColor: red[300]\n        }\n    },\n    hide: {\n        visibility: 'hidden'\n    },\n    state: {\n        width: theme.spacing(2),\n        height: theme.spacing(2),\n        borderRadius: '100%'\n    },\n    green: {\n        backgroundColor: 'green'\n    },\n    red: {\n        backgroundColor: 'red'\n    },\n    grey: {\n        backgroundColor: 'grey'\n    },\n    paper: {\n        height: '100%'\n    },\n    iframe: {\n        height: '100%',\n        width: '100%',\n        border: 0\n    }\n});\n\n// every tab should get their data itself from server\nclass Instances extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            expertMode: this.props.expertMode,\n            runningInstances: false,\n            dialog: null,\n            instances: null,\n            dialogProp: null,\n            states: null,\n        };\n\n        this.columns = {\n            instance: { onlyExpert: false},\n            actions: { onlyExpert: false },\n            title: { onlyExpert: false },\n            schedule: { onlyExpert: false },\n            restart: { onlyExpert: true },\n            log: { onlyExpert: true },\n            ramLimit: { onlyExpert: true },\n            events: { onlyExpert: true },\n            ram: { onlyExpert: false }\n        };\n        \n        this.promises = {};\n        this.objects = null;\n\n        this.getData();\n    }\n\n    getStates(update) {\n        if (update) {\n            this.promises.states = null;\n        }\n        this.promises.states = this.promises.states || this.props.socket.getForeignStates('system.adapter.*');\n\n        return this.promises.states;\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const location = Router.getLocation();\n        \n        const newState = {\n            dialog: location.dialog,\n            dialogProp: location.id\n        };\n        \n        if (props.expertMode !== state.expertMode) {\n            newState.expertMode = props.expertMode;\n        }\n        \n        return newState;\n    }\n\n    getObjects(update) {\n        if (update) {\n            this.promises.objects = null;\n        }\n        this.promises.objects = this.promises.objects || this.props.socket.getForeignObjects('system.adapter.*');\n        return this.promises.objects;\n    }\n\n    getData(update) {\n        let instances;\n        let states;\n        return this.props.socket.getAdapterInstances(update)\n            .then(_instances => {\n                instances = _instances;\n                return this.getStates(update)\n            })\n            .then(_states => {\n                states = _states;\n                return this.getObjects();\n            })\n            .then(objects => {\n                const formatted = {};\n                this.objects = objects;\n                instances.forEach(obj => this.objects[obj._id] = obj);\n\n                instances.sort((a, b) => {\n                    a = a && a.common;\n                    b = b && b.common;\n                    a = a || {};\n                    b = b || {};\n\n                    if (a.order === undefined && b.order === undefined) {\n                        if (a.name.toLowerCase() > b.name.toLowerCase()) {\n                            return 1;\n                        }\n                        if (a.name.toLowerCase() < b.name.toLowerCase()) {\n                            return -1;\n                        }\n                        return 0;\n                    } else if (a.order === undefined) {\n                        return -1;\n                    } else if (b.order === undefined) {\n                        return 1;\n                    } else {\n                        if (a.order > b.order) {\n                            return 1;\n                        }\n                        if (a.order < b.order) {\n                            return -1;\n                        }\n                        if (a.name.toLowerCase() > b.name.toLowerCase()) {\n                            return 1;\n                        }\n                        if (a.name.toLowerCase() < b.name.toLowerCase()) {\n                            return -1;\n                        }\n                        return 0;\n                    }\n                });\n\n                instances.forEach(obj => {\n                    const common = obj ? obj.common : null;\n                    const objId = obj._id.split('.');\n                    const instanceId = objId[objId.length - 1];\n\n                    const instance = {};\n\n                    instance.id    = obj._id.replace('system.adapter.', '');\n                    instance.name  = common.titleLang ? common.titleLang[this.props.lang] : common.title;\n                    instance.image = common.icon ? 'adapter/' + common.name + '/' + common.icon : 'img/no-image.png';\n                    const link     = common.localLinks || common.localLink || '';\n\n                    instance.link = Utils.replaceLink(link, common.name, instanceId, {\n                        objects,\n                        hostname: this.props.hostname,\n                        protocol: this.props.protocol\n                    });\n\n                    let state = common.mode === 'daemon' ? 'green' : 'blue';\n\n                    if (common.enabled && (!common.webExtension || !obj.native.webInstance)) {\n                        if (!states[obj._id + '.connected'] || !states[obj._id + '.connected'].val) {\n                            state = (common.mode === 'daemon') ? 'red' : 'blue';\n                        }\n\n                        if (!states[obj._id + '.alive'] || !states[obj._id + '.alive'].val) {\n                            state = (common.mode === 'daemon') ? 'red' : 'blue';\n                        }\n\n                        if (objects[instance.id + '.info.connection']) {\n                            const val = states[instance.id + '.info.connection'] ? states[instance.id + '.info.connection'].val : false;\n\n                            if (!val) {\n                                state = state === 'red' ? 'red' : 'orange';\n                            }\n                        }\n                    } else {\n                        state = common.mode === 'daemon' ? 'grey' : 'blue';\n                    }\n\n                    instance.state = state;\n\n                    const isRun = common.onlyWWW || common.enabled;\n\n                    instance.canStart = !common.onlyWWW;\n                    instance.config = !common.noConfig;\n                    instance.isRun = isRun;\n                    instance.materialize = common.materialize || false;\n\n                    formatted[obj._id] = instance;\n                });\n\n                this.setState({\n                    instances: formatted,\n                    states,\n                });\n            })\n            .catch(error => console.log(error));\n\n    }\n\n    extendObject(id, data) {\n        this.props.socket.extendObject(id, data, error =>\n            error && window.alert(error));\n    }\n    \n    openConfig(instance) {\n        Router.doNavigate('tab-instances', 'config', instance);\n    }\n\n    getHeaders() {\n\n        const headers = [];\n\n        for (const index in this.columns) {\n\n            const column = this.columns[index];\n\n            if (!column.onlyExpert || column.onlyExpert === this.state.expertMode) {\n                headers.push(\n                    <TableCell key={ index }>{ index }</TableCell>\n                );\n            }\n        }\n\n        return headers;\n    }\n\n    getRows(classes) {\n\n        const rows = this.state.instances.map(instance => {\n\n            return (\n                <TableRow key={ instance.id } className={ classes.tableRow }>\n                    <TableCell>\n                        <Grid container  spacing={ 1 } alignItems=\"center\">\n                            <Grid item>\n                                <div\n                                    className={ classes.state + ' ' + classes[instance.state] }\n                                />\n                            </Grid>\n                            <Grid item>\n                                <Avatar alt={ instance.id } src={ instance.image } className={ classes.smallAvatar }/>\n                            </Grid>\n                            <Grid item>\n                                { instance.id }\n                            </Grid>\n                        </Grid>\n                    </TableCell>\n                    <TableCell style={{padding: 0}}>\n                        <IconButton\n                            size=\"small\"\n                            onClick={ () => this.extendObject('system.adapter.' + instance.id, {common: {enabled: !instance.isRun}}) }\n                            className={ classes.button + ' ' + (instance.canStart ? instance.isRun ? classes.enabled : classes.disabled : classes.hide) }\n                        >\n                            { instance.isRun ? <PauseIcon /> : <PlayArrowIcon /> }\n                        </IconButton>\n                        <IconButton\n                            size=\"small\"\n                            className={ classes.button }\n                        >\n                            <BuildIcon />\n                        </IconButton>\n                        <IconButton\n                            size=\"small\"\n                            onClick={ () => this.extendObject('system.adapter.' + instance.id, {}) }\n                            className={ classes.button + ' ' + (instance.canStart ? '' : classes.hide) }\n                            disabled={ !instance.isRun }\n                        >\n                            <RefreshIcon />\n                        </IconButton>\n                        <IconButton\n                            size=\"small\"\n                            className={ classes.button }\n                        >\n                            <DeleteIcon />\n                        </IconButton>\n                        <IconButton\n                            size=\"small\"\n                            className={ classes.button + ' ' + (instance.link ? '' : classes.hide) }\n                            disabled={ !instance.isRun }\n                            onClick={ ()=> window.open(instance.link, \"_blank\") }\n                        >\n                            <InputIcon />\n                        </IconButton>\n                    </TableCell>\n                    <TableCell>{ instance.name }</TableCell>\n                    <TableCell />\n                    <TableCell />\n                </TableRow>\n            );\n        });\n\n        return rows;\n    }\n\n    getPanels(classes) {\n        return Object.keys(this.state.instances).map(id => {\n            const instance = this.state.instances[id];\n            return <ExpansionPanel key={ instance.id } square expanded={ this.state.expanded === instance.id } onChange={ () => this.handleChange(instance.id ) }>\n                    <ExpansionPanelSummary\n                        expandIcon={<ExpandMoreIcon />}\n                    >\n                        <Grid container spacing={ 1 } alignItems=\"center\">\n                            \n                            <Grid item md={2}>\n                                <Grid container spacing={ 1 } alignItems=\"center\">\n                                    <Grid item>\n                                        <div\n                                            className={ classes.state + ' ' + classes[instance.state] }\n                                        />\n                                    </Grid>\n                                    <Grid item>\n                                        <Avatar alt={ instance.id } src={ instance.image } className={ classes.smallAvatar }/>\n                                    </Grid>\n                                    <Grid item>\n                                        { instance.id }\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                            <Hidden mdDown>\n                                <Grid item>\n                                    <Typography className={classes.secondaryHeading}>{ instance.name }</Typography>\n                                </Grid>\n                            </Hidden>\n                        </Grid>\n                        <IconButton\n                            size=\"small\"\n                            onClick={ event => {\n                                this.extendObject('system.adapter.' + instance.id, {common: {enabled: !instance.isRun}});\n                                event.stopPropagation();\n                            } }\n                            onFocus={ event => event.stopPropagation() }\n                            className={ classes.button + ' ' + (instance.canStart ? instance.isRun ? classes.enabled : classes.disabled : classes.hide) }\n                        >\n                            { instance.isRun ? <PauseIcon /> : <PlayArrowIcon /> }\n                        </IconButton>\n                        <IconButton\n                            size=\"small\"\n                            className={ classes.button }\n                            onClick={ () => this.openConfig(id) }\n                        >\n                            <BuildIcon />\n                        </IconButton>\n                        <IconButton\n                            size=\"small\"\n                            onClick={ event => {\n                                this.extendObject('system.adapter.' + instance.id, {});\n                                event.stopPropagation();\n                            } }\n                            onFocus={ event => event.stopPropagation() }\n                            className={ classes.button + ' ' + (instance.canStart ? '' : classes.hide) }\n                            disabled={ !instance.isRun }\n                        >\n                            <RefreshIcon />\n                        </IconButton>\n                        <IconButton\n                            size=\"small\"\n                            className={ classes.button + ' ' + (instance.link ? '' : classes.hide) }\n                            disabled={ !instance.isRun }\n                            onClick={ event => {\n                                window.open(instance.link, \"_blank\")\n                                event.stopPropagation();\n                            } }\n                            onFocus={ event => event.stopPropagation() }\n                        >\n                            <InputIcon />\n                        </IconButton>\n                    </ExpansionPanelSummary>\n                    <ExpansionPanelDetails>\n                        <Typography>\n                            { instance.name }\n                        </Typography>\n                        <IconButton\n                            size=\"small\"\n                            className={ classes.button }\n                        >\n                            <DeleteIcon />\n                        </IconButton>\n                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse malesuada lacus ex,\n                        sit amet blandit leo lobortis eget. Lorem ipsum dolor sit amet, consectetur adipiscing\n                        elit. Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget.\n                    </ExpansionPanelDetails>\n                </ExpansionPanel>;\n        });\n    }\n\n    handleChange(panel) {\n        this.setState({\n            expanded: (this.state.expanded !== panel) ? panel : null\n        });\n    }\n\n    render() {\n        if (!this.state.instances) {\n            return (\n                <LinearProgress />\n            );\n        }\n\n        const { classes } = this.props;\n\n        if (this.state.dialog === 'config' && this.state.dialogProp) {\n\n            const instance = this.state.instances[this.state.dialogProp] || null;\n\n            if (instance) {\n                return (\n                    <Paper className={ classes.paper }>\n                        <Config\n                            className={ classes.iframe }\n                            adapter={ instance.id.split('.')[0] }\n                            instance={ instance.id.split('.')[1] }\n                            materialize={ instance.materialize }\n                            t={ this.props.t }\n                            configStored={ this.props.configStored }\n                        />\n                    </Paper>\n                );\n            }\n        }\n\n        //if (this.props.width === 'xs' || this.props.width === 'sm') {\n            return (\n                <Paper className={ classes.root }>\n                    { this.getPanels(classes) }\n                </Paper>\n            );\n        //}\n\n        return (\n            <TableContainer component={ Paper }>\n                <Table className={ classes.table } size=\"small\">\n                    <TableHead>\n                        <TableRow>\n                            { this.getHeaders() }\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        { this.getRows(classes) }\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        );\n    }\n}\n\nInstances.propTypes = {\n    /**\n     * Link and text\n     * {link: 'https://example.com', text: 'example.com'}\n     */\n    ready: PropTypes.bool,\n    t: PropTypes.func,\n    expertMode: PropTypes.bool,\n    hostname: PropTypes.string,\n    protocol: PropTypes.string,\n    socket: PropTypes.object,\n    systemLang: PropTypes.string,\n};\n\nexport default withWidth()(withStyles(styles)(Instances));","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Collapse from '@material-ui/core/Collapse';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton  from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\n\nimport CheckIcon from '@material-ui/icons/Check';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SaveIcon from '@material-ui/icons/Save';\n\nimport blue from '@material-ui/core/colors/blue';\nimport grey from '@material-ui/core/colors/grey';\n\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\nconst boxShadow = '0 2px 2px 0 rgba(0, 0, 0, .14),0 3px 1px -2px rgba(0, 0, 0, .12),0 1px 5px 0 rgba(0, 0, 0, .2)';\nconst boxShadowHover = '0 8px 17px 0 rgba(0, 0, 0, .2),0 6px 20px 0 rgba(0, 0, 0, .19)';\n\nconst styles = theme => ({\n    root: {\n        padding: '.75rem',\n        [theme.breakpoints.up('xl')]: {\n            flex: '0 1 20%'\n        }\n    },\n    card: {\n        display: 'flex',\n        minHeight: '235px',\n        position: 'relative',\n        overflow: 'hidden',\n        maxHeight: '235p',\n        '&:hover': {\n            overflowY: 'auto',\n            boxShadow: boxShadowHover\n        }\n    },\n    edit: {\n        opacity: '.6',\n        userSelect: 'none',\n        pointerEvents: 'none'\n    },\n    media: {\n        backgroundColor: '#e2e2e2',\n        maxWidth: '30%'\n    },\n    img: {\n        width: '120px',\n        height: 'auto',\n        padding: '2rem .5rem',\n        maxWidth: '100%'\n    },\n    contentContainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        flex: 1\n    },\n    content: {\n        height: '170px',\n        flexGrow: 1,\n        overflowY: 'hidden'\n    },\n    action: {\n        minHeight: '49px',\n        padding: '16px 24px'\n    },\n    expand: {\n        position: 'absolute',\n        right: '10px',\n        bottom: '10px'\n    },\n    collapse: {\n        backgroundColor: '#ffffff',\n        position: 'absolute',\n        width: '100%',\n        '& button': {\n            position: 'absolute',\n            top: '10px',\n            color: '#000000',\n            '&:focus': {\n                color: '#ffffff',\n                backgroundColor: blue[500]\n            }\n        }\n    },\n    close: { \n        right: '10px'\n    },\n    save: {\n        right: '50px'\n    },\n    enabled: {\n        color: '#ffffff',\n        backgroundColor: blue[500],\n        position: 'absolute',\n        top: '1rem',\n        right:'1rem',\n        boxShadow: boxShadow,\n        '&:hover': {\n            backgroundColor: blue[300]\n        },\n        '&:focus': {\n            backgroundColor: blue[500]\n        }\n    },\n    disabled: {\n        color: '#ffffff',\n        backgroundColor: grey[500],\n        position: 'absolute',\n        top: '1rem',\n        right:'1rem',\n        boxShadow: boxShadow,\n        '&:hover': {\n            backgroundColor: grey[300]\n        },\n        '&:focus': {\n            backgroundColor: grey[500]\n        }\n    }\n});\n\nclass IntroCard extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            expanded: false\n        }\n    }\n\n    static getDerivedStateFromProps(props) {\n        if (props.edit) {\n            return { expanded: false };\n        } else {\n            return null;\n        }\n    }\n\n    handleExpandClick() {\n        this.setState({\n            expanded: !this.state.expanded\n        });\n    }\n\n    render() {\n\n        const { classes } = this.props;\n        const editClass = this.props.edit ? ' ' + classes.edit : '';\n\n        return (\n            <Grid\n                item\n                xs={ 12 }\n                sm={ 6 }\n                md={ 4 }\n                lg={ 3 }\n                className={ classes.root }\n            >\n                <Card className={ classes.card }>\n                    {\n                        this.props.reveal &&\n                        <Button\n                            className={ classes.expand + editClass }\n                            variant=\"contained\"\n                            size=\"small\"\n                            onClick={ () => this.handleExpandClick() }\n                            color=\"primary\"\n                        >\n                            INFO\n                        </Button>\n                    }\n                    <div className={ classes.media + editClass } style={{ backgroundColor: this.props.color }}>\n                        <CardMedia\n                            className={ classes.img }\n                            component=\"img\"\n                            image={ this.props.image }\n                        />\n                    </div>\n                    <div className={ classes.contentContainer + editClass }>\n                        <CardContent className={ classes.content }>\n                            <Typography gutterBottom variant=\"h5\" component=\"h5\">\n                                { this.props.title }\n                            </Typography>\n                            { this.props.children }\n                        </CardContent>\n                        {\n                            this.props.action && this.props.action.link &&\n                            <Divider />\n                        }\n                        {\n                            this.props.action && this.props.action.link &&\n                            <CardActions className={ classes.action }>\n                                <Link href={ this.props.action.link } underline=\"none\">\n                                    { this.props.action.text }\n                                </Link>\n                            </CardActions>\n                        }\n                    </div>\n                    {\n                        this.props.reveal &&\n                        <Collapse\n                            className={ classes.collapse }\n                            in={ this.state.expanded }\n                            timeout=\"auto\"\n                            unmountOnExit\n                        >\n                            <IconButton className={ classes.save } size=\"small\" onClick={ () => Utils.copyToClipboard(this.props.reveal) }>\n                                <SaveIcon />\n                            </IconButton>\n                            <IconButton className={ classes.close } size=\"small\" onClick={ () => this.handleExpandClick() }>\n                                <CloseIcon />\n                            </IconButton>\n                            <CardContent>\n                                <Typography gutterBottom variant=\"h5\" component=\"h5\">\n                                    Info\n                                </Typography>\n                                { this.props.reveal }\n                            </CardContent>\n                        </Collapse>\n                    }\n                    {\n                        this.props.edit && this.props.toggleActivation &&\n                        <IconButton className={ (this.props.enabled) ? classes.enabled : classes.disabled } onClick={ () => this.props.toggleActivation() }>\n                            <CheckIcon />\n                        </IconButton>\n                    }\n                </Card>\n            </Grid>\n        );\n    }\n}\n\nIntroCard.propTypes = {\n    ready: PropTypes.bool,\n    instances: PropTypes.object,\n    updateIntro: PropTypes.string,\n    t: PropTypes.func,\n};\n\nexport default withStyles(styles)(IntroCard);","import React from 'react';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport PropTypes from 'prop-types';\n\nimport Fab from '@material-ui/core/Fab';\nimport Grid from '@material-ui/core/Grid';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nimport CheckIcon from '@material-ui/icons/Check';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CreateIcon from '@material-ui/icons/Create';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport IntroCard from '../components/IntroCard';\n\nimport Utils from '../Utils';\n\nconst styles = theme => ({\n    root: {\n        margin: theme.spacing(1)\n    },\n    button: {\n        position: 'absolute',\n        bottom: theme.spacing(2),\n        right: theme.spacing(2),\n    },\n    save: {\n        backgroundColor: theme.palette.success.main,\n        right: theme.spacing(10),\n        '&:hover': {\n            backgroundColor: theme.palette.success.dark\n        }\n    },\n    close: {\n        backgroundColor: theme.palette.error.main,\n        '&:hover': {\n            backgroundColor: theme.palette.error.dark\n        }\n    }\n});\n\nconst formatInfo = {\n    'Uptime':        Utils.formatSeconds,\n    'System uptime': Utils.formatSeconds,\n    'RAM':           Utils.formatRam,\n    'Speed':         Utils.formatSpeed,\n    'Disk size':     Utils.formatBytes,\n    'Disk free':     Utils.formatBytes\n};\n\nclass Intro extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            instances: null,\n            edit: false\n        };\n\n        this.promises = {};\n\n        this.t = props.t;\n\n        this.getData();\n    }\n\n    activateEditMode() {\n        this.getInstances(true)\n            .then(instances => this.setState({instances, edit: true}));\n    }\n\n    deactivateEditMode() {\n\n        const instances = [...this.state.instances];\n\n        instances.forEach((instance, i) => instances[i].editActive = instance.active);\n\n        this.setState({\n            instances: instances,\n            edit: false\n        });\n    }\n\n    toggleCard(id) {\n\n        const instances = this.state.instances.slice();\n        \n        if (!instances) return;\n\n        for (const index in instances) {\n            if (instances[index].id === id) {\n                \n                instances[index].editActive = !instances[index].editActive;\n                break;\n            }\n        }\n\n        this.setState({\n            instances: instances\n        });\n    }\n\n    saveCards() {\n        const instances = this.state.instances.slice();\n\n        for (const index in instances) {\n            instances[index].active = instances[index].editActive;\n        }\n\n        this.setState({\n            instances: instances,\n            edit: false\n        });\n\n        this.updateIntro(instances);\n    }\n\n    getCards() {\n        return this.state.instances.map((instance, index) => {\n\n            if ((!this.state.edit && instance.active) || this.state.edit) {\n\n                let linkText = instance.link ? instance.link.replace(/^https?:\\/\\//, '') : '';\n                const pos = linkText.indexOf('/');\n                if (pos !== -1) {\n                    linkText = linkText.substring(0, pos);\n                }\n\n                return (\n                    <IntroCard\n                        key={ index }\n                        image={ instance.image }\n                        title={ instance.name }\n                        action={{ link: instance.link, text: linkText }}\n                        t={ this.props.t }\n                        color={ instance.color }\n                        reveal={ instance.info }\n                        edit={ this.state.edit }\n                        enabled={ this.state.edit ? instance.editActive : instance.active }\n                        toggleActivation={ () => this.toggleCard(instance.id) }\n                    >\n                        { instance.description || this.getHostDescription(instance.id) }\n                    </IntroCard>\n                );\n            } else {\n                return null;\n            }\n        });\n    }\n\n    getButtons(classes) {\n        const buttons = [];\n\n        if (this.state.edit) {\n            buttons.push(\n                <Fab\n                    key=\"save\"\n                    color=\"primary\"\n                    className={ classes.button + ' ' + classes.save }\n                    onClick={ () => this.saveCards() }\n                >\n                    <CheckIcon />\n                </Fab>\n            );\n\n            buttons.push(\n                <Fab\n                    key=\"close\"\n                    color=\"primary\"\n                    className={ classes.button + ' ' + classes.close }\n                    onClick={ () => this.deactivateEditMode() }\n                >\n                    <CloseIcon />\n                </Fab>\n            )\n        } else {\n            buttons.push(\n                <Fab\n                    color=\"primary\"\n                    key=\"edit\"\n                    className={ classes.button}\n                    onClick={ () => this.activateEditMode() }\n                >\n                    <CreateIcon />\n                </Fab>\n            );\n        }\n\n        return buttons;\n    }\n\n    updateIntro(instances) {\n        const systemConfig = this.props.systemConfig;\n\n        let changed = false;\n\n        for (const index in instances) {\n\n            const instance = instances[index];\n\n            if (systemConfig.common.intro.hasOwnProperty(instance.id) || !instance.editActive) {\n                if (systemConfig.common.intro[instance.id] !== instance.editActive) {\n                    systemConfig.common.intro[instance.id] = instance.editActive;\n                    changed = true;\n                }\n            }\n        }\n\n        if (changed) {\n            this.props.socket.getObject('system.config').then(obj => {\n                obj.common.intro = systemConfig.common.intro;\n                this.props.socket.setObject('system.config', obj);\n                this.props.showAlert('Updated', 'success');\n            }, error => {\n                console.log(error);\n                this.props.showAlert(error, 'error');\n            });\n        }\n    }\n\n    getHostsData(hosts) {\n        const promises = hosts.map(obj =>\n            this.props.socket.getHostInfo(obj._id)\n                .catch(error => {\n                    console.error(error);\n                    return error;\n                })\n                .then(data =>\n                    ({id: obj._id, data})));\n\n        return new Promise(resolve =>\n            Promise.all(promises)\n                .then(results => {\n                    const hostsData = {};\n                    results.forEach(res => hostsData[res.id] = res.data);\n                    resolve(hostsData);\n                }));\n    }\n\n    getHosts(update) {\n        if (update) {\n            this.promises.hosts = null;\n        }\n        this.promises.hosts = this.promises.hosts || this.props.socket.getHosts(update);\n\n        return this.promises.hosts;\n    }\n\n    getInstances(update, hosts, hostsData) {\n        hosts     = hosts     || this.state.hosts;\n        hostsData = hostsData || this.state.hostsData;\n\n        if (update) {\n            this.promises.instances = null;\n        }\n\n        this.promises.instances = this.promises.instances || this.props.socket.getAdapterInstances()\n            .then(instances => {\n                const deactivated = this.props.systemConfig ? this.props.systemConfig.common.intro || {} : {};\n                const introInstances = [];\n                const objects = {};\n                instances.forEach(obj => objects[obj._id] = obj);\n\n                instances.sort((a, b) => {\n                    a = a && a.common;\n                    b = b && b.common;\n                    a = a || {};\n                    b = b || {};\n\n                    if (a.order === undefined && b.order === undefined) {\n                        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n                        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;\n                        return 0;\n                    } else if (a.order === undefined) {\n                        return -1;\n                    } else if (b.order === undefined) {\n                        return 1;\n                    } else {\n                        if (a.order > b.order) return 1;\n                        if (a.order < b.order) return -1;\n                        if (a.name.toLowerCase() > b.name.toLowerCase()) return 1;\n                        if (a.name.toLowerCase() < b.name.toLowerCase()) return -1;\n                        return 0;\n                    }\n                });\n\n                Object.keys(instances).forEach(key => {\n                    const obj = instances[key];\n                    const common = (obj) ? obj.common : null;\n                    const objId = obj._id.split('.');\n                    const instanceId = objId[objId.length - 1];\n\n                    if (common.name && common.name === 'admin' && common.localLink === (this.props.hostname || '')) {\n                        return;\n                    } else if (common.name && common.name === 'web') {\n                        return;\n                    } else if (common.name && common.name !== 'vis-web-admin' && common.name.match(/^vis-/)) {\n                        return;\n                    } else if (common.name && common.name.match(/^icons-/)) {\n                        return;\n                    } else if (common && (common.enabled || common.onlyWWW) && (common.localLinks || common.localLink)) {\n                        const instance = {};\n                        const ws = (common.welcomeScreen) ? common.welcomeScreen : null;\n\n                        instance.id = obj._id.replace('system.adapter.', '');\n                        instance.name = /*(ws && ws.name) ? ws.name :*/ (common.titleLang) ? common.titleLang[this.props.lang] : common.title;\n                        instance.color = ws && ws.color ? ws.color : '';\n                        instance.description = common.desc && typeof common.desc === 'object' ? (common.desc[this.props.lang] || common.desc.en) : common.desc || '';\n                        instance.image = common.icon ? 'adapter/' + common.name + '/' + common.icon : 'img/no-image.png';\n\n                        const link = /*(ws && ws.link) ? ws.link :*/ common.localLinks || common.localLink || '';\n                        instance.link = Utils.replaceLink(link, common.name, instanceId, {\n                            objects,\n                            hostname: this.props.hostname,\n                            protocol: this.props.protocol\n                        }) || '';\n                        instance.active = deactivated.hasOwnProperty(instance.id) ? deactivated[instance.id] : true;\n                        instance.editActive = instance.active;\n\n                        introInstances.push(instance);\n                    }\n                });\n\n                /*var urlText = url.replace(/^https?:\\/\\//, '');\n                var pos = urlText.indexOf('/');\n                if (pos !== -1) {\n                    urlText = urlText.substring(0, pos);\n                }\n                if (adapter === 'admin' && urlText === location.host) return null;\n                if (adapter === 'web') return null;\n                if (adapter !== 'vis-web-admin' && adapter.match(/^vis-/)) return null; // no widgets\n                if (adapter.match(/^icons-/)) return null; // no icons\n            */\n\n                Object.keys(hosts).forEach(key => {\n                    const obj = hosts[key];\n                    const common = (obj) ? obj.common : null;\n\n                    if (common) {\n                        const instance = {};\n\n                        instance.id = obj._id;\n                        instance.name = common.name;\n                        instance.color = '';\n                        instance.image = (common.icon) ? common.icon : 'img/no-image.png';\n                        instance.active = (deactivated.hasOwnProperty(instance.id)) ? deactivated[instance.id] : true;\n                        instance.editActive = instance.active;\n                        instance.info = this.t('Info');\n                        introInstances.push(instance);\n                    }\n                });\n\n                return introInstances;\n            })\n            .catch(error => console.log(error));\n\n        return this.promises.instances;\n    }\n\n    getHostDescription(id) {\n        if (!this.state.hostsData) {\n            return <CircularProgress />;\n        } else {\n            const hostData = this.state.hostsData[id];\n            if (hostData && typeof hostData === 'object') {\n                return <ul>\n                        <li>\n                            <b>Platform: </b>\n                            <span>{(formatInfo['Platform'] ? formatInfo['Platform'](hostData['Platform']) : hostData['Platform'] || ' --')}</span>\n                        </li>\n                        <li>\n                            <b>RAM: </b>\n                            <span>{(formatInfo['RAM'] ? formatInfo['RAM'](hostData['RAM']) : hostData['RAM'] || ' --')}</span>\n                        </li>\n                        <li>\n                            <b>Node.js: </b>\n                            <span>{(formatInfo['Node.js'] ? formatInfo['Node.js'](hostData['Node.js']) : hostData['Node.js'] || ' --')}</span>\n                        </li>\n                        <li>\n                            <b>NPM: </b>\n                            <span>{(formatInfo['NPM'] ? formatInfo['NPM'](hostData['NPM']) : hostData['NPM'] || ' --')}</span>\n                        </li>\n                    </ul>;\n            } else {\n                return hostData || '...'; // error text\n            }\n        }\n    }\n\n    getData(update) {\n        let hosts;\n\n        return this.getHosts(update)\n            .then(_hosts => {\n                hosts = _hosts;\n                return this.getInstances(update, hosts);\n            })\n            .then(instances => {\n                this.setState({instances, hosts});\n\n                // hosts data could last a long time, so show some results to user now and then get the info about hosts\n                return this.getHostsData(hosts)\n            })\n            .then(hostsData =>\n                this.setState({hostsData}));\n    }\n\n    render() {\n        if (!this.state.instances) {\n            return (\n                <LinearProgress />\n            );\n        }\n\n        const { classes } = this.props;\n\n        return (\n            <div className={ this.props.classes.root }>\n                <Grid container spacing={ 2 }>\n                    { this.getCards() }\n                </Grid>\n                { this.getButtons(classes) }\n            </div>\n        );\n    }\n}\n\nIntro.propTypes = {\n    /**\n     * Link and text\n     * {link: 'https://example.com', text: 'example.com'}\n     */\n    action: PropTypes.object,\n    children: PropTypes.node,\n    color: PropTypes.string,\n    edit: PropTypes.bool,\n    enabled: PropTypes.bool,\n    image: PropTypes.string,\n    reveal: PropTypes.node,\n    title: PropTypes.string,\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    toggleActivation: PropTypes.func,\n};\n\nexport default withStyles(styles)(Intro);","import React from 'react';\nimport clsx from 'clsx';\n\nimport withWidth from '@material-ui/core/withWidth';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport CloseIcon from '@material-ui/icons/Close';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\n\nimport amber from '@material-ui/core/colors/amber';\nimport grey from '@material-ui/core/colors/grey';\nimport red from '@material-ui/core/colors/red';\nimport PropTypes from 'prop-types';\n\nimport Utils from '../Utils';\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\nconst styles = theme => ({\n    root: {\n        height: 'calc(100% - ' + theme.spacing(2) + 'px)',\n        margin: theme.spacing(1)\n    },\n    flexContainer: {\n        height: '100%',\n        flexWrap: 'nowrap'\n    },\n    container: {\n        height: '100%'\n    },\n    table: {\n        tableLayout: 'fixed',\n        minWidth: 960,\n        '& td:nth-of-type(5)': {\n           overflow: 'hidden',\n           whiteSpace: 'nowrap'\n        }\n    },\n    row: {\n        '&:nth-of-type(odd)': {\n            backgroundColor: theme.palette.background.default,\n        },\n    },\n    updatedRow: {\n        animation: 'updated 1s',\n    },\n    formControl: {\n        width: '100%'\n    },\n    error: {\n        color: red[500]\n    },\n    warn: {\n        color: amber[500]\n    },\n    debug: {\n        color: grey[500]\n    },\n    source: {\n        width: 230\n    },\n    pid: {\n        width: 100\n    },\n    timestamp: {\n        width: 220\n    },\n    severity: {\n        width: 110\n    },\n    message: {\n        minWidth: 300\n    },\n    hidden: {\n        display: 'none'\n    },\n    grow: {\n        flexGrow: 1\n    },\n    logSize: {\n        marginRight: '1rem',\n        marginLeft: '1rem'\n    },\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500],\n    },\n    header: {\n        '& .MuiFormLabel-root.Mui-disabled': {\n            color: theme.palette.text.primary\n        },\n        '& .MuiInput-underline::before': {\n            content: '',\n            borderBottom: 'none'\n        }\n    },\n    pauseButton: {\n        minWidth: theme.spacing(6)\n    },\n    pauseCount: {\n        color: amber[500]\n    },\n    downloadLogSize: {\n        color: grey[500],\n        marginLeft: theme.spacing(2)\n    },\n    downloadEntry: {\n        display: 'flex',\n        justifyContent: 'space-between'\n    }\n});\n\nclass Logs extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        Number.prototype.pad = function (size) {\n            let s = this + '';\n            while (s.length < size) {\n                s = '0' + s;\n            }\n            return s;\n        };\n\n        this.state = {\n            source: '1',\n            severity: 'debug',\n            message: '',\n            logDeleteDialog: false,\n            logDownloadDialog: null,\n            logFiles: [],\n            logs: null,\n            logSize: null,\n            pause: 0,\n            pauseCount: 0\n        };\n\n        this.severities = {\n            'silly': 0,\n            'debug': 1,\n            'info': 2,\n            'warn': 3,\n            'error': 4\n        };\n        \n        this.t = props.t;\n\n        this.logHandlerBound = this.logHandler.bind(this);\n\n        this.props.socket.getLogsFiles()\n            .then(list => {\n                if (list && list.length) {\n\n                    const logFiles = [];\n\n                    list.reverse();\n                    // first 2018-01-01\n                    list.forEach(file => {\n                        const parts = file.fileName.split('/');\n                        const name = parts.pop().replace(/iobroker\\.?/, '').replace('.log', '');\n\n                        if (name[0] <= '9') {\n                            logFiles.push({\n                                path: file,\n                                name: name\n                            });\n                        }\n                    });\n\n                    // then restart.log ans so on\n                    list.sort();\n                    list.forEach(file => {\n                        const parts = file.fileName.split('/');\n                        const name = parts.pop().replace(/iobroker\\.?/, '').replace('.log', '');\n\n                        if (name[0] > '9') {\n                            logFiles.push({\n                                path: file,\n                                name: name\n                            });\n                        }\n                    });\n\n                    if (this.props.logsWorker) {\n                        this.props.logsWorker.getLogs()\n                            .then(results => {\n                                const logs = [...results.logs];\n                                const logSize = results.logSize;\n\n                                logs.forEach(item => {\n                                    if (!item.time) {\n                                        const date = new Date(item.ts);\n                                        item.time = `${date.getFullYear()}-${(date.getMonth() + 1).pad(2)}-${date.getDate().pad(2)} ` +\n                                            `${date.getHours().pad(2)}:${date.getMinutes().pad(2)}:${date.getSeconds().pad(2)}.${date.getMilliseconds().pad(3)}`;\n                                    }\n                                });\n\n                                this.setState({ logFiles, logs, logSize });\n                            });\n                    } else {\n                        this.setState({ logFiles });\n                    }\n                }\n            });\n\n        this.words = {\n\n        }\n    }\n\n    componentDidMount() {\n        this.props.logsWorker && this.props.logsWorker.enableCountErrors(false);\n        this.props.logsWorker.registerHandler(this.logHandlerBound);\n    }\n\n    componentWillUnmount() {\n        this.props.logsWorker && this.props.logsWorker.enableCountErrors(true);\n        this.props.logsWorker.unregisterHandler(this.logHandlerBound);\n    }\n\n    logHandler(newLogs) {\n        const oldLogs = this.state.logs || [];\n        const logs = oldLogs.concat(newLogs);\n        logs.forEach(item => {\n            if (!item.time) {\n                const date = new Date(item.ts);\n                item.time = `${date.getFullYear()}-${(date.getMonth() + 1).pad(2)}-${date.getDate().pad(2)} ` +\n                    `${date.getHours().pad(2)}:${date.getMinutes().pad(2)}:${date.getSeconds().pad(2)}.${date.getMilliseconds().pad(3)}`;\n            }\n        });\n        this.setState({logs});\n    }\n\n    clearLog() {\n        this.props.logsWorker && this.props.logsWorker.clearLines();\n        this.setState({\n            logs: []\n        });\n    }\n\n    handleMessageChange(event) {\n        this.setState({\n            message: event.target.value\n        });\n    }\n\n    handleSourceChange(event) {\n        this.setState({\n            source: event.target.value\n        });\n    }\n\n    handleSeverityChange(event) {\n        this.setState({\n            severity: event.target.value\n        });\n    }\n\n    openLogDownload(event) {\n        this.setState({\n            logDownloadDialog: event.currentTarget\n        });\n    }\n\n    closeLogDownload() {\n        this.setState({\n            logDownloadDialog: null\n        });\n    }\n\n    openLogDelete() {\n        this.setState({\n            logDeleteDialog: true\n        });\n    }\n\n    closeLogDelete() {\n        this.setState({\n            logDeleteDialog: false\n        });\n    }\n\n    handleLogDelete() {\n        this.props.socket.delLogs(this.props.currentHost)\n            .then(() => this.clearLog())\n            .catch(error => window.alert(error));\n\n        this.closeLogDelete();\n    }\n\n    handleLogPause() {\n        this.setState({\n            pause: this.state.pause ? 0 : this.state.logs.length\n        });\n    }\n\n    openTab(path) {\n        const tab = window.open(path, '_blank');\n        tab.focus();\n    }\n\n    getLogFiles() {\n\n        const { classes } = this.props;\n\n        return this.state.logFiles.map(entry => {\n            return (\n                <MenuItem\n                    className={ classes.downloadEntry }\n                    key={ entry.name }\n                    onClick={ () => {\n                        this.openTab(entry.path.fileName);\n                        this.closeLogDownload();\n                    } }\n                >\n                    { entry.name }\n                    <Typography\n                        className={ classes.downloadLogSize }\n                        variant=\"caption\"\n                    >\n                        { Utils.formatBytes(entry.path.size) || '-' }\n                    </Typography>\n                </MenuItem>\n            );\n        });\n    }\n\n    getSeverities() {\n\n        const severities = [];\n\n        for (const i in this.severities) {\n            severities.push(\n                <MenuItem value={ i } key={ i }>{ i }</MenuItem>\n            );\n        }\n\n        return severities;\n    }\n\n    getSources() {\n        const sources = ['1'];\n        const ids = {};\n\n        for (let i = 0; i < this.state.logs.length; i++) {\n            const log = this.state.logs[i];\n\n            if (!ids[log.from]) {\n                ids[log.from] = true;\n            }\n        }\n\n        for (const i in ids) {\n            sources.push(i);\n        }\n\n        sources.sort();\n\n        return sources.map(source => (\n            <MenuItem value={ source } key={ source }>{ source === '1' ? this.t('Source') : source }</MenuItem>\n        ));\n    }\n\n    getRows() {\n        const rows = [];\n        const { classes } = this.props;\n\n        for (let i = this.state.pause > 0 ? this.state.pause - 1 : this.state.logs.length - 1; i >= 0; i--) {\n\n            const row = this.state.logs[i];\n            const severity = row.severity;\n\n            let message = row.message;\n            let id = '';\n\n            const regExp = new RegExp(row.from.replace('.', '\\\\.') + ' \\\\(\\\\d+\\\\) ', 'g');\n            const matches = message.match(regExp);\n\n            if (matches) {\n                message = message.replace(matches[0], '');\n                id = matches[0].split(' ')[1].match(/\\d+/g)[0];\n            } else {\n                message = message.replace(row.from + ' ', '');\n            }\n\n            const isFrom = this.state.source !== '1' && this.state.source !== row.from;\n            const isHidden = isFrom || this.severities[severity] < this.severities[this.state.severity] ||\n                            !message.toLowerCase().includes(this.state.message.toLowerCase());\n\n            rows.push(\n                <TableRow\n                    className={ clsx(classes.row, isHidden && classes.hidden, this.lastRowRender && row.ts > this.lastRowRender && classes.updatedRow) }\n                    key={ row.key }\n                    hover\n                >\n                    <TableCell>\n                        { row.from }\n                    </TableCell>\n                    <TableCell\n                        className={ classes[severity] }\n                    >\n                        { id }\n                    </TableCell>\n                    <TableCell\n                        className={ classes[severity] }\n                    >\n                        { row.time }\n                    </TableCell>\n                    <TableCell\n                        className={ classes[severity] }\n                    >\n                        { row.severity }\n                    </TableCell>\n                    <TableCell\n                        className={ classes[severity] }\n                        title={ message }\n                    >\n                        { message }\n                    </TableCell>\n                </TableRow>\n            );\n        }\n\n        if (!this.lastRowRender || Date.now() - this.lastRowRender > 1000) {\n            if (!this.lastRowRenderTimeout) {\n                this.lastRowRenderTimeout = setTimeout(() => {\n                    this.lastRowRenderTimeout = null;\n                    this.lastRowRender = Date.now();\n                    console.log('reset ' + Date.now())\n                }, 1000);\n            }\n        }\n\n        return rows;\n    }\n\n    render() {\n        if (!this.state.logs) {\n            return <LinearProgress />\n        }\n        const { classes } = this.props;\n\n        const pauseChild = !this.state.pause ? <PauseIcon /> :\n            <Typography className={ classes.pauseCount }>{ this.state.logs.length - this.state.pause }</Typography>;\n\n        return (\n            <Paper className={ classes.root }>\n                <Grid\n                    container\n                    direction=\"column\"\n                    className={ classes.flexContainer }\n                >\n                    <Grid\n                        item\n                        container\n                        alignItems=\"center\"\n                    >\n                        <IconButton\n                            onClick={ () => this.props.logsWorker &&\n                                this.props.logsWorker.getLogs(true).then(results => {\n                                    const logs = results.logs;\n                                    const logSize = results.logSize;\n                                    this.setState({ logs: [...logs], logSize });\n                                }) }\n                        >\n                            <RefreshIcon />\n                        </IconButton>\n                        <IconButton\n                            className={ classes.pauseButton }\n                            onClick={ () => this.handleLogPause() }\n                        >\n                            { pauseChild }\n                        </IconButton>\n                        <IconButton\n                            onClick={ () => this.clearLog() }\n                        >\n                            <DeleteIcon />\n                        </IconButton>\n                        <IconButton\n                            onClick={ () => this.openLogDelete() }\n                        >\n                            <DeleteForeverIcon />\n                        </IconButton>\n                        <div className={classes.grow} />\n                        { this.state.logFiles.length > 0 &&\n                            <div>\n                                <Button\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    startIcon={ <SaveAltIcon />}\n                                    onClick={ event => this.openLogDownload(event) }\n                                >\n                                    { this.t('Download log') }\n                                </Button>\n                                <Menu\n                                    id=\"simple-menu\"\n                                    anchorEl={ this.state.logDownloadDialog }\n                                    keepMounted\n                                    open={ Boolean(this.state.logDownloadDialog) }\n                                    onClose={ () => this.closeLogDownload() }\n                                >\n                                    { this.getLogFiles() }\n                                </Menu>\n                            </div>\n                        }\n                        <div className={classes.grow} />\n                        <Typography\n                            variant=\"body2\"\n                            className={ classes.logSize }\n                        >\n                            { `${this.t('Log size:')} ${this.state.logSize || '-'}` }\n                        </Typography>\n                    </Grid>\n                    <TableContainer className={ classes.container }>\n                        <Table stickyHeader size=\"small\" className={ classes.table }>\n                            <TableHead>\n                                <TableRow>\n                                    <TableCell className={ classes.source }>\n                                        <FormControl className={ classes.formControl }>\n                                            <InputLabel id=\"source-label\" />\n                                            <Select\n                                                labelId=\"source-label\"\n                                                value={ this.state.source }\n                                                onChange={ event => this.handleSourceChange(event) }\n                                            >\n                                                {\n                                                    this.getSources()\n                                                }\n                                            </Select>\n                                        </FormControl>\n                                    </TableCell>\n                                    <TableCell className={ classes.pid }>\n                                        <TextField disabled label={ this.t('PID') } className={ classes.header } />\n                                    </TableCell>\n                                    <TableCell className={ classes.timestamp }>\n                                        <TextField disabled label={ this.t('Time') } className={ classes.header } />\n                                    </TableCell>\n                                    <TableCell className={ classes.severity }>\n                                        <FormControl className={classes.formControl}>\n                                            <InputLabel id=\"severity-label\" />\n                                            <Select\n                                                labelId=\"severity-label\"\n                                                value={ this.state.severity }\n                                                onChange={ event => this.handleSeverityChange(event) }\n                                            >\n                                                {\n                                                    this.getSeverities()\n                                                }\n                                            </Select>\n                                        </FormControl>\n                                    </TableCell>\n                                    <TableCell className={ classes.message }>\n                                        <FormControl className={ classes.formControl }>\n                                            <TextField\n                                                label={ this.t('Message') }\n                                                onChange={ event => this.handleMessageChange(event) }\n                                            />\n                                        </FormControl>\n                                    </TableCell>\n                                </TableRow>\n                            </TableHead>\n                            <TableBody>\n                                {\n                                    this.getRows()\n                                }\n                            </TableBody>\n                        </Table>\n                    </TableContainer>\n                </Grid>\n                <Dialog onClose={ () => this.closeLogDelete() } open={ this.state.logDeleteDialog }>\n                    <DialogTitle>\n                        { this.t('Please confirm') }\n                        <IconButton className={ classes.closeButton } onClick={ () => this.closeLogDelete() }>\n                            <CloseIcon />\n                        </IconButton>\n                    </DialogTitle>\n                    <DialogContent dividers>\n                        <Typography gutterBottom>\n                            { this.t('Log file will be deleted. Are you sure?') }\n                        </Typography>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button autoFocus onClick={ () => this.handleLogDelete() } color=\"primary\">\n                            { this.t('Ok') }\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </Paper>\n        );\n    }\n}\n\nLogs.propTypes = {\n    socket: PropTypes.object,\n    currentHost: PropTypes.string,\n    clearErrors: PropTypes.func,\n    logsWorker: PropTypes.object,\n    lang: PropTypes.string,\n    t: PropTypes.func,\n};\n\nexport default withWidth()(withStyles(styles)(Logs));","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport withWidth from \"@material-ui/core/withWidth\";\nimport {withStyles} from \"@material-ui/core/styles\";\nimport PropTypes from \"prop-types\";\n\nconst styles = {\n\n};\n\nclass TextInputDialog extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            text: this.props.input || '',\n            error: ''\n        }\n    }\n    render() {\n        return <Dialog open={true} onClose={() => this.props.onClose(null)} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">{this.props.titleText}</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    {this.props.promptText}\n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    error={!!this.state.error}\n                    title={this.state.error}\n                    value={this.state.text}\n                    label={this.props.labelText || ''}\n                    type={this.props.type || 'text'}\n                    onKeyPress={e => e.charCode === 13 && this.state.text && this.props.onClose(this.state.text)}\n                    onChange={e => {\n                        let error = '';\n                        if (this.props.verify) {\n                            error = !this.props.verify(e.target.value);\n                        }\n\n                        if (this.props.rule) {\n                            this.setState({text: this.props.rule(e.target.value), error});\n                        } else {\n                            this.setState({text: e.target.value, error});\n                        }\n                    }}\n                    fullWidth\n                />\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => this.props.onClose(null)} >{this.props.cancelText}</Button>\n                <Button disabled={!this.state.text || this.state.error} onClick={() => this.props.onClose(this.state.text)}\n                        color=\"primary\">{this.props.applyText}</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nTextInputDialog.propTypes = {\n    onClose: PropTypes.func.isRequired,\n    titleText: PropTypes.string.isRequired,\n    promptText: PropTypes.string,\n    labelText: PropTypes.string,\n    cancelText: PropTypes.string.isRequired,\n    applyText: PropTypes.string.isRequired,\n    verify: PropTypes.func,\n    replace: PropTypes.func,\n    type: PropTypes.string, // text, number, password, email\n    input: PropTypes.string,\n};\n\nexport default withWidth()(withStyles(styles)(TextInputDialog));","import React from 'react';\nimport {withStyles} from '@material-ui/core/styles';\nimport withWidth from \"@material-ui/core/withWidth\";\nimport PropTypes from 'prop-types';\n\nimport clsx from 'clsx';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from '@material-ui/core/TextField';\n\nimport NoImage from \"../assets/no-image.png\";\nimport Utils from \"../Utils\";\n\nconst styles = theme => ({\n    textarea: {\n        width: '100%',\n        height: '100%',\n    }\n});\n\nconst EXTENSIONS = {\n    images: ['png', 'jpg', 'svg', 'jpeg'],\n    code: ['js', 'json'],\n    txt: ['log', 'txt', 'html', 'css', 'xml'],\n};\n\nclass FileViewer extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            text: null,\n            code: null,\n        };\n\n        this.ext = Utils.getFileExtension(this.props.href);\n\n        if (EXTENSIONS.code.includes(this.ext) || EXTENSIONS.txt.includes(this.ext)) {\n            fetch(this.props.href)\n                .then(response => response.json())\n                .then(data => {\n                    if (EXTENSIONS.txt.includes(this.ext)) {\n                        this.setState({text: data});\n                    } else if (EXTENSIONS.code.includes(this.ext)) {\n                        this.setState({code: data});\n                    }\n                });\n        }\n    }\n\n    getContent() {\n        if (EXTENSIONS.images.includes(this.ext)) {\n            return <img\n                onError={e => {\n                    e.target.onerror = null;\n                    e.target.src = NoImage\n                }}\n                className={this.props.classes['itemImage' + this.state.viewType]}\n                src={ this.props.href } alt={ this.props.href }/>;\n        } else if (this.state.code !== null) {\n            return <TextField\n                className={ this.props.classes.textarea }\n                multiline\n                readOnly={true}>{ this.state.code }</TextField>;\n        } else  if (this.state.text !== null) {\n            return <TextField\n                className={ this.props.classes.textarea }\n                multiline\n                readOnly={true}>{ this.state.text }</TextField>;\n        }\n    }\n\n    render() {\n        return <Dialog\n            open={this.props.href}\n            onClose={() => this.props.onClose()}\n            fullWidth={true}\n            aria-labelledby=\"form-dialog-title\"\n        >\n            <DialogTitle id=\"form-dialog-title\">{this.props.t('View: %s', this.href)}</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    { this.getContent() }\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={() => this.props.onClose()} color=\"primary\">{this.props.t('Close')}</Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nFileViewer.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    expertMode: PropTypes.bool,\n    onClose: PropTypes.func,\n    href: PropTypes.string.isRequired\n};\n\nexport default withWidth()(withStyles(styles)(FileViewer));\n","/* This file is temporary here to speed-up the development of this component.\n    Later it will be moved to adapter-react\n */\n\nimport withWidth from '@material-ui/core/withWidth';\nimport {withStyles} from '@material-ui/core/styles';\nimport React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Dropzone from 'react-dropzone'\nimport Fab from '@material-ui/core/Fab';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\n\nimport Utils from '../Utils';\nimport TextInputDialog from '../components/TextInputDialog';\nimport FileViewer from '../components/FileViewer';\n\n// Icons\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport CloseIcon from '@material-ui/icons/Close';\nimport {FaFolderOpen as OpenedFolderIcon} from 'react-icons/fa';\nimport {FaFolder as ClosedFolderIcon} from 'react-icons/fa';\nimport {FaFile as FileIcon} from 'react-icons/fa';\nimport {FaMusic as MusicIcon} from 'react-icons/fa';\nimport {FaScroll as JsonIcon} from 'react-icons/fa';\nimport {FaFileCode as CssIcon} from 'react-icons/fa';\nimport {FaJsSquare as JSIcon} from 'react-icons/fa';\nimport {FaFolderMinus as EmptyFilterIcon} from 'react-icons/fa';\nimport {FaFolderPlus as AddFolderIcon} from 'react-icons/fa';\nimport {FaFileUpload as UploadIcon} from 'react-icons/fa';\nimport {FaFileDownload as DownloadIcon} from 'react-icons/fa';\nimport NoImage from '../assets/no-image.png';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nconst styles = theme => ({\n    filesDiv: {\n        width: '100%',\n        height: 'calc(100% - 48px)',\n        overflow: 'auto',\n    },\n    itemTable: {\n        userSelect: 'none',\n        cursor: 'pointer',\n        height: 32,\n        width: '100%',\n        lineHeight: '32px',\n        '&:hover': {\n            background: theme.palette.secondary.main,\n            color: Utils.invertColor(theme.palette.secondary.main, true),\n        }\n    },\n    itemSelected: {\n        background: theme.palette.primary.main,\n        color: Utils.invertColor(theme.palette.primary.main, true),\n    },\n    itemNameTable: {\n        display: 'inline-block',\n        width: 'calc(100% - 214px)', // 30 + 60 + 60 + 32 + 32\n        paddingLeft: 10,\n        fontSize: '1rem',\n        verticalAlign: 'top',\n    },\n    itemNameFolderTable: {\n        fontWeight: 'bold'\n    },\n    itemSizeTable: {\n        display: 'inline-block',\n        width: 60,\n        verticalAlign: 'top',\n        textAlign: 'right'\n    },\n    itemAccessTable: {\n        display: 'inline-block',\n        verticalAlign: 'top',\n        width: 60,\n        textAlign: 'right',\n        paddingRight: 5\n    },\n    itemImageTable: {\n        display: 'inline-block',\n        width: 30,\n        marginTop: 1,\n        objectFit: 'contain',\n        maxHeight: 30,\n    },\n    itemIconTable: {\n        display: 'inline-block',\n        marginTop: 1,\n        width: 30,\n        height: 30,\n    },\n    itemFolderTable: {\n\n    },\n    itemFolderTemp: {\n        opacity: 0.4\n    },\n    itemFolderIconTable: {\n        marginTop: 1,\n        display: 'inline-block',\n        width: 30,\n        height: 30\n    },\n    itemDownloadButtonTable: {\n        display: 'inline-block',\n        width: 32,\n        height: 32,\n        verticalAlign: 'top',\n        padding: 0,\n        '& span': {\n            paddingTop: 9\n        },\n        '& svg': {\n            width: 14,\n            height: 14,\n            fontSize: '1rem'\n        }\n    },\n    itemDeleteButtonTable: {\n        display: 'inline-block',\n        width: 32,\n        height: 32,\n        verticalAlign: 'top',\n        padding: 0,\n        '& svg': {\n            width: 18,\n            height: 18,\n            fontSize: '1.5rem'\n        }\n    },\n\n    uploadDiv: {\n        top: 0,\n        zIndex: 1,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        position: 'absolute',\n        opacity: 0.9,\n        textAlign: 'center',\n        background: '#FFFFFF',\n    },\n    uploadDivDragging: {\n        opacity: 1,\n    },\n\n    uploadCenterDiv: {\n        margin: 20,\n        border: '3px dashed grey',\n        borderRadius: 30,\n        width: 'calc(100% - 40px)',\n        height: 'calc(100% - 40px)',\n        position: 'relative',\n    },\n    uploadCenterIcon: {\n        width: '25%',\n        height: '25%',\n    },\n    uploadCenterText: {\n        fontSize: 24,\n        fontWeight: 'bold'\n    },\n    uploadCloseButton: {\n        zIndex: 2,\n        position: 'absolute',\n        top: 30,\n        right: 30,\n    },\n    uploadCenterTextAndIcon: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        height: '30%',\n        width: '50%',\n        margin: '-15% 0 0 -25%',\n    }\n});\n\nconst USER_DATA = '0_userdata.0';\n\nfunction sortFolders(a, b) {\n    if (a.folder && b.folder) {\n        return a.name > b.name ? 1 : (a.name < b.name ? -1 : 0);\n    } else if (a.folder) {\n        return -1;\n    } else if (b.folder) {\n        return 1;\n    } else {\n        return a.name > b.name ? 1 : (a.name < b.name ? -1 : 0)\n    }\n}\n\nclass FileBrowser extends React.Component {\n    constructor(props) {\n        super(props);\n        let expanded = window.localStorage.getItem('files.expanded') || '[]';\n\n        try {\n            expanded = JSON.parse(expanded);\n        } catch (e) {\n            expanded = [];\n        }\n\n        this.state = {\n            viewType: 'Table',\n            folders: {},\n            filterEmpty: window.localStorage.getItem('files.empty') !== 'false',\n            expanded,\n            expertMode: this.props.expertMode,\n            addFolder: false,\n            uploadFile: false,\n            deleteItem: '',\n            marked: [],\n            selected: window.localStorage.getItem('files.selected') || USER_DATA,\n        };\n\n        this.levelPadding = this.props.levelPadding || 20;\n        this.mounted = true;\n        this.suppressDeleteConfirm = 0;\n\n        this.loadFolders();\n    }\n    static getDerivedStateFromProps(props, state) {\n        if (props.expertMode !== state.expertMode) {\n            return {expertMode: props.expertMode};\n        } else {\n            return null;\n        }\n    }\n\n    loadFolders() {\n        return this.browseFolder('/')\n            .then(folders => this.browseFolders([...this.state.expanded], folders))\n            .then(folders => this.setState({folders}, () => {\n                if (!this.findItem(this.state.selected)) {\n                    const parts = this.state.selected.split('/');\n                    while (parts.length && !this.findItem(parts.join('/'))) {\n                        parts.pop();\n                    }\n                    if (parts.length) {\n                        this.setState({selected: parts.join('/')}, () => this.scrollToSelected());\n                    } else {\n                        this.setState({selected: USER_DATA}, () => this.scrollToSelected());\n                    }\n                } else {\n                    this.scrollToSelected();\n                }\n            }));\n    }\n\n    scrollToSelected() {\n        if (this.mounted) {\n            const el = document.getElementById(this.state.selected);\n            el && el.scrollIntoView();\n        }\n    }\n\n    componentDidMount() {\n        this.mounted = true;\n        this.scrollToSelected();\n    }\n\n    componentWillUnmount() {\n        this.mounted = false;\n    }\n\n    browseFolders(foldersList, _newFolders, _resolve) {\n        if (!_newFolders) {\n            _newFolders = {};\n            Object.keys(this.state.folders).forEach(folder => _newFolders[folder] = this.state.folders[folder]);\n        }\n\n        if (!_resolve) {\n            return new Promise(resolve => this.browseFolders(foldersList, _newFolders, resolve)) ;\n        }\n\n        if (!foldersList || !foldersList.length) {\n            _resolve(_newFolders);\n        } else {\n            this.browseFolder(foldersList.shift(), _newFolders)\n                .then(() => setTimeout(() => this.browseFolders(foldersList, _newFolders, _resolve), 0))\n                .catch(() => setTimeout(() => this.browseFolders(foldersList, _newFolders, _resolve), 0))\n        }\n    }\n\n    browseFolder(folderId, _newFolders, _checkEmpty) {\n        if (!_newFolders) {\n            _newFolders = {};\n            Object.keys(this.state.folders).forEach(folder => _newFolders[folder] = this.state.folders[folder]);\n        }\n\n        if (_newFolders[folderId]) {\n            if (!_checkEmpty) {\n                return new Promise((resolve, reject) =>\n                    Promise.all(_newFolders[folderId].filter(item => item.folder).map(item =>\n                        this.browseFolder(item.id, _newFolders, true)\n                            .catch(error => {})))\n                        .then(() => resolve(_newFolders))\n                        .catch(error => reject(error)));\n            } else {\n                return Promise.resolve(_newFolders);\n            }\n        }\n\n        if (!folderId || folderId === '/') {\n            return this.props.socket.readMetaItems()\n                .then(objs => {\n                    const _folders = [];\n                    let userData = null;\n                    objs.forEach(obj => {\n                        const item = {\n                            id: obj._id,\n                            name: obj._id,\n                            title: (obj.common && obj.common.name) || obj._id,\n                            meta: true,\n                            from: obj.from,\n                            ts: obj.ts,\n                            color: obj.common && obj.common.color,\n                            icon: obj.common && obj.common.icon,\n                            folder: true,\n                            acl: obj.acl,\n                            level: 0\n                        };\n                        if (item.id === USER_DATA) {\n                            // user data must be first\n                            userData = item;\n                        } else {\n                            _folders.push(item);\n                        }\n                    });\n                    _folders.sort((a, b) => a.id > b.id ? 1 : (a.id < b.id ? -1 : 0));\n                    _folders.unshift(userData);\n\n                    _newFolders[folderId || '/'] = _folders;\n\n                    if (!_checkEmpty) {\n                        return Promise.all(_folders.filter(item => item.folder).map(item =>\n                            this.browseFolder(item.id, _newFolders, true).catch(error => {})))\n                        .then(() => _newFolders)\n                    } else {\n                        return _newFolders;\n                    }\n                });\n        } else {\n            const parts   = folderId.split('/');\n            const level   = parts.length;\n            const adapter = parts.shift();\n            const relPath = parts.join('/');\n\n            return this.props.socket.readDir(adapter, relPath)\n                .then(files => {\n                    const _folders = [];\n                    files.forEach(file => {\n                        const item = {\n                            id:       folderId + '/' + file.file,\n                            folder:   file.isDir,\n                            name:     file.file,\n                            size:     file.stats && file.stats.size,\n                            modified: file.modifiedAt,\n                            acl:      file.acl,\n                            level\n                        };\n                        _folders.push(item);\n                    });\n\n                    _folders.sort(sortFolders);\n                    _newFolders[folderId] = _folders;\n\n                    if (!_checkEmpty) {\n                        return Promise.all(_folders.filter(item => item.folder).map(item => this.browseFolder(item.id, _newFolders, true)))\n                            .then(() => _newFolders)\n                    } else {\n                        return _newFolders;\n                    }\n                });\n        }\n    }\n\n    toggleFolder(item, e) {\n        e && e.stopPropagation();\n        const expanded = [...this.state.expanded];\n        const pos = expanded.indexOf(item.id);\n        if (pos === -1) {\n            expanded.push(item.id);\n            expanded.sort();\n            window.localStorage.setItem('files.expanded', JSON.stringify(expanded));\n\n            if (!item.temp) {\n                return this.browseFolder(item.id)\n                    .then(folders => this.setState({expanded, folders}));\n            } else {\n                this.setState({expanded});\n            }\n        } else {\n            expanded.splice(pos, 1);\n            window.localStorage.setItem('files.expanded', JSON.stringify(expanded));\n            this.setState({expanded});\n        }\n    }\n\n    select(id, e) {\n        e && e.stopPropagation();\n        window.localStorage.setItem('files.selected', id);\n        this.setState({selected: id});\n    }\n\n    renderFolder(item, expanded) {\n        if (this.state.folders[item.id] && this.state.filterEmpty && !this.state.folders[item.id].length && item.id !== USER_DATA && !item.temp) {\n            return null;\n        }\n        const Icon = expanded ? OpenedFolderIcon : ClosedFolderIcon;\n        const padding = (item.level * this.levelPadding) || 5;\n        return (<div key={ item.id }\n                     id={ item.id }\n                     style={{ paddingLeft: padding }}\n                     onClick={e => this.select(item.id, e) }\n                     onDoubleClick={e => this.toggleFolder(item, e) }\n                     title={ item.title && typeof item.title === 'object' ? item.title[this.props.lang] : item.title || null}\n                     className={ clsx(\n                         this.props.classes['item' + this.state.viewType],\n                         this.props.classes['itemFolder' + this.state.viewType],\n                         this.state.selected === item.id && this.props.classes.itemSelected,\n                         item.temp && this.props.classes['itemFolderTemp'],\n                     )}>\n            <Icon className={ this.props.classes['itemFolderIcon' + this.state.viewType] } onClick={e => this.toggleFolder(item, e)}/>\n            <div className={ clsx(this.props.classes['itemName' + this.state.viewType], this.props.classes['itemNameFolder' + this.state.viewType])}>{ item.name === USER_DATA ? this.props.t('User files') : item.name }</div>\n            <div className={ this.props.classes['itemSize' + this.state.viewType]}>{ this.state.folders[item.id] ? this.state.folders[item.id].length : '' }</div>\n\n            { this.formatAcl(item.acl) }\n\n            { this.props.allowDownload ? <div className={ this.props.classes['itemDownloadButton' + this.state.viewType] }/> : null }\n\n            { this.props.allowDelete && this.state.folders[item.id] && this.state.folders[item.id].length && (this.state.expertMode || item.id.startsWith(USER_DATA) || item.id.startsWith('vis.0/')) ?\n                (<IconButton aria-label=\"delete\"\n                    onClick={e => {\n                       e.stopPropagation();\n                       if (this.suppressDeleteConfirm > Date.now()) {\n                           this.deleteItem(item.id);\n                       } else {\n                           this.setState({deleteItem: item.id});\n                       }\n                    }}\n                    className={this.props.classes['itemDeleteButton' + this.state.viewType]}\n                >\n                <DeleteIcon fontSize=\"small\" />\n            </IconButton>) : null }\n        </div>);\n    }\n\n    formatSize(size) {\n        return <div className={this.props.classes['itemSize' + this.state.viewType]}>{ size ? Utils.formatBytes(size) : '' }</div>;\n    }\n\n    formatAcl(acl) {\n        let access = acl && (acl.permissions || acl.object);\n        if (access) {\n            access = access.toString(16).padStart(3, '0');\n        }\n\n        return <div className={this.props.classes['itemAccess' + this.state.viewType]}>{ access }</div>;\n    }\n\n    getFileIcon(ext) {\n        switch (ext) {\n            case 'json':\n                return (<JsonIcon className={this.props.classes['itemIcon' + this.state.viewType]} />);\n\n            case 'css':\n                return (<CssIcon className={this.props.classes['itemIcon' + this.state.viewType]} />);\n\n            case 'js':\n            case 'ts':\n                return (<JSIcon className={this.props.classes['itemIcon' + this.state.viewType]} />);\n\n            case 'mp3':\n            case 'ogg':\n            case 'wav':\n            case 'm4a':\n            case 'mp4':\n            case 'flac':\n                return (<MusicIcon className={this.props.classes['itemIcon' + this.state.viewType]} />);\n\n            default:\n                return (<FileIcon className={this.props.classes['itemIcon' + this.state.viewType]} />);\n        }\n    }\n\n    renderFile(item) {\n        const padding = (item.level * this.levelPadding) || 5;\n        const ext = Utils.getFileExtension(item.name);\n\n        return (<div\n            key={ item.id }\n            id={ item.id }\n            onClick={e => this.select(item.id, e) }\n            style={{ paddingLeft: padding }}\n            className={ clsx(this.props.classes['item' + this.state.viewType], this.props.classes['itemFile' + this.state.viewType], this.state.selected === item.id && this.props.classes.itemSelected) }\n        >\n            { ext === 'png' || ext === 'jpg' || ext === 'svg' ?\n                <img onError={e => {e.target.onerror = null; e.target.src = NoImage}} className={this.props.classes['itemImage' + this.state.viewType]} src={'files/' + item.id} alt={item.name}/> : this.getFileIcon(ext)}\n            <div className={this.props.classes['itemName' + this.state.viewType]}>{ item.name }</div>\n            {this.formatSize(item.size)}\n            {this.formatAcl(item.acl)}\n\n            { this.props.allowDownload ? <IconButton\n                download\n                href={'files/' + item.id}\n                className={this.props.classes['itemDownloadButton' + this.state.viewType]}\n                onClick={e => {\n                    e.stopPropagation();\n                }}\n            ><DownloadIcon/></IconButton> : null }\n\n            { this.props.allowDelete && (this.state.expertMode || item.id.startsWith(USER_DATA) || item.id.startsWith('vis.0/')) ?\n                <IconButton aria-label=\"delete\"\n                    onClick={e => {\n                        e.stopPropagation();\n                        if (this.suppressDeleteConfirm > Date.now()) {\n                            this.deleteItem(item.id);\n                        } else {\n                            this.setState({deleteItem: item.id});\n                        }\n                    }}\n                    className={this.props.classes['itemDeleteButton' + this.state.viewType]}\n                >\n                <DeleteIcon fontSize=\"small\" />\n            </IconButton> : null}\n        </div>);\n    }\n\n    renderItems(folderId) {\n        if (folderId &&\n            folderId !== '/' &&\n            !this.state.expertMode &&\n            !folderId.startsWith(USER_DATA) &&\n            folderId !== USER_DATA &&\n            folderId !== 'vis.0' &&\n            !folderId.startsWith('vis.0/')\n        ) {\n            return null;\n        }\n\n        if (this.state.folders[folderId]) {\n            return this.state.folders[folderId].map(item => {\n                const res = [];\n                if (item.id &&\n                    item.id !== '/' &&\n                    !this.state.expertMode &&\n                    !item.id.startsWith(USER_DATA) &&\n                    item.id !== USER_DATA &&\n                    item.id !== 'vis.0' &&\n                    !item.id.startsWith('vis.0/')) {\n                    return null;\n                }\n\n                if (item.folder) {\n                    const expanded = this.state.expanded.includes(item.id);\n\n                    res.push(this.renderFolder(item, expanded));\n                    if (this.state.folders[item.id] && expanded) {\n                        res.push(this.renderItems(item.id))\n                    }\n                } else {\n                    res.push(this.renderFile(item));\n                }\n\n                return res;\n            });\n        } else {\n            return (<CircularProgress key={folderId} color=\"secondary\" size={24}/>);\n        }\n    }\n\n    renderToolbar() {\n        return <Toolbar key=\"toolbar\" variant=\"dense\">\n            <IconButton\n                edge=\"start\"\n                title={this.props.t('Hide empty folders')}\n                className={this.props.classes.menuButton}\n                color={this.state.filterEmpty ? 'secondary' : 'inherit'}\n                aria-label=\"filter empty\"\n                onClick={() => {\n                    window.localStorage.setItem('file.empty', !this.state.filterEmpty);\n                    this.setState({filterEmpty: !this.state.filterEmpty});\n                }}\n            ><EmptyFilterIcon /></IconButton>\n            <IconButton\n                edge=\"start\"\n                title={this.props.t('Reload files')}\n                className={this.props.classes.menuButton}\n                color={'inherit'}\n                aria-label=\"filter empty\"\n                onClick={() => this.setState({folders: {}}, () => this.loadFolders())}\n            ><RefreshIcon /></IconButton>\n            { this.props.allowCreateFolder ? <IconButton\n                edge=\"start\"\n                disabled={this.state.expertMode ? !this.state.selected : !this.state.selected.startsWith('vis.0') && !this.state.selected.startsWith(USER_DATA)}\n                title={this.props.t('Create folder')}\n                className={this.props.classes.menuButton}\n                color={'inherit'}\n                aria-label=\"add folder\"\n                onClick={() => this.setState({addFolder: true}) }\n            ><AddFolderIcon /></IconButton> : null }\n            { this.props.allowUpload ? <IconButton\n                edge=\"start\"\n                disabled={this.state.expertMode ? !this.state.selected : !this.state.selected.startsWith('vis.0') && !this.state.selected.startsWith(USER_DATA)}\n                title={this.props.t('Upload file')}\n                className={this.props.classes.menuButton}\n                color={'inherit'}\n                aria-label=\"upload file\"\n                onClick={() => {\n                    this.setState({uploadFile: true})\n                } }\n            ><UploadIcon /></IconButton> : null }\n        </Toolbar>;\n    }\n\n    findItem(id) {\n        const parts = id.split('/');\n        parts.pop();\n        const parentFolder = parts.join('/');\n        return this.state.folders[parentFolder || '/'].find(item => item.id === id);\n    }\n\n    renderInputDialog() {\n        if (this.state.addFolder) {\n            let parentFolder = this.findFirstFolder(this.state.selected);\n\n            if (!parentFolder) {\n                return window.alert(this.props.t('Invalid parent folder!'));\n            }\n\n            return <TextInputDialog key=\"inputDialog\"\n                applyText={this.props.t('Create')}\n                cancelText={this.props.t('Cancel')}\n                titleText={this.props.t('Create new folder in %s', this.state.selected)}\n                promptText={this.props.t('If no file will be created in the folder, it will disappear after the browser closed')}\n                labelText={this.props.t('Folder name')}\n                verify={text => this.state.folders[parentFolder].find(item => item.name === text) ? '' : this.props.t('Duplicate name')}\n                onClose={name => {\n                    if (name) {\n                        const folders = {};\n                        Object.keys(this.state.folders).forEach(folder => folders[folder] = this.state.folders[folder]);\n                        const parent = this.findItem(parentFolder);\n                        folders[parentFolder].push({\n                            id: parentFolder + '/' + name,\n                            level: parent.level + 1,\n                            name,\n                            folder: true,\n                            temp: true,\n                        });\n\n                        folders[parentFolder].sort(sortFolders);\n\n                        folders[parentFolder + '/' + name] = [];\n                        const expanded = [...this.state.expanded];\n                        if (!expanded.includes(parentFolder)) {\n                            expanded.push(parentFolder);\n                            expanded.sort();\n                        }\n                        this.setState({addFolder: false, folders, expanded});\n                    } else {\n                        this.setState({addFolder: false});\n                    }\n                }}\n                replace={text => text.replace(/[^-_\\w\\d]/, '_')}\n            />;\n        } else {\n            return null;\n        }\n    }\n\n    uploadFile(fileName, data) {\n        const parts = fileName.split('/');\n        const adapter = parts.shift();\n        return this.props.socket.writeFile64(adapter, parts.join('/'), data);\n    }\n\n    findFirstFolder(id) {\n        let parentFolder = id;\n        // find folder\n        if (!this.findItem(parentFolder).folder) {\n            const parts = parentFolder.split('/');\n            parts.pop();\n            parentFolder = '';\n            while (parts.length) {\n                const item = this.findItem(parts.join('/'));\n                if (item && item.folder) {\n                    parentFolder = parts.join('/');\n                    break;\n                }\n            }\n        }\n\n        return parentFolder;\n    }\n\n    renderUpload() {\n        if (this.state.uploadFile) {\n            return [\n                <Fab key=\"close\" color=\"primary\" aria-label=\"close\" className={this.props.classes.uploadCloseButton}\n                     onClick={() => this.setState({uploadFile: false})}>\n                    <CloseIcon />\n                </Fab>,\n                <Dropzone\n                    key=\"dropzone\"\n                    onDragEnter={() => this.setState({uploadFile: 'dragging'})}\n                    onDragLeave={() => this.setState({uploadFile: true})}\n                    onDrop={acceptedFiles => {\n                        let count = acceptedFiles.length;\n                        acceptedFiles.forEach(file => {\n                            const reader = new FileReader();\n\n                            reader.onabort = () => console.log('file reading was aborted');\n                            reader.onerror = () => console.log('file reading has failed');\n                            reader.onload  = () => {\n                                let parentFolder = this.findFirstFolder(this.state.selected);\n\n                                if (!parentFolder) {\n                                    return window.alert(this.props.t('Invalid parent folder!'));\n                                }\n\n                                this.uploadFile(parentFolder + '/' + file.name, reader.result)\n                                    .then(() => {\n                                        if (!--count) {\n                                            const folders = {};\n                                            Object.keys(this.state.folders).forEach(name => {\n                                                if (name !== parentFolder && !name.startsWith(parentFolder + '/')) {\n                                                    folders[name] = this.state.folders[name];\n                                                }\n                                            });\n                                            this.setState({uploadFile: false, folders}, () =>\n                                                this.browseFolders([...this.state.expanded], folders)\n                                                    .then(folders => this.setState({folders})));\n                                        }\n                                    });\n                            };\n                            reader.readAsArrayBuffer(file)\n                        });\n                    }}\n                >\n                    {({ getRootProps, getInputProps }) => (\n                        <div className={clsx(this.props.classes.uploadDiv, this.state.uploadFile === 'dragging' && this.props.classes.uploadDivDragging)}\n                             {...getRootProps()}>\n                            <input {...getInputProps()} />\n                            <div className={this.props.classes.uploadCenterDiv}>\n                                <div className={this.props.classes.uploadCenterTextAndIcon}>\n                                    <UploadIcon className={this.props.classes.uploadCenterIcon}/>\n                                    <div className={this.props.classes.uploadCenterText}>{\n                                        this.state.uploadFile === 'dragging' ? this.props.t('Drop file here') :\n                                            this.props.t('Place your files here or click here to open the browse dialog')}</div>\n                                </div>\n                            </div>\n                        </div>)}\n                </Dropzone>\n            ];\n        } else {\n            return null;\n        }\n    }\n\n    deleteRecursive(id) {\n        const item = this.findItem(id);\n        if (item.folder) {\n            return Promise.all(this.state.folders[id].map(item => this.deleteRecursive(item.id)));\n        } else {\n            const parts = id.split('/');\n            const adapter = parts.shift();\n            if (parts.length) {\n                return this.props.socket.deleteFile(adapter, parts.join('/'));\n            } else {\n                return Promise.resolve();\n            }\n        }\n    }\n\n    deleteItem(deleteItem) {\n        deleteItem = deleteItem || this.state.deleteItem;\n\n        this.setState({deleteItem: ''}, () =>\n            this.deleteRecursive(deleteItem)\n                .then(() => {\n                    let parentFolder = this.findFirstFolder(deleteItem);\n                    const folders = {};\n                    Object.keys(this.state.folders).forEach(name => {\n                        if (name !== parentFolder && !name.startsWith(parentFolder + '/')) {\n                            folders[name] = this.state.folders[name];\n                        }\n                    });\n                    this.setState({folders}, () =>\n                        this.browseFolders([...this.state.expanded], folders)\n                            .then(folders => this.setState({folders})));\n                })\n        );\n    }\n\n    renderDeleteDialog() {\n        if (this.state.deleteItem) {\n            return <Dialog key=\"deleteDialog\" open={true} onClose={() => this.setState({deleteItem: ''})} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">{this.props.t('Confirm deletion of %s', this.state.deleteItem.split('/').pop())}</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        {this.props.t('Are you sure?')}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => this.setState({deleteItem: ''})} >{this.props.t('Cancel')}</Button>\n                    <Button onClick={() => {\n                        this.suppressDeleteConfirm = new Date() + 60000 * 5;\n                        this.deleteItem();\n                    }} >{this.props.t('Delete (no confirm for 5 mins)')}</Button>\n                    <Button onClick={() => this.deleteItem()} color=\"primary\">{this.props.t('Delete')}</Button>\n                </DialogActions>\n            </Dialog>;\n        } else {\n            return false;\n        }\n    }\n\n    render() {\n        if (!this.props.ready) {\n            return (\n                <LinearProgress />\n            );\n        }\n\n        return [\n            this.props.showToolbar ? this.renderToolbar() : null,\n            (<div key=\"items\" className={this.props.classes.filesDiv}>\n                { this.renderItems('/') }\n            </div>),\n            this.props.allowUpload ? this.renderInputDialog() : null,\n            this.props.allowUpload ? this.renderUpload() : null,\n            this.props.allowDelete ? this.renderDeleteDialog() : null,\n        ];\n    }\n}\n\nFileBrowser.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    socket: PropTypes.object,\n    ready: PropTypes.bool,\n    expertMode: PropTypes.bool,\n    showToolbar: PropTypes.bool,\n    allowUpload: PropTypes.bool,\n    allowDownload: PropTypes.bool,\n    allowCreateFolder: PropTypes.bool,\n    allowDelete: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(FileBrowser));","import withWidth from '@material-ui/core/withWidth';\nimport {withStyles} from '@material-ui/core/styles';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\n\nimport FileBrowser from \"../components/FileBrowser\";\n\nconst styles = theme => ({\n    root: {\n        margin: theme.spacing(1),\n        height: 'calc(100% - 10px)',\n        width: 'calc(100% - ' + (theme.spacing(2) + 10) + 'px)',\n        overflow: 'hidden',\n        position: 'relative',\n    }\n});\n\nclass Files extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n\n        };\n    }\n\n    render() {\n        if (!this.props.ready) {\n            return (\n                <LinearProgress />\n            );\n        }\n\n        return <Paper className={ this.props.classes.root }>\n            <FileBrowser\n                ready={ this.props.ready }\n                socket={ this.props.socket }\n                lang={ this.props.lang }\n                t={ this.props.t }\n                showToolbar={ true }\n                allowUpload={ true }\n                allowDownload={ true }\n                allowCreateFolder={ true }\n                allowDelete={ true }\n                expertMode={ this.props.expertMode }\n            />\n        </Paper>;\n    }\n}\n\nFiles.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    socket: PropTypes.object,\n    ready: PropTypes.bool,\n    expertMode: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(Files));","// @flow\nimport { Component } from 'react';\nimport type { Node } from 'react';\n\nimport type { RowMetadata } from '../model/row';\n\n\ntype Props = {\n  grow?: number,\n  basis?: string, // <length> | auto\n  width?: string, // <length> | auto\n\n  renderCell: (rowData: any, rowMetadata: RowMetadata, toggleChildren: () => void) => Node,\n  className?: string,\n};\n\ntype State = { };\n\nexport default class Column extends Component<Props, State> {\n\n  render() { return null; }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport type { Node } from 'react';\n\nimport type { RowMetadata } from '../model/row';\n\n\ntype Props = {\n  //grow?: number,\n  //basis?: string, // <length> | auto\n  width: string,  // <length> | auto\n\n  rowData: any,\n  rowMetadata: RowMetadata,\n  toggle: () => void,\n  renderCell: (rowData: any, rowMetadata: RowMetadata, toggleChildren: () => void) => Node,\n  className?: string,\n  classNameColumn?: string,\n};\n\ntype State = {\n  width: string\n  //_grow: number,\n  //_basis: string,\n};\n\nexport default class ColumnWrapper extends Component<Props, State> {\n  state = {\n    //_grow: 1,\n    //_basis: 'auto',\n      width: 'auto'\n  };\n\n  render() {\n    const { width, rowData, toggle, rowMetadata, renderCell, className, classNameColumn} = this.props;\n    const { _width } = this.state;\n\n    //const flexGrow = (grow != null) ? grow : _grow;\n    //const flexBasis = (basis != null) ? basis : _basis;\n    const cWidth = (width != null) ? width : _width;\n\n    const baseClass = (className ? `cp_tree-table_column ${className || ''}`: 'cp_tree-table_column') + ' ' + (classNameColumn || '');\n    return (\n      <div className={baseClass}\n        style={{ ...STYLE_COLUMN, width: cWidth/*flexGrow: flexGrow, flexBasis: flexBasis */}}>\n        { renderCell(rowData, rowMetadata, toggle) }\n      </div>\n    );\n  }\n}\n\nconst STYLE_COLUMN = {\n  boxSizing: 'border-box',\n  position: 'relative',\n  overflow: 'hidden',\n};\n","// @flow\nimport React, { Component, Children } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport ColumnWrapper from './ColumnWrapper';\n\n\ntype Props = {\n  row: any,\n  columns: ChildrenArray<Element<typeof Column>>,\n\n  hasVisibleChildren: boolean, // Metadata\n  classNamePartlyVisible?: string,\n  classNameColumn?: string,\n  classNameSelected?: string,\n  classNameRow?: string,\n  index: number,\n  selected?: string,\n  onToggle: () => void,\n  onRowClick: (data: object) => void,\n};\n\ntype State = {\n  overscanHeight: number,\n  height: number,\n  topOffset: number,\n};\n\nexport default class VirtualListRow extends Component<Props, State> {\n\n  state = {\n    overscanHeight: 100,\n    height: 0,\n    topOffset: 0,\n  };\n\n  render() {\n    const { row, hasVisibleChildren, index, onToggle, columns, classNameRow, classNameColumn, selected, classNameSelected } = this.props;\n\n    const metadata = { ...row.getMetadata(), hasVisibleChildren: hasVisibleChildren };\n\n    const style = {...STYLE_ROW, height: row.getHeight() + 'px'};\n\n    return (\n      <div className={'cp_tree-table_row ' + (classNameRow || '') + (selected === row.data.id ? ' ' + classNameSelected : '')}\n        style={style}\n        data-rindex={index}\n        onClick={() => this.props.onRowClick && this.props.onRowClick(row.data, metadata, onToggle)}\n        onDoubleClick={() => this.props.onRowClick && this.props.onRowClick(row.data, metadata, onToggle, true)}\n        data-depth={row.depth} >\n      \n        {Children.toArray(columns).map((column, index) => {\n          return (\n            <ColumnWrapper key={index}\n              {...column.props}\n              classNameColumn={classNameColumn}\n              rowData={row.data}\n              toggle={onToggle}\n              rowMetadata={metadata}/>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nconst STYLE_ROW = {\n  // display: 'flex',\n\n  boxSizing: 'border-box',\n  position: 'relative',\n  overflow: 'hidden',\n  width: '100%',\n};\n","// @flow\nimport BTLeaf from './bt_leaf';\n\n\nexport type TreeDataRow = {\n  data: any,\n  height?: number,\n  children?: Array<TreeDataRow>,\n};\n\nexport type RowMetadata = {\n  depth: number;\n  hasChildren: boolean;\n  hasVisibleChildren: boolean;\n};\n\nexport type PartialRowMetadata = {\n  depth: number;\n  hasChildren: boolean;\n};\n\nexport default class Row {\n  parent: ?BTLeaf = null;\n  depth: number;      // tree depth\n  data: any;          // row data\n\n  _hasChildren: boolean;\n\n  _height: number = 26;    // height in px (26px - fallback value)\n  _cacheHeight: number = 26;\n\n  constructor(data: any, hasChildren: boolean, depth: number = 0, isVisible: boolean, height: ?number) {\n    this.data = data;\n    this.depth = depth;\n    this._hasChildren = hasChildren;\n\n    if (height != null) {\n      this._height = height;\n      this._cacheHeight = height;\n    }\n\n    if (!isVisible) {\n      this._height = 0;\n    }\n  }\n\n  setHeight(value: number) {\n    this._updateHeight(value);\n    if (value > 0) {\n      this._cacheHeight = value;\n    }\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  isVisible(): boolean {\n    return this._height > 0;\n  }\n\n  getMetadata(): PartialRowMetadata {\n    return {\n      depth: this.depth,\n      hasChildren: this._hasChildren,\n    };\n  }\n\n  toggle(): void {\n    if (this._height > 0) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  hide(): void {\n    this._cacheHeight = this._height;\n    this._updateHeight(0);\n  }\n\n  show(): void {\n    this._updateHeight(this._cacheHeight);\n  }\n\n  _updateHeight(value: number) {\n    let diff = value - this._height;\n    if (diff) {\n      for (let n = this; n; n = n.parent) {\n        n._height += diff;\n      }\n    }\n  }\n}\n","// @flow\nimport Row from '../model/row';\nimport BTRoot from '../model/bt_root';\nimport type { TreeDataRow  } from '../model/row';\n\n\nexport const findNodeData = (root: BTRoot, dataNode: TreeDataRow): ?Row => {\n  let result;\n\n  root.mapAll((row: Row) => {\n    if (dataNode.data === row.data) {\n      result = row;\n      return true;\n    }\n  });\n  return result;\n}\n","// @flow\nimport Row from '../model/row';\nimport type { TreeDataRow  } from '../model/row';\n\nexport * from './search';\n\n\nexport const processData = (data: Array<TreeDataRow>, rowHeightDefault: ?number = null): Array<Row> => {\n  return processLevel(data, rowHeightDefault, 0, true);\n};\n\nconst processLevel = (data: Array<TreeDataRow>, rowHeightDefault: ?number, depth: number = 0, isVisible: boolean = false): Array<Row> => {\n  let result: Array<Row> = [];\n  for (var i = 0; i < data.length; i++) {\n    const hasChildren: boolean = (data[i].children != null && data[i].children.length > 0);\n\n    result.push(new Row(data[i].data, hasChildren, depth, isVisible, data[i].height || rowHeightDefault));\n\n    if (data[i].children && data[i].children.length > 0) {\n      processLevel(data[i].children, rowHeightDefault, depth + 1).forEach((row) => {\n        result.push(row);\n      });\n    }\n  }\n  return result;\n};\n\nexport const indexOf = (needle: any, haystack: Array<any>): number => {\n  for (var i = 0; i < haystack.length; i++) {\n    if (haystack[i] === needle) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nexport const noop = () => undefined;\n","// @flow\nimport BTLeaf from './bt_leaf';\nimport Row from './row';\nimport { indexOf } from '../util';\n\n\nexport default class BTNode {\n  parent: ?BTNode = null;\n  children: Array<BTNode | BTLeaf> = [];\n\n  _size: number = 0;\n  _height: number = 0;\n\n\n  constructor(children: Array<BTNode | BTLeaf>) {\n    this.children = children;\n\n    let size = 0, height = 0;\n    for (let i = 0; i < children.length; ++i) {\n      let ch = children[i];\n      size += ch.getSize();\n      height += ch.getHeight();\n      ch.parent = this;\n    }\n\n    this._size = size;\n    this._height = height;\n  }\n\n  getSize(): number {\n    return this._size;\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  // https://github.com/codemirror/CodeMirror/blob/e03ef21df390753eb35ff8426dd99b1be4d29d74/src/model/chunk.js#L79\n  removeInner(at: number, n: number) {\n    this._size -= n;\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at < sz) {\n        let rm = Math.min(n, sz - at), oldHeight = child.getHeight();\n        child.removeInner(at, rm);\n        this._height -= oldHeight - child.getHeight();\n        if (sz === rm) {\n          this.children.splice(i--, 1);\n          child.parent = null;\n        }\n        n -= rm;\n        if (n === 0) {\n          break;\n        }\n        at = 0;\n      } else {\n        at -= sz;\n      }\n    }\n    // If the result is smaller than 25 rows, ensure that it is a\n    // single leaf node.\n    if (this.getSize() - n < 25 &&\n       (this.children.length > 1 || !(this.children[0] instanceof BTLeaf))) {\n      let rows = [];\n      this.collapse(rows);\n      this.children = [new BTLeaf(rows)];\n      this.children[0].parent = this;\n    }\n  }\n\n  collapse(rows: Array<Row>) {\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].collapse(rows);\n    }\n  }\n\n  // https://github.com/codemirror/CodeMirror/blob/e03ef21df390753eb35ff8426dd99b1be4d29d74/src/model/chunk.js#L107\n  insertInner(at: number, rows: Array<Row>, height: number) {\n    this._size += rows.length;\n    this._height += height;\n\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at <= sz) {\n        child.insertInner(at, rows, height);\n        if (child instanceof BTLeaf && child.getSize() > 50) {\n          // To avoid memory thrashing when child.rows is huge (e.g. first view of a large file), it's never spliced.\n          // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n          let remaining = child.getSize() % 25 + 25;\n          for (let pos = remaining; pos < child.getSize();) {\n            let leaf = new BTLeaf(child.rows.slice(pos, pos += 25));\n            child._height -= leaf.getHeight();\n            this.children.splice(++i, 0, leaf);\n            leaf.parent = this;\n          }\n          child.rows = child.rows.slice(0, remaining);\n          this.maybeSpill();\n        }\n        break;\n      }\n      at -= sz;\n    }\n  }\n\n  // When a node has grown, check whether it should be split.\n  maybeSpill() {\n    if (this.children.length <= 10) {\n      return;\n    }\n    let me: BTNode = this;\n    do {\n      let spilled = me.children.splice(me.children.length - 5, 5);\n      let sibling = new BTNode(spilled);\n      if (!me.parent) { // Become the parent node\n        let copy = new BTNode(me.children);\n        copy.parent = me;\n        me.children = [copy, sibling];\n        me = copy;\n     } else {\n        me._size -= sibling.getSize();\n        me._height -= sibling.getHeight();\n\n        let parent: ?BTNode = me.parent;\n        if (parent && parent.children) {\n          let myIndex = indexOf(me, parent.children);\n          parent.children.splice(myIndex + 1, 0, sibling);\n        }\n      }\n      sibling.parent = me.parent;\n    } while (me.children.length > 10)\n    if (me.parent) {\n      me.parent.maybeSpill();\n    }\n  }\n\n  mapRange(at: number, n: number, op: (data: Row) => ?boolean): ?boolean {\n    for (let i = 0; i < this.children.length; i++) {\n      let child = this.children[i], sz = child.getSize();\n      if (at < sz) {\n        let used = Math.min(n, sz - at);\n        if (child.mapRange(at, used, op)) {\n          return true;\n        }\n        n -= used;\n        if (n === 0) {\n          break;\n        }\n        at = 0;\n      } else {\n        at -= sz;\n      }\n    }\n  }\n\n  mapAll(op: (data: Row) => ?boolean): ?boolean {\n    return this.mapRange(0, this._size, op);\n  }\n}\n","// @flow\nimport BTNode from './bt_node';\nimport Row from './row';\n\n\nexport default class BTLeaf {\n  parent: ?BTNode = null;\n  rows: Array<Row> = [];\n\n  _height: number = 0;\n\n  constructor(rows: Array<Row> = []) {\n    this.rows = rows;\n\n    let height = 0;\n    for (let i = 0; i < rows.length; ++i) {\n      rows[i].parent = this;\n      height += rows[i].getHeight();\n    }\n    this._height = height;\n  }\n\n  getSize(): number {\n    return this.rows.length;\n  }\n\n  getHeight(): number {\n    return this._height;\n  }\n\n  // Remove n rows at offset 'at'.\n  removeInner(at: number, n: number) {\n    for (let i = at, e = at + n; i < e; ++i) {\n      let row = this.rows[i];\n      this._height -= row.getHeight();\n\n      row.parent = null;\n    }\n    this.rows.splice(at, n);\n  }\n\n  collapse(rows: Array<Row>) {\n    rows.push.apply(rows, this.rows)\n  }\n\n  // Insert the given array of rows at offset 'at', count them as\n  // having the given height.\n  insertInner(at: number, rows: Array<Row>, height: number) {\n    this._height += height\n    this.rows = this.rows.slice(0, at).concat(rows).concat(this.rows.slice(at))\n    for (let i = 0; i < rows.length; ++i) {\n      rows[i].parent = this;\n    }\n  }\n\n  mapRange(at: number, n: number, op: (data: Row) => ?boolean): ?boolean {\n    for (let e = at + n; at < e; ++at) {\n      if (op(this.rows[at])) {\n        return true;\n      }\n    }\n  }\n}\n","// @flow\nimport BTLeaf from './bt_leaf';\nimport BTNode from './bt_node';\nimport Row from './row';\nimport { indexOf } from '../util';\n\n\nexport default class BTRoot extends BTNode {\n  constructor(data: Array<Row> = []) {\n    super([new BTLeaf([])]);\n\n    this.insert(0, data);\n  }\n\n  insert(at: number, rows: Array<Row>) {\n    let height = 0\n    for (let i = 0; i < rows.length; ++i) {\n      height += rows[i].getHeight();\n    }\n    super.insertInner(at, rows, height);\n  }\n\n  remove(at: number, n: number) {\n    super.removeInner(at, n);\n  }\n\n  getRow(index: number): Row {\n    if (index < 0 || index >= this.getSize()) {\n      throw new Error('Invalid index! No row at index: ' + index);\n    }\n    let node = this;\n    while (node instanceof BTNode) {\n      for (let i = 0;; i++) {\n        let child = node.children[i], sz = child.getSize();\n        if (index < sz) {\n          node = child;\n          break;\n        }\n        index -= sz;\n      }\n    }\n    return node.rows[index];\n  }\n\n  getRowIndex(row: Row): number {\n    if (row.parent == null) {\n      throw new Error('Invalid row object! No parent node: (row.parent == null)');\n    }\n    let cur = row.parent, index = indexOf(row, cur.rows);\n    for (let chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (let i = 0;; i++) {\n        if (chunk.children[i] === cur) {\n          break;\n        }\n        index += chunk.children[i].getSize();\n      }\n    }\n    return index;\n  }\n\n  getIndexAtY(y: number): number {\n    if (y < 0 || y > this.getHeight()) {\n      throw new Error('Invalid y position! No row at y: ' + y);\n    }\n\n    let n = 0, height = y;\n    let node = this;\n    do {\n      let ch = 0;\n      for (let i = 0; i < node.children.length; i++) {\n        let child = node.children[i];\n        ch = child.getHeight();\n        if (height < ch) {\n          node = child;\n          break;\n        }\n        height -= ch;\n        n += child.getSize();\n      }\n      if (height >= ch) {\n        return n;\n      }\n    } while (!node.rows);\n\n    let i = 0;\n    if (node instanceof BTLeaf) {\n      for (; i < node.getSize(); i++) {\n        let row = node.rows[i], rHeight = row.getHeight();\n        if (height < rHeight) {\n          break;\n        }\n        height -= rHeight;\n      }\n    }\n    return n + i;\n  }\n  \n  getYAtIndex(index: number): number {\n    let row = this.getRow(index);\n    if (row.parent == null) {\n      throw new Error('Invalid row object! No parent node: (row.parent == null)');\n    }\n\n    let height = 0, chunk = row.parent;\n    for (let i = 0; i < chunk.rows.length; i++) {\n      let rowObj = chunk.rows[i];\n      if (rowObj === row) {\n        break;\n      } else {\n        height += rowObj.getHeight();\n      }\n    }\n    for (let p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (let i = 0; i < p.children.length; i++) {\n        let cur = p.children[i];\n        if (cur === chunk) {\n          break\n        } else {\n          height += cur.getHeight();\n        }\n      }\n    }\n    return height;\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport VirtualListRow from './VirtualListRow';\n\nimport BTRoot from '../model/bt_root';\nimport Row from '../model/row';\n\n\ntype Props = {\n  root: BTRoot,\n  columns: ChildrenArray<Element<typeof Column>>,\n\n  height: number,\n  onToggle: (row: Row) => void,\n  onRowClick: (data: object) => void,\n  onScroll: (scrollTop: number) => void,\n  className?: string,\n  classNamePartlyVisible?: string,\n  classNameColumn?: string,\n  classNameMover?: string,\n  classNameRow?: string,\n  classNameInner?: string,\n  selected?: string,\n  classNameSelected?: string,\n};\n\ntype State = {\n  overscanHeight: number,\n  height: number,\n  topOffset: number,\n};\n\ntype RowData = {\n  row: Row,\n  hasVisibleChildren: boolean,\n};\n\nexport default class VirtualList extends Component<Props, State> {\n\n  state = {\n    overscanHeight: 100,\n    height: 0,\n    topOffset: 0,\n  };\n\n  container: ?HTMLElement;\n\n  componentDidUpdate() {\n    this._setHeight();\n  }\n\n  componentDidMount() {\n    this._setHeight();\n    window.addEventListener(\"resize\", this._setHeight);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this._setHeight);\n  }\n\n  render() {\n    const { root, columns, onToggle, className, classNameColumn, onRowClick, classNamePartlyVisible, classNameMover, classNameRow, selected, classNameSelected, classNameInner} = this.props;\n    const { overscanHeight, height, topOffset } = this.state;\n\n    const startYMax = Math.max(0, root.getHeight() - height - (overscanHeight * 2));\n    const startY = Math.min(startYMax, Math.max(0, topOffset - overscanHeight));\n    let startIndex = root.getIndexAtY(startY);\n\n    const endY = Math.min(root.getHeight(), topOffset + height + overscanHeight);\n    let endIndex = root.getIndexAtY(endY);\n\n    const contentTopOffset =  root.getYAtIndex(startIndex);\n\n    let visibleRowsData: Array<RowData> = [], lastVisibleRowIndex;\n    root.mapRange(startIndex, endIndex - startIndex, (row: Row) => {\n      if (row.isVisible()) {\n        if (lastVisibleRowIndex != null && !visibleRowsData[lastVisibleRowIndex].hasVisibleChildren) {\n          const data = visibleRowsData[lastVisibleRowIndex];\n          \n          if (data != null && data.row.depth === row.depth - 1 && !data.hasVisibleChildren) {\n            visibleRowsData[lastVisibleRowIndex].hasVisibleChildren = true;\n          }\n        }\n\n        lastVisibleRowIndex = visibleRowsData.length;\n        visibleRowsData.push({\n          row: row,\n          hasVisibleChildren: false,\n        });\n      }\n    });\n\n    let visibleRows = [];\n    let relativeIndex = 0;\n    visibleRowsData.forEach((data: RowData) => {\n        (data.row.data.visible === undefined || data.row.data.visible || data.row.data.hasVisibleChildren) && visibleRows.push(\n        <VirtualListRow\n          row={data.row}\n          columns={columns}\n          selected={selected}\n          onRowClick={onRowClick}\n          classNameSelected={classNameSelected}\n          classNameColumn={classNameColumn}\n          classNameRow={classNameRow + (!data.row.data.visible && classNamePartlyVisible && data.row.data.hasVisibleChildren ? ' ' + classNamePartlyVisible : '')}\n          hasVisibleChildren={data.hasVisibleChildren}\n          index={relativeIndex}\n          key={relativeIndex++}\n          onToggle={() => onToggle(data.row)}/>\n      );\n    });\n\n    return (\n      <div className={className}\n        style={{ ...STYLE_LIST, height: this.props.height + 'px', }}\n        ref={elem => {this.container = elem}}\n        onScroll={this._handleScroll}>\n\n        <div style={{ ...STYLE_WRAPPER, height: (root.getHeight()) + 'px', }} className={classNameInner || ''}>\n          <div style={{ ...STYLE_CONTENT, top: (contentTopOffset) + 'px' }}\n            className={'cp_tree-table_mover ' + (classNameMover || '')}>\n            {visibleRows}\n          </div>\n        </div>\n\n      </div>\n    );\n  }\n\n  scrollTop(posY: number = 0) {\n    if (this.container) {\n      this.container.parentNode.scrollTop = posY;\n    }\n  }\n\n  // virtual scroll\n  _handleScroll = () => {\n    const { onScroll } = this.props;\n\n    if (this.container) {\n      const { scrollTop } = this.container;\n\n      onScroll(scrollTop);\n\n      this.setState({\n        topOffset: scrollTop\n      });\n    }\n  };\n\n  // virtual scroll\n  _setHeight = () => {\n    const { height } = this.state;\n    \n    if (this.container) {\n      const { offsetHeight } = this.container;\n\n      if (height !== offsetHeight) {\n        this.setState({\n          height: offsetHeight\n        });\n      }\n    }\n  };\n}\n\nconst STYLE_LIST = {\n  overflow: 'auto',\n  WebkitOverflowScrolling: 'touch',\n};\n\nconst STYLE_WRAPPER = {\n  position: 'relative',\n  overflow: 'hidden',\n  width: '100%',\n  minHeight: '100%',\n};\n\nconst STYLE_CONTENT = {\n  position: 'absolute',\n  overflow: 'visible',\n  height: '100%',\n  width: '100%',\n  top: '0',\n  left: '0',\n};\n","// @flow\nimport React, { Component } from 'react';\nimport type { ChildrenArray, Element } from 'react';\n\nimport Column from './Column';\nimport VirtualList from './VirtualList';\n\nimport BTRoot from '../model/bt_root';\nimport Row from '../model/row';\nimport type { TreeDataRow  } from '../model/row';\n\nimport { processData, noop, findNodeData } from '../util';\n\n\ntype TreeChange = {\n  root: BTRoot,\n  hasChange: boolean,\n};\n\ntype Props = {\n  data: Array<TreeDataRow>,\n  children: ChildrenArray<Element<typeof Column>>,\n  classNameColumn?: string,\n  classNamePartlyVisible?: string,\n  classNameMover?: string,\n  classNameInner?: string,\n  classNameRow?: string,\n  selected?: string,\n  classNameSelected?: string,\n  selected?: string,\n  height?: number,\n  rowHeight?: number,\n  onScroll?: (scrollTop: number) => void,\n  onRowClick?: (data: object) => void,\n  className?: string,\n};\n\ntype State = {\n  root: BTRoot,\n};\n\nexport default class TreeDataTable extends Component<Props, State> {\n  static Column = Column;\n\n  virtualList: ?VirtualList;\n\n  constructor(props: Props) {\n    super(props);\n    const { rowHeight } = props;\n    this.depth = 0;\n    this.state = {\n      root: new BTRoot(processData(this.props.data, rowHeight)),\n    };\n  }\n\n  render() {\n    const { height, children, onScroll, className, classNameRow, classNamePartlyVisible, classNameColumn, classNameMover, classNameInner, selected, classNameSelected } = this.props;\n    \n    const baseClass = className ? `cp_tree-table ${className}`: 'cp_tree-table';\n    return (\n      <VirtualList className={baseClass}\n                   classNameSelected={classNameSelected}\n                   selected={selected}\n                   classNameRow={classNameRow}\n                   classNamePartlyVisible={classNamePartlyVisible}\n                   classNameColumn={classNameColumn}\n                   classNameMover={classNameMover}\n                   onRowClick={this.props.onRowClick}\n                   classNameInner={classNameInner}\n        ref={elem => {this.virtualList = elem}}\n\n        columns={children}\n\n        height={height || 200}\n        root={this.state.root}\n        \n        onScroll={onScroll || noop}\n        onToggle={(row) => this._handleOnToggle(row)}/>\n    );\n  }\n\n  // Public API\n  scrollIntoView(node: TreeDataRow, expandAncestors: boolean = true) {\n    const { root } = this.state;\n\n    const row = node && findNodeData(root, node);\n    if (row) {\n      const rowIndex = root.getRowIndex(row);\n      if (row._hasChildren) {\n        // open them\n        this._toggleRow(root, row);\n      }\n\n      if (expandAncestors && !row.isVisible()) {\n        let ancestors: Array<Row> = [];\n        for (let currentRowIndex = Math.max(rowIndex - 1, 0), previousDepth = row.depth; currentRowIndex >= 0; currentRowIndex--) {\n          const currentRow = root.getRow(currentRowIndex);\n          \n          if (currentRow.depth === previousDepth - 1) {  // Parent\n            ancestors.push(currentRow);\n            previousDepth = currentRow.depth;\n\n            if (currentRow.isVisible()) { // From here up, all the ancestors are visible\n              break;\n            }\n          }\n\n          if (currentRow.depth === 0) {\n            break;\n          }\n        }\n\n        // Batch changes\n        let currentRoot = root;\n        let hasChange: boolean = false;\n        for (let i = 0; i < ancestors.length; i++) {\n          const currentRow = ancestors[i];\n          const delta = this._toggleRow(currentRoot, currentRow);\n\n          if (!hasChange) {\n            hasChange = delta.hasChange;\n          }\n        }\n\n        if (hasChange) {\n          this.setState({ root: currentRoot }, () => {\n            const posY = root.getYAtIndex(rowIndex);\n            this.scrollTo(posY);\n          });\n        }\n      } else {\n        const posY = root.getYAtIndex(rowIndex);\n        this.scrollTo(posY);\n      }\n    }\n  }\n\n  // Public API\n  scrollTo(posY: number) {\n    if (this.virtualList) {\n      this.virtualList.scrollTop(posY);\n    }\n  }\n\n  // Makes rows in the given range that don't represent root nodes (row.depth == 0) visible\n  _showRowsInRange(from?: number, to?: number) {\n    const { root } = this.state;\n\n    let _from = (from != null) ? from : 0;\n    let _to = (to != null) ? to : root.getSize();\n\n    // Validation\n    if (!this._isOpRangeValid(_from, _to)) {\n      return;\n    }\n\n    // Expand op\n    let hasChange: boolean = false;\n    root.mapRange(_from, _to, (row: Row) => {\n      if (row.depth > 0 && !row.isVisible()) {\n        row.show();\n        hasChange = true;\n      }\n    });\n\n    if (hasChange) {\n      this.setState({ root: root });\n    }\n  }\n\n  _walkOne(root: BTRoot, depth: number) {\n    let hasChanged;\n    if (root.rows) {\n        for (let i = 0; i < root.rows.length; i++) {\n          if (root.rows[i].depth <= depth) {\n            if (!root.rows[i].isVisible()) {\n              hasChanged = true;\n              root.rows[i].show();\n            }\n          } else if (root.rows[i].isVisible()) {\n              hasChanged = true;\n              root.rows[i].hide();\n          }\n        }\n    } else if (root.children) {\n        for (let i = 0; i < root.children.length; i++) {\n            const changed = this._walkOne(root.children[i], depth);\n            if (changed) {\n                hasChanged = true;\n            }\n        }\n    }\n    return hasChanged;\n  }\n\n  // Public API\n  expandAll(expandOrCollapse?: boolean) { // _showRowsInRange alias with the default arguments\n    if (expandOrCollapse === undefined) {\n        this._showRowsInRange();\n    } else {\n      if (expandOrCollapse === true || expandOrCollapse === false) {\n          this.depth = expandOrCollapse ? this.depth + 1 : this.depth - 1;\n      } else {\n          this.depth = expandOrCollapse;\n      }\n      if (this.depth < 0) {\n          this.depth = 0;\n      }\n        if (this._walkOne(this.state.root, this.depth)) {\n            this.setState({root: this.state.root});\n        }\n    }\n  }\n\n  // Hides rows in the given range that don't represent root nodes (row.depth == 0)\n  _hideRowsInRange(from?: number, to?: number) {\n    const { root } = this.state;\n\n    let _from = (from != null) ? from : 0;\n    let _to = (to != null) ? to : root.getSize();\n\n    // Validation\n    if (!this._isOpRangeValid(_from, _to)) {\n      return;\n    }\n\n    // Expand op\n    let hasChange: boolean = false;\n    root.mapRange(_from, _to, (row: Row) => {\n      if (row.depth > 0 && row.isVisible()) {\n        row.hide();\n        hasChange = true;\n      }\n    });\n\n    if (hasChange) {\n      this.setState({ root: root });\n    }\n  }\n\n  // Public API\n  collapseAll() { // _hideRowsInRange alias with the default arguments\n    this._hideRowsInRange();\n  }\n\n  _isOpRangeValid(from: number, to: number): boolean {\n    const { root } = this.state;\n    const maxTo = root.getSize();\n    // Validation\n    if (from < 0) {\n      console.warn('Invalid range: from < 0');\n      return false;\n    }\n    if (from > maxTo) {\n      console.warn('Invalid range: from > max size');\n      return false;\n    }\n    if (to > maxTo) {\n      console.warn('Invalid range: to > max size');\n      return false;\n    }\n    if (from > to) {\n      console.warn('Invalid range: to > from');\n      return false;\n    }\n    return true;\n  }\n\n  _handleOnToggle = (row: Row) => {\n    const { root } = this.state;\n\n    const delta = this._toggleRow(root, row);\n    if (delta.hasChange) {\n      this.setState({ root: delta.root });\n    }\n  };\n\n  _toggleRow = (root: BTRoot, row: Row): TreeChange => {\n    const currentDepth = row.depth;\n    let rowIndex = Math.min(root.getRowIndex(row) + 1, root.getSize());\n\n    let hasChange: boolean = false;\n    let toggleOpen: ?boolean;\n    root.mapRange(rowIndex, root.getSize() - rowIndex, (row: Row) => {\n      if (toggleOpen == null) {\n        toggleOpen = !row.isVisible();\n      }\n\n      if (row.depth >= currentDepth + 1) {\n        if (row.depth === currentDepth + 1) {\n          row.toggle();\n          hasChange = true;\n        } else if (!toggleOpen && row.isVisible()) { // Close all children\n          row.toggle();\n          hasChange = true;\n        }\n        \n        return false;\n      } else {\n        return true;\n      }\n    });\n\n    return {\n      root: root,\n      hasChange: hasChange,\n    };\n  };\n}\n","import TreeDataTable from './component/TreeDataTable';\nimport type { TreeDataRow } from './component/TreeDataTable';\nimport type { RowMetadata } from './model/row';\n\nexport default TreeDataTable;\nexport type { TreeDataRow };\nexport type { RowMetadata };\n","import * as React from 'react';\nimport PropTypes from \"prop-types\";\n\nfunction SvgCopyContent(props) {\n    return (\n        <svg width={props.width || 24} height={props.width || 24} viewBox=\"0 0 24 24\">\n            <path fill=\"currentColor\" d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4l6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z\"/>\n        </svg>\n    );\n}\n\nSvgCopyContent.propTypes = {\n    width: PropTypes.string,\n};\n\nexport default SvgCopyContent;\n","/* This file is temporary here to speed-up the development of this component.\n    Later it will be moved to adapter-react\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport TreeDataTable from './cp-react-tree-table/src';\nimport {withStyles} from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input';\nimport secondary from '@material-ui/core/colors/orange';\nimport Grid from '@material-ui/core/Grid';\n\nimport {FaFolder as IconClosed} from 'react-icons/fa';\nimport {FaFolderOpen as IconOpen} from 'react-icons/fa';\nimport {FaFileAlt as IconState} from 'react-icons/fa';\nimport {FaFile as IconDocument} from 'react-icons/fa';\nimport {MdPerson as IconExpert} from 'react-icons/md';\nimport IconDefaultState from '../assets/state.png';\nimport IconDefaultChannel from '../assets/channel.png';\nimport IconDefaultDevice from '../assets/device.png';\nimport IconDefault from '../assets/empty.png';\n\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Utils from '@iobroker/adapter-react/Components/Utils';\n\nimport CopyContentIcon from './CopyIcon';\n\nconst styles = theme => ({\n    toolbar: {\n        minHeight: 38,//Theme.toolbar.height,\n//        boxShadow: '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)'\n    },\n    toolbarButtons: {\n        padding: 4,\n        marginLeft: 4\n    },\n    treeTable: {\n        background: '#ffffff',\n        borderTop: '1px solid #999',\n        borderBottom: '1px solid #999'\n    },\n    treeTableDark: {\n        background: 'inherit',\n        borderTop: '1px solid #999',\n        borderBottom: '1px solid #999'\n    },\n    treeTableRow: {\n        boxShadow: 'inset 0 1px 0 #eeeeee',\n        display: 'block'\n    },\n    mainDiv: {\n        height: '100%',\n        overflow: 'hidden',\n        flexWrap: 'nowrap'\n    },\n    tableDiv: {\n        width: '100%',\n        height: 'calc(100% - 34px - 38px)',\n        overflow: 'auto'\n    },\n    cellDiv: {\n        display: 'inline-block',\n        fontSize: 12,\n        height: 26,\n        verticalAlign: 'top'\n    },\n    cellDivId: {\n        display: 'inline-block',\n        height: 26,\n        verticalAlign: 'top'\n    },\n    cellWrapper: {\n        display: 'flex',\n        alignItems: 'center',\n        fontWeight: 300,\n        fontSize: 13,\n        height: '100%',\n        width: '100%',\n//        fontFamily: \"'SF Mono', 'Segoe UI Mono', 'Roboto Mono', Menlo, Courier, monospace\",\n        lineHeight: '1em'\n    },\n    selectNone: {\n        opacity: 0.5,\n    },\n    selectIcon: {\n        width: 16,\n        height: 16,\n        paddingRight: 5\n    },\n    cellWrapperElement: {\n        flexGrow: 1,\n        cursor: 'default'\n    },\n\n    toggleButtonWrapper: {\n        width: 16,\n        flexGrow: 0,\n        color: '#008fff',\n        cursor: 'pointer',\n        padding: 1,\n        borderRadius: 3\n    },\n    partlyVisible: {\n        opacity: 0.3\n    },\n    /*.toggle-button-wrapper > span:hover {\n        background: #d7d7d7;\n    }*/\n\n    selectSpan: {\n//        fontFamily: \"'SF Mono', 'Segoe UI Mono', 'Roboto Mono', Menlo, Courier, monospace\",\n        background: '#efefef',\n        border: '1px solid #e5e5e5',\n        padding: 2,\n        borderRadius: 3\n    },\n    selected: {\n        background: '#008fff',\n        color: 'white'\n    },\n    icon: {\n        width: 20,\n        height: 20,\n        paddingTop: 2,\n        paddingRight: 2\n    },\n    header: {\n        width: '100%'\n    },\n    headerCell: {\n        display: 'inline-block'\n    },\n    headerCellInput: {\n        width: 'calc(100% - 5px)'\n    },\n    visibleButtons: {\n        color: '#2196f3',\n        opacity: 0.7\n    },\n    depth: {\n        position: 'absolute',\n        top: 8,\n        left: 10,\n        color: 'black',\n        fontSize: 14\n    },\n    cellCopy: {\n        position: 'absolute',\n        top: 3,\n        right: 10,\n        width: 16,\n        height: 16,\n        background: 'lightblue',\n        cursor: 'grab',\n        borderRadius: 2,\n        padding: 2,\n    },\n    cellCopyPressed: {\n        cursor: 'grabbing',\n        background: secondary.A700,\n    }\n});\n\n// d=data, t=target, s=start, e=end, m=middle\nfunction binarySearch(d, t, s, e) {\n    s = s || 0;\n    if (e === undefined) {\n        e = d.length - 1;\n        if (!e) {\n            return d[0] === t;\n        }\n    }\n    const m = Math.floor((s + e) / 2);\n    if (t === d[m]) return d[m];\n    if (e - 1 === s) return d[s] === t || d[e] === t;\n    if (t > d[m]) return binarySearch(d, t, m, e);\n    if (t < d[m]) return binarySearch(d, t, s, m);\n}\n\nfunction applyFilter(item, filters, lang, objects, context) {\n    let filteredOut = false;\n    if (!context) {\n        context = {};\n        if (filters.id) {\n            context.id = filters.id.toLowerCase();\n        }\n        if (filters.name) {\n            context.name = filters.name.toLowerCase();\n        }\n        if (filters.role) {\n            context.role = filters.role.toLowerCase();\n        }\n        if (filters.room) {\n            context.room = (objects[filters.room] && objects[filters.room].common && objects[filters.room].common.members) || [];\n        }\n        if (filters.func) {\n            context.func = (objects[filters.func] && objects[filters.func].common && objects[filters.func].common.members) || [];\n        }\n    }\n\n    if (item.data.id) {\n        if (!filters.expert) {\n            filteredOut = item.data.id === 'system' || item.data.id.startsWith('system.') || (item.data.obj && item.data.obj.common && item.data.obj.common.expert);\n        }\n        if (!filteredOut && context.id) {\n            if (item.data.fID === undefined) {\n                item.data.fID = item.data.id.toLowerCase();\n            }\n            filteredOut = item.data.fID.indexOf(context.id) === -1;\n        }\n        if (!filteredOut && context.name) {\n            if (item.data.fName === undefined) {\n                item.data.fName = (item.data.obj && item.data.obj.common && getName(item.data.obj.common.name, lang)) || '';\n                item.data.fName = item.data.fName.toLowerCase();\n            }\n            filteredOut = item.data.fName.indexOf(context.name) === -1;\n        }\n        if (!filteredOut && filters.role) {\n            filteredOut = !(item.data && item.data.obj && item.data.obj.common && item.data.obj.common.role && item.data.obj.common.role.startsWith(context.role));\n        }\n        if (!filteredOut && context.room) {\n            filteredOut = !context.room.find(id => id === item.data.id || item.data.id.startsWith(id + '.'));\n        }\n        if (!filteredOut && context.func) {\n            filteredOut = !context.func.find(id => id === item.data.id || item.data.id.startsWith(id + '.'));\n        }\n    }\n    item.data.visible = !filteredOut;\n    item.data.hasVisibleChildren = false;\n    if (item.children) {\n        item.children.forEach(_item => {\n            const visible = applyFilter(_item, filters, lang, objects, context);\n            if (visible) {\n                item.data.hasVisibleChildren = true;\n            }\n        });\n    }\n    return item.data.visible || item.data.hasVisibleChildren;\n}\n\nfunction buildTree(objects, options) {\n    options = options || {};\n\n    const ids = Object.keys(objects);\n    ids.sort((a, b) => {\n        if (a === b) return 0;\n        a = a.replace(/\\./g, '!!!');\n        b = b.replace(/\\./g, '!!!');\n        if (a > b) return 1;\n        return -1;\n    });\n\n    // find empty nodes and create names for it\n    let currentPathArr = [];\n    let currentPath = '';\n    let currentPathLen = 0;\n    let root = {data: {name: '', id: ''}, children: []};\n\n    let info = {\n        funcEnums: [],\n        roomEnums: [],\n        roles: [],\n        ids: [],\n        objects\n    };\n\n    let croot = root;\n    for (let i = 0; i < ids.length; i++) {\n        const id = ids[i];\n        const parts = id.split('.');\n\n        if (objects[id]) {\n            if (objects[id].common && objects[id].common.role) {\n                if (info.roles.indexOf(objects[id].common.role) === -1) {\n                    info.roles.push(objects[id].common.role);\n                }\n            } else if (id.startsWith('enum.rooms.')) {\n                info.roomEnums.push(id);\n            } else if (id.startsWith('enum.functions.')) {\n                info.funcEnums.push(id);\n            }\n        }\n\n        if (options.statesOnly && (!objects[id] || objects[id].type !== 'state')) {\n            continue;\n        }\n        info.ids.push(id);\n\n        let repeat;\n        // if next level\n        do {\n            repeat = false;\n            if (!currentPath || id.substring(0, currentPath.length + 1) === currentPath + '.') {\n                if (parts.length - currentPathLen > 1) {\n                    let curPath = currentPath;\n                    for (let k = currentPathLen; k < parts.length - 1; k++) {\n                        curPath += (curPath ? '.' : '') + parts[k];\n                        if (!binarySearch(info.ids, curPath)) {\n                            const _croot = {data: {name: parts[k], parent: croot, id: curPath, obj: objects[curPath]}};\n                            croot.children = croot.children || [];\n                            croot.children.push(_croot);\n                            croot = _croot;\n                            //ids.splice(i, 0, curPath);\n                            info.ids.push(curPath);\n                            //i++;\n                        } else {\n                            croot = croot.children.find(item => item.data.name === parts[k]);\n                        }\n                    }\n                }\n\n                const _croot = {data: {name: parts[parts.length - 1], obj: objects[id], parent: croot, id}, children: []};\n                croot.children = croot.children || [];\n                croot.children.push(_croot);\n                croot = _croot;\n\n                currentPathLen = parts.length;\n                currentPathArr = parts;\n                currentPath    = id;\n            } else {\n                let u = 0;\n                while (currentPathArr[u] === parts[u]) u++;\n                if (u > 0) {\n                    let move = currentPathArr.length;\n                    currentPathArr = currentPathArr.splice(0, u);\n                    currentPathLen = u;\n                    currentPath = currentPathArr.join('.');\n                    while (move > u) {\n                        croot = croot.data.parent;\n                        move--;\n                    }\n                } else {\n                    croot = root;\n                    currentPathArr = [];\n                    currentPath = '';\n                    currentPathLen = 0;\n                }\n                repeat = true;\n            }\n        } while(repeat);\n    }\n\n    info.roomEnums.sort();\n    info.funcEnums.sort();\n    info.roles.sort();\n\n    return {info, root};\n}\n\nfunction findNode(root, id, _parts, _path, _level) {\n    if (root.data.id === id) {\n        return root;\n    }\n    if (!_parts) {\n        _parts = id.split('.');\n        _level = 0;\n        _path = _parts[_level];\n    }\n    if (!root.children && root.data.id !== id) {\n        return null;\n    } else {\n        let found;\n        for (let i = 0; i< root.children.length; i++) {\n            const _id = root.children[i].data.id;\n            if (_id === _path) {\n                found = root.children[i];\n                break;\n            } else\n            if (_id < _path) continue;\n            if (_id > _path) break;\n        }\n        if (found) {\n            return findNode(found, id, _parts, _path + '.' + _parts[_level + 1], _level + 1);\n        } else {\n            return null;\n        }\n    }\n}\n\nfunction getName(name, lang) {\n    if (name && typeof name === 'object') {\n        return name[lang] || name.en;\n    } else {\n        return name || '';\n    }\n}\n\nfunction findRoomsForObject(data, id, lang, withParentInfo, rooms) {\n    if (!id) {\n        return [];\n    }\n    rooms = rooms || [];\n    for (let i = 0; i < data.roomEnums.length; i++) {\n        const common = data.objects[data.roomEnums[i]] && data.objects[data.roomEnums[i]].common;\n        const name = getName(common.name, lang);\n\n        if (common.members && common.members.indexOf(id) !== -1 && rooms.indexOf(name) === -1) {\n            if (!withParentInfo) {\n                rooms.push(name);\n            } else {\n                rooms.push({name: name, origin: id});\n            }\n        }\n    }\n    const parts = id.split('.');\n    parts.pop();\n    id = parts.join('.');\n    if (data.objects[id]) {\n        findRoomsForObject(data, id, lang, withParentInfo, rooms);\n    }\n\n    return rooms;\n}\n\n/* function findRoomsForObjectAsIds(data, id, rooms) {\n    if (!id) {\n        return [];\n    }\n    rooms = rooms || [];\n    for (let i = 0; i < data.roomEnums.length; i++) {\n        const common = data.objects[data.roomEnums[i]] && data.objects[data.roomEnums[i]].common;\n        if (common && common.members && common.members.indexOf(id) !== -1 &&\n            rooms.indexOf(data.roomEnums[i]) === -1) {\n            rooms.push(data.roomEnums[i]);\n        }\n    }\n    return rooms;\n}\n*/\nfunction findFunctionsForObject(data, id, lang, withParentInfo, funcs) {\n    if (!id) {\n        return [];\n    }\n    funcs = funcs || [];\n    for (let i = 0; i < data.funcEnums.length; i++) {\n        const common = data.objects[data.funcEnums[i]] && data.objects[data.funcEnums[i]].common;\n        const name = getName(common.name, lang);\n        if (common && common.members && common.members.indexOf(id) !== -1 && funcs.indexOf(name) === -1) {\n            if (!withParentInfo) {\n                funcs.push(name);\n            } else {\n                funcs.push({name: name, origin: id});\n            }\n        }\n    }\n    const parts = id.split('.');\n    parts.pop();\n    id = parts.join('.');\n    if (data.objects[id]) {\n        findFunctionsForObject(data, id, lang, withParentInfo, funcs);\n    }\n\n    return funcs;\n}\n\n/*function findFunctionsForObjectAsIds(data, id, funcs) {\n    if (!id) {\n        return [];\n    }\n    funcs = funcs || [];\n    for (let i = 0; i < data.funcEnums.length; i++) {\n        const common = data.objects[data.funcEnums[i]] && data.objects[data.funcEnums[i]].common;\n        if (common && common.members && common.members.indexOf(id) !== -1 &&\n            funcs.indexOf(data.funcEnums[i]) === -1) {\n            funcs.push(data.funcEnums[i]);\n        }\n    }\n\n    return funcs;\n}\n*/\nfunction getStates(obj) {\n    let states;\n    if (obj &&\n        obj.common &&\n        obj.common.states) {\n        states = obj.common.states;\n    }\n    if (states) {\n        if (typeof states === 'string' && states[0] === '{') {\n            try {\n                states = JSON.parse(states);\n            } catch (ex) {\n                console.error('Cannot parse states: ' + states);\n                states = null;\n            }\n        } else\n            // if old format val1:text1;val2:text2\n        if (typeof states === 'string') {\n            const parts = states.split(';');\n            states = {};\n            for (let p = 0; p < parts.length; p++) {\n                const s = parts[p].split(':');\n                states[s[0]] = s[1];\n            }\n        }\n    }\n    return states;\n}\n\nfunction quality2text(q) {\n    if (!q) return 'ok';\n    const custom = q & 0xFFFF0000;\n    let text = '';\n    if (q & 0x40) text += 'device';\n    if (q & 0x80) text += 'sensor';\n    if (q & 0x01) text += ' bad';\n    if (q & 0x02) text += ' not connected';\n    if (q & 0x04) text += ' error';\n\n    return text + (custom ? '|0x' + (custom >> 16).toString(16).toUpperCase() : '') + ' [0x' + q.toString(16).toUpperCase() + ']';\n}\n\nfunction formatDate(dateObj) {\n    //return dateObj.getFullYear() + '-' +\n    //    ('0' + (dateObj.getMonth() + 1).toString(10)).slice(-2) + '-' +\n    //    ('0' + (dateObj.getDate()).toString(10)).slice(-2) + ' ' +\n    //    ('0' + (dateObj.getHours()).toString(10)).slice(-2) + ':' +\n    //    ('0' + (dateObj.getMinutes()).toString(10)).slice(-2) + ':' +\n    //    ('0' + (dateObj.getSeconds()).toString(10)).slice(-2);\n    // Following implementation is 5 times faster\n    if (!dateObj) return '';\n\n    let text = dateObj.getFullYear();\n    let v = dateObj.getMonth() + 1;\n    if (v < 10) {\n        text += '-0' + v;\n    } else {\n        text += '-' + v;\n    }\n\n    v = dateObj.getDate();\n    if (v < 10) {\n        text += '-0' + v;\n    } else {\n        text += '-' + v;\n    }\n\n    v = dateObj.getHours();\n    if (v < 10) {\n        text += ' 0' + v;\n    } else {\n        text += ' ' + v;\n    }\n    v = dateObj.getMinutes();\n    if (v < 10) {\n        text += ':0' + v;\n    } else {\n        text += ':' + v;\n    }\n\n    v = dateObj.getSeconds();\n    if (v < 10) {\n        text += ':0' + v;\n    } else {\n        text += ':' + v;\n    }\n\n    v = dateObj.getMilliseconds();\n    if (v < 10) {\n        text += '.00' + v;\n    } else if (v < 100) {\n        text += '.0' + v;\n    } else {\n        text += '.' + v;\n    }\n\n    return text;\n}\n\nfunction formatValue(id, state, obj, texts) {\n    const states = getStates(obj);\n    const isCommon = obj.common;\n\n    let valText = state.val === null || state.val === undefined ? '' : state.val;\n    const type = typeof valText;\n    if (type === 'number') {\n        valText = Math.round(valText * 1000000) / 1000000; // remove 4.00000000000000001\n    } else if (type === 'object') {\n        valText = JSON.stringify(valText);\n    } else if (type !== 'string') {\n        valText = valText.toString();\n    }\n\n    if (isCommon && isCommon.role && typeof isCommon.role === 'string' && isCommon.role.match(/^value\\.time|^date/)) {\n        valText = valText ? (new Date(valText)).toString() : valText;\n    }\n\n    if (states && states[valText] !== undefined) {\n        valText = states[valText] + '(' + valText + ')';\n    }\n\n    let valFull;\n    if (valText === undefined || valText === null) {\n        valText = '';\n    } else {\n        // if less 2000.01.01 00:00:00\n        if (state.ts && state.ts < 946681200000) state.ts *= 1000;\n        if (state.lc && state.lc < 946681200000) state.lc *= 1000;\n\n        if (isCommon && isCommon.unit) {\n            valText += ' ' + isCommon.unit;\n        }\n        valFull =           texts.value   + ': ' + state.val;\n        if (state.ack !== undefined) {\n            valFull += '\\x0A' + texts.ack     + ': ' + state.ack;\n        }\n        if (state.ts) {\n            valFull += '\\x0A' + texts.ts + ': ' + (state.ts ? formatDate(new Date(state.ts)) : '');\n        }\n        if (state.lc) {\n            valFull += '\\x0A' + texts.lc + ': ' + (state.lc ? formatDate(new Date(state.lc)) : '');\n        }\n        if (state.from) {\n            valFull += '\\x0A' + texts.from + ': ' + (state.from || '');\n        }\n        if (state.user) {\n            valFull += '\\x0A' + texts.user    + ': ' + (state.user || '');\n        }\n        valFull += '\\x0A' + texts.quality + ': ' + quality2text(state.q || 0);\n    }\n    if (typeof valText === 'string' && valText !== '') {\n        valText = valText.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');\n    }\n\n    return {\n        valText: valText,\n        valFull: valFull,\n        style: {color: state.ack ? (state.q ? 'orange' : '') : '#c00000'}\n    };\n}\n\nfunction getSelectIdIcon(objects, id, prefix) {\n    prefix = prefix || '.';//http://localhost:8081';\n    let icon = '';\n    let alt  = '';\n    const _id_ = 'system.adapter.' + id;\n    if (id && objects[_id_] && objects[_id_].common && objects[_id_].common.icon) {\n        // if not BASE64\n        if (!objects[_id_].common.icon.match(/^data:image\\//)) {\n            if (objects[_id_].common.icon.indexOf('.') !== -1) {\n                icon = prefix + '/adapter/' + objects[_id_].common.name + '/' + objects[_id_].common.icon;\n            } else {\n                return null; //'<i class=\"material-icons iob-list-icon\">' + objects[_id_].common.icon + '</i>';\n            }\n        } else {\n            icon = objects[_id_].common.icon;\n        }\n    } else {\n        const obj = objects[id];\n\n        if (obj && obj.common) {\n            if (obj.common.icon) {\n                if (!obj.common.icon.match(/^data:image\\//)) {\n                    if (obj.common.icon.indexOf('.') !== -1) {\n                        let instance;\n                        if (obj.type === 'instance') {\n                            icon = prefix + '/adapter/' + obj.common.name + '/' + obj.common.icon;\n                        } else if (id && id.match(/^system\\.adapter\\./)) {\n                            instance = id.split('.', 3);\n                            if (obj.common.icon[0] === '/') {\n                                instance[2] += obj.common.icon;\n                            } else {\n                                instance[2] += '/' + obj.common.icon;\n                            }\n                            icon = prefix + '/adapter/' + instance[2];\n                        } else {\n                            instance = id.split('.', 2);\n                            if (obj.common.icon[0] === '/') {\n                                instance[0] += obj.common.icon;\n                            } else {\n                                instance[0] += '/' + obj.common.icon;\n                            }\n                            icon = prefix + '/adapter/' + instance[0];\n                        }\n                    } else {\n                        return null; // '<i class=\"material-icons iob-list-icon\">' + obj.common.icon + '</i>';\n                    }\n                } else {\n                    // base 64 image\n                    icon = obj.common.icon;\n                }\n            } else if (obj.type === 'device') {\n                icon = IconDefaultDevice;\n                alt  = 'device';\n            } else if (obj.type === 'channel') {\n                icon = IconDefaultChannel;\n                alt  = 'channel';\n            } else if (obj.type === 'state') {\n                icon = IconDefaultState;\n                alt  = 'state';\n            }\n        }\n    }\n\n    if (icon) {\n        return {src: icon, alt};\n    } else {\n        return  {src: IconDefault, alt: ''};\n    }\n}\n\nconst DEFAULT_FILTER = {\n    id:     '',\n    name:   '',\n    room:   '',\n    func:   '',\n    role:   '',\n    expert: false\n};\n\nclass ObjectBrowser extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loaded: false,\n            selected: (this.props.selected || '').replace(/[\"']/g, ''),\n            filter: this.props.defaultFilters || Object.assign({}, DEFAULT_FILTER),\n            depth: 0,\n            statesUpdate: 0,\n        };\n        this.selectedFound = false;\n        this.copyContentImg = CopyContentIcon;\n        this.treeTableRef = React.createRef();\n        this.mainRef = React.createRef();\n        this.root = null;\n        this.lang = I18n.getLanguage();\n        this.states = {};\n        this.subscribes = [];\n\n        this.texts = {\n            value:   I18n.t('tooltip_value'),\n            ack:     I18n.t('tooltip_ack'),\n            ts:      I18n.t('tooltip_ts'),\n            lc:      I18n.t('tooltip_lc'),\n            from:    I18n.t('tooltip_from'),\n            user:    I18n.t('tooltip_user'),\n            quality: I18n.t('tooltip_quality')\n        };\n\n        this.onStateChangeBound = this.onStateChange.bind(this);\n\n        this.props.connection.getObjects(true)\n            .then(objects => {\n                this.objects = objects;\n                const {info, root} = buildTree(this.objects, this.props);\n                this.root = root;\n                this.info = info;\n                let node = this.state.selected && findNode(this.root, this.state.selected);\n\n                // If selected ID is not visible, reset filter\n                if (node && !applyFilter(node, this.state.filter, this.lang, this.objects)) {\n                    // reset filter\n                    this.setState({filter: Object.assign({}, DEFAULT_FILTER)}, () => {\n                        applyFilter(this.root, this.state.filter, this.lang, this.objects);\n                        this.setState({loaded: true});\n                        this.state.selected && this.onSelect(this.state.selected);\n                    });\n                } else {\n                    applyFilter(this.root, this.state.filter, this.lang, this.objects);\n                    this.setState({loaded: true});\n\n                    this.state.selected && this.onSelect(this.state.selected);\n                }\n            });\n    }\n\n    onSelect(selected, isDouble) {\n        selected !== this.state.selected && this.setState({selected});\n        const name = selected ? Utils.getObjectName(this.objects, selected, null, {language: this.lang}) : '';\n        this.props.onSelect && this.props.onSelect(selected, name, isDouble);\n    }\n\n    onDoubleClick(data, metadata, toggleChildren) {\n        if (metadata.hasChildren) {\n            toggleChildren();\n        } else if (data.obj && data.obj.type === 'state') {\n            this.onSelect(data.obj._id, true);\n        }\n    }\n\n    onCopy(e, id) {\n        const el = window.document.createElement('input');\n        el.type = 'text';\n        el.value = id;\n        el.style.position = 'absolute';\n        el.style.left = '-9999px';\n        window.document.body.appendChild(el);\n        el.select();\n        const selection = window.document.getSelection();\n        const range = window.document.createRange();\n        range.selectNode(el);\n        selection.removeAllRanges();\n        selection.addRange(range);\n        console.log('copy success', window.document.execCommand('copy'));\n        selection.removeAllRanges();\n        window.document.body.removeChild(el);\n        console.log(id);\n        e.stopPropagation();\n        e.preventDefault();\n    }\n\n    installCopyButtons() {\n        if (!this.mainRef.current) return;\n        const rows = this.mainRef.current.getElementsByClassName('add-copy-button');\n        for (let i = 0; i < rows.length; i++) {\n            if (!rows[i].__installed) {\n                rows[i].addEventListener('mouseenter', e => {\n                    const copy = e.target.getElementsByClassName(this.props.classes.cellCopy);\n                    if (!copy || !copy.length) {\n                        const div = document.createElement('div');\n                        const img = document.createElement('img');\n                        img.src = this.copyContentImg;\n                        img.width = 16;\n                        img.height = 16;\n                        img.color = secondary.A200;\n                        div.appendChild(img);\n                        div.className = this.props.classes.cellCopy;\n                        div.addEventListener('click', e =>\n                            this.onCopy(e, e.target.parentNode.dataset.index || e.target.parentNode.parentNode.dataset.index), false);\n                        div.addEventListener('mousedown', e => {\n                            if (e.target.parentNode.className.indexOf(this.props.classes.cellCopyPressed) === -1) {\n                                e.target.parentNode.className += ' ' + this.props.classes.cellCopyPressed;\n                            }\n                        }, false);\n                        div.addEventListener('mouseup', e => {\n                            let className = e.target.parentNode.className.split(' ');\n                            let pos = className.indexOf(this.props.classes.cellCopyPressed);\n                            while (pos !== -1) {\n                                className.splice(pos);\n                                pos = className.indexOf(this.props.classes.cellCopyPressed);\n                            }\n                            e.target.parentNode.className = className.join(' ');\n                        }, false);\n                        e.target.appendChild(div);\n                    }\n                }, false);\n                rows[i].addEventListener('mouseleave', e => {\n                    const copy = e.target.getElementsByClassName(this.props.classes.cellCopy);\n                    if (copy && copy.length) {\n                        e.target.removeChild(copy[0]);\n                    }\n                }, false);\n                rows[i].__installed = true;\n            }\n        }\n    }\n\n    componentDidUpdate() {\n        this.installCopyButtons();\n        if (!this.selectedFound) {\n            if (this.props.selected && this.treeTableRef.current) {\n                const node = findNode(this.root, this.props.selected);\n                this.treeTableRef.current.scrollIntoView(node);\n                this.selectedFound = true;\n            }\n        }\n    }\n\n    checkUnsubscribes() {\n        // Remove unused subscribed\n        for (let i = this.subscribes.length - 1; i >= 0; i--) {\n            if (this.recordStates.indexOf(this.subscribes[i]) === -1) {\n                this.unsubscribe(this.subscribes[i]);\n            }\n        }\n        this.recordStates = [];\n    }\n\n    componentWillUnmount() {\n        // remove all subscribes\n        this.subscribes.forEach(pattern => {\n            console.log('- unsubscribe ' + pattern);\n            this.props.connection.unsubscribeState(pattern, this.onStateChangeBound);\n        });\n        this.subscribes = [];\n    }\n\n    onStateChange(id, state) {\n        this.states[id] = state;\n        console.log('+ subscribe ' + id);\n        if (!this.statesUpdateTimer) {\n            this.statesUpdateTimer = setTimeout(() => {\n                this.statesUpdateTimer = null;\n                this.setState({statesUpdate: this.state.statesUpdate + 1});\n            }, 300);\n        }\n    }\n\n    subscribe(id) {\n        if (this.subscribes.indexOf(id) === -1) {\n            this.subscribes.push(id);\n            this.props.connection.subscribeState(id, this.onStateChangeBound);\n        }\n    }\n\n    unsubscribe(id) {\n        const pos = this.subscribes.indexOf(id);\n        if (pos !== -1) {\n            this.subscribes.splice(pos, 1);\n            if (this.states[id]) {\n                delete this.states[id];\n            }\n            console.log('- unsubscribe ' + id);\n            this.props.connection.unsubscribeState(id, this.onStateChangeBound);\n        }\n    }\n\n    renderIndexColumn(data, metadata, toggleChildren) {\n        const selected = this.state.selected === data.id;\n        const isExist = !!this.objects[data.id];\n        const isState = isExist && this.objects[data.id].type === 'state';\n        // const isChannel = isExist && !isState && this.objects[data.id].type === 'channel';\n        // const isDevice = isExist && !isChannel && !isState && this.objects[data.id].type === 'device';\n\n        const padding = (metadata.depth * 25) + 'px';\n        const width = `calc(100% - ${padding})`;\n        return (\n            <div style={{paddingLeft: padding, width: width}}\n                 data-index={data.id}\n                 className={this.props.classes.cellWrapper + ' add-copy-button'}\n            >\n                <span className={(selected ? this.props.classes.selected : '') + ' ' + this.props.classes.toggleButtonWrapper}>\n                  {metadata.hasChildren\n                      ? (<span onClick={toggleChildren}>{metadata.hasVisibleChildren ? (<IconOpen/>) : (<IconClosed/>)}</span>)\n                      : (isState ? (<IconState/>) : (<IconDocument/>))\n                  }\n                </span>\n                <span className={this.props.classes.cellWrapperElement} style={{fontWeight: metadata.hasChildren ? 'bold' : 'normal'}}>{data.name}</span>\n            </div>\n        );\n    }\n\n    renderColumnName(data, metadata, toggleChildren) {\n        const icon = getSelectIdIcon(this.objects, data.id, this.props.prefix);\n        return (<span className={this.props.classes.cellWrapper}>\n            <img src={icon.src} className={this.props.classes.icon} alt={icon.alt}/>\n            {data.obj && Utils.getObjectName(this.objects, data.obj._id, null, {language: this.lang})}\n            </span>);\n    }\n    renderColumnRole(data, metadata, toggleChildren) {\n        if (!data.obj) return null;\n        return (<span className={this.props.classes.cellWrapper}>{(data.obj.common && data.obj.common.role) || ''}</span>);\n    }\n    renderColumnRoom(data, metadata, toggleChildren) {\n        if (!data.obj) return null;\n        const list = findRoomsForObject(this.info, data.obj._id, this.lang) || [];\n        return (<span className={this.props.classes.cellWrapper}>{list.join(', ')}</span>);\n    }\n    renderColumnFunc(data, metadata, toggleChildren) {\n        if (!data.obj) return null;\n        const list = findFunctionsForObject(this.info, data.obj._id, this.lang) || [];\n        return (<span className={this.props.classes.cellWrapper}>{list.join(', ')}</span>);\n    }\n    renderColumnValue(data, metadata, toggleChildren) {\n        if (!data.obj || !data.obj._id || !this.states) return null;\n\n        if (!this.states[data.obj._id]) {\n            if (data.obj.type === 'state') {\n                this.recordStates.push(data.obj._id);\n                this.states[data.obj._id] = {val: null};\n                this.subscribe(data.obj._id);\n            }\n            return null;\n        } else {\n            this.recordStates.push(data.obj._id);\n        }\n\n        const id = data.obj._id;\n        const state = this.states[id];\n        const info = formatValue(id, state, data.obj, this.texts);\n        return (<span className={this.props.classes.cellWrapper} style={info.style} title={info.valFull}>{info.valText}</span>);\n    }\n\n    onFilter(name, value) {\n        if (this.state.filter[name] !== value) {\n            const filter = JSON.parse(JSON.stringify(this.state.filter));\n            filter[name] = value;\n            this.filterTimer && clearTimeout(this.filterTimer);\n            this.filterTimer = setTimeout(() => {\n                applyFilter(this.root, filter, this.lang, this.objects);\n                this.props.onFilterChanged && this.props.onFilterChanged(filter);\n                this.forceUpdate();\n            }, 400);\n            this.setState({filter});\n        }\n    }\n\n    getFilterInput(name) {\n        return (<FormControl className={this.props.classes.headerCellInput} style={{marginTop: 0, marginBottom: 0}} margin=\"dense\">\n            <Input\n                classes={{underline: 'no-underline'}}\n                id={name}\n                placeholder={I18n.t('filter_' + name)}\n                value={this.state.filter[name]}\n                onChange={e => this.onFilter(name, e.target.value)}\n                autoComplete=\"off\"\n            />\n        </FormControl>);\n    }\n    getFilterSelect(name, values) {\n        //<!--InputLabel htmlFor=\"demo-controlled-open-select\">Age</InputLabel-->\n        return (\n            <Select\n                className={this.props.classes.headerCellInput + ' no-underline'}\n                value={this.state.filter[name] || ''}\n                onChange={e => this.onFilter(name, e.target.value)}\n                inputProps={{name, id: name,}}\n                displayEmpty={true}\n            >\n                <MenuItem key=\"empty\" value=\"\"><span className={this.props.classes.selectNone}>{I18n.t('filter_' + name)}</span></MenuItem>\n                {values.map(item => {\n                    let id;\n                    let name;\n                    let icon;\n                    if (typeof item === 'object') {\n                        id = item.value;\n                        name = item.name;\n                        icon = getSelectIdIcon(this.objects, id, this.props.prefix);\n                    } else {\n                        id = item;\n                        name = item;\n                    }\n\n                    return (\n                        <MenuItem key={id} value={id}>\n                            {icon && (<img className={this.props.classes.selectIcon} src={icon.src} alt={name}/>)}\n                            {name}\n                        </MenuItem>)\n                })}\n            </Select>);\n    }\n    getFilterSelectRole() {\n        return this.getFilterSelect('role', this.info.roles);\n    }\n    getFilterSelectRoom() {\n        const rooms = this.info.roomEnums.map(id => {\n            return {name: getName((this.objects[id] && this.objects[id].common && this.objects[id].common.name) || id.split('.').pop()), value: id};\n        });\n\n        return this.getFilterSelect('room', rooms);\n\n    }\n    getFilterSelectFunction() {\n        const func = this.info.funcEnums.map(id => {\n            return {name: getName((this.objects[id] && this.objects[id].common && this.objects[id].common.name) || id.split('.').pop()), value: id};\n        });\n        return this.getFilterSelect('func', func);\n\n    }\n    onExpandAll() {\n        this.treeTableRef.current.expandAll();\n    }\n    onCollapseAll() {\n        this.treeTableRef.current.collapseAll();\n    }\n    onExpandVisible() {\n        if (this.state.depth < 9) {\n            const depth = this.state.depth + 1;\n            this.setState({depth: depth}, () => {\n                this.treeTableRef.current.expandAll(depth);\n            });\n        }\n    }\n    onCollapseVisible() {\n        if (this.state.depth > 0) {\n            const depth = this.state.depth - 1;\n            this.setState({depth: depth}, () => {\n                this.treeTableRef.current.expandAll(depth);\n            });\n        }\n    }\n\n    getToolbar() {\n        return (\n            <Toolbar variant=\"dense\" className={this.props.classes.toolbar} key=\"toolbar\">\n                <IconButton key=\"expert\" variant=\"contained\" className={this.props.classes.toolbarButtons} color={this.state.filter.expert ? 'secondary' : 'primary'} onClick={() => this.onFilter('expert', !this.state.filter.expert)}><IconExpert /></IconButton>\n                <IconButton key=\"expandAll\" variant=\"contained\" className={this.props.classes.toolbarButtons} onClick={() => this.onExpandAll()}><IconOpen /></IconButton>\n                <IconButton key=\"collapseAll\" variant=\"contained\" className={this.props.classes.toolbarButtons} onClick={() => this.onCollapseAll()}><IconClosed /></IconButton>\n                <IconButton key=\"expandVisible\" variant=\"contained\" className={this.props.classes.toolbarButtons + ' ' + this.props.classes.visibleButtons} onClick={() => this.onExpandVisible()}><IconOpen />{this.state.depth ? (<div className={this.props.classes.depth}>{this.state.depth}</div>) : null}</IconButton>\n                <IconButton key=\"collapseVisible\" variant=\"contained\" className={this.props.classes.toolbarButtons + ' ' + this.props.classes.visibleButtons} onClick={() => this.onCollapseVisible()}><IconClosed />{this.state.depth ? (<div className={this.props.classes.depth}>{this.state.depth}</div>) : null}</IconButton>\n            </Toolbar>);\n    }\n\n    render() {\n        this.recordStates = [];\n        this.unsubscribeTimer && clearTimeout(this.unsubscribeTimer);\n        this.unsubscribeTimer = setTimeout(() => {\n            this.unsubscribeTimer = null;\n            this.checkUnsubscribes();\n        }, 200);\n        if (!this.state.loaded) {\n            return (<CircularProgress/>);\n        } else {\n            const classes = this.props.classes;\n            const idWidth = 300;\n            const WIDTHS = [120, 180, 180, 120];\n            const width = `calc(100% - ${idWidth + WIDTHS[0] + WIDTHS[1] + WIDTHS[2] + WIDTHS[3]}px)`;\n            return (\n            <Grid \n                container\n                direction=\"column\"\n                className={classes.mainDiv} ref={this.mainRef}\n            >\n                { this.getToolbar() }\n                <Grid item key=\"header\" className={classes.header}>\n                    <div className={classes.headerCell} style={{width: idWidth}}>{this.getFilterInput('id')}</div>\n                    <div className={classes.headerCell} style={{width: width}}>{this.getFilterInput('name')}</div>\n                    <div className={classes.headerCell} style={{width: WIDTHS[0]}}>{this.getFilterSelectRole()}</div>\n                    <div className={classes.headerCell} style={{width: WIDTHS[1]}}>{this.getFilterSelectRoom()}</div>\n                    <div className={classes.headerCell} style={{width: WIDTHS[2]}}>{this.getFilterSelectFunction()}</div>\n                    <div className={classes.headerCell} style={{width: WIDTHS[3]}}>{I18n.t('Value')}</div>\n                </Grid>\n                <Grid item className={classes.tableDiv}>\n                    <TreeDataTable\n                        ref={this.treeTableRef}\n                        key=\"table\"\n                        data={this.root.children}\n                        height={'100%'}\n                        selected={this.state.selected}\n                        classNameSelected={classes.selected}\n                        classNamePartlyVisible={classes.partlyVisible}\n                        className={this.props.theme === 'dark' ? classes.treeTableDark : classes.treeTable}\n                        classNameRow={classes.treeTableRow}\n                        onRowClick={(data, metadata, toggleChildren, isDoubleClick) => isDoubleClick ?\n                            this.onDoubleClick(data, metadata, toggleChildren) :\n                            this.onSelect(data.id)}\n                    >\n                        <TreeDataTable.Column grow={0} renderCell={this.renderIndexColumn.bind(this)} className={classes.cellDivId} width={idWidth} />\n                        <TreeDataTable.Column grow={1} renderCell={this.renderColumnName.bind(this)}  className={classes.cellDiv} width={width}/>\n                        <TreeDataTable.Column grow={1} renderCell={this.renderColumnRole.bind(this)}  className={classes.cellDiv} width={WIDTHS[0]}/>\n                        <TreeDataTable.Column grow={1} renderCell={this.renderColumnRoom.bind(this)}  className={classes.cellDiv} width={WIDTHS[1]}/>\n                        <TreeDataTable.Column grow={1} renderCell={this.renderColumnFunc.bind(this)}  className={classes.cellDiv} width={WIDTHS[2]}/>\n                        <TreeDataTable.Column grow={1} renderCell={this.renderColumnValue.bind(this)} className={classes.cellDiv} width={WIDTHS[3]}/>\n                    </TreeDataTable>\n                </Grid>\n            </Grid>);\n        }\n    }\n}\n\nObjectBrowser.propTypes = {\n    classes: PropTypes.object,\n    defaultFilters: PropTypes.object,\n    statesOnly: PropTypes.bool,\n    selected: PropTypes.string,\n    onSelect: PropTypes.func,\n    onFilterChanged: PropTypes.func,\n    connection: PropTypes.object,\n    prefix: PropTypes.string,\n    theme: PropTypes.string,\n};\n\nexport default withStyles(styles)(ObjectBrowser);\n\n","import withWidth from '@material-ui/core/withWidth';\nimport {withStyles} from '@material-ui/core/styles';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\n\nimport ObjectBrowser from '../components/ObjectBrowser';\n\nconst styles = theme => ({\n    root: {\n        width: '100%',\n        overflow: 'hidden',\n        height: '100%',\n        margin: theme.spacing(1)\n    }\n});\n\nclass Objects extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.filters = window.localStorage.getItem(this.dialogName) || '{}';\n\n        try {\n            this.filters = JSON.parse(this.filters);\n        } catch (e) {\n            this.filters = {};\n        }\n\n        this.state =  {\n            selected: this.props.selected || '',\n            name:     ''\n        };\n    }\n\n    render() {\n        return (\n            <Paper className={ this.props.classes.root }>\n                <ObjectBrowser\n                    prefix={ this.props.prefix }\n                    defaultFilters={ this.filters }\n                    statesOnly={ this.props.statesOnly }\n                    style={ {width: '100%', height: '100%'} }\n                    connection={ this.props.socket }\n                    selected={ this.state.selected }\n                    name={ this.state.name }\n                    theme={ this.props.themeName }\n                    onFilterChanged={ filterConfig => {\n                        this.filters = filterConfig;\n                        window.localStorage.setItem(this.dialogName, JSON.stringify(filterConfig));\n                    }}\n                />\n            </Paper>\n        );\n    }\n}\n\nObjects.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    socket: PropTypes.object,\n    themeName: PropTypes.string,\n    expertMode: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(Objects));","import withWidth from '@material-ui/core/withWidth';\nimport {withStyles} from '@material-ui/core/styles';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\n\nconst styles = theme => ({\n    root: {\n        width: 'calc(100% - 10px)',\n        height: 'calc(100% - 10px)',\n        overflow: 'hidden',\n        position: 'relative',\n        margin: theme.spacing(1)\n    },\n});\n\nclass BaseSettings extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.filters = window.localStorage.getItem(this.dialogName) || '{}';\n\n        try {\n            this.filters = JSON.parse(this.filters);\n        } catch (e) {\n            this.filters = {};\n        }\n\n        this.state =  {\n            selected: this.props.selected || '',\n            name:     ''\n        };\n    }\n\n    render() {\n        return (\n            <Paper className={ this.props.classes.root }>\n\n            </Paper>\n        );\n    }\n}\n\nBaseSettings.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    socket: PropTypes.object,\n    themeName: PropTypes.string,\n    expertMode: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(BaseSettings));","import withWidth from '@material-ui/core/withWidth';\nimport {withStyles} from '@material-ui/core/styles';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nimport Utils from '../Utils';\n\nconst styles = theme => ({\n    root: {\n        border: '0 solid #FFF',\n        display: 'block',\n        left: 0,\n        top: 0,\n        width: '100%',\n        height: '100%',\n    },\n});\n\nclass CustomTab extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            href: '',\n        };\n\n        this.props.instancesWorker.getInstances()\n            .then(instances => {\n                let adapter = this.props.tab.replace(/^tab-/, '');\n                let instNum;\n                const m = adapter.match(/-(\\d+)$/);\n                instNum = m ? parseInt(m[1], 10) : null;\n\n                let instance;\n                if (instNum !== null) {\n                    adapter = adapter.replace(/-(\\d+)$/, '');\n                    const name = 'system.adapter.' + adapter + '.' + instNum;\n                    instance = Object.keys(instances).find(id => id === name);\n                } else {\n                    const name = 'system.adapter.' + adapter + '.';\n\n                    instance = Object.keys(instances).find(id => id.startsWith(name));\n                }\n                instance = instances[instance];\n\n                if (!instance || !instance.common || !instance.common.adminTab) {\n                    return console.error('Cannot find instance ' + this.props.tab);\n                }\n\n                // calculate href\n                let href = instance.common.adminTab.link;\n\n                if (!href) {\n                    if (instance.common.materializeTab) {\n                        href = 'adapter/' + adapter + '/tab_m.html';\n                    } else {\n                        href = 'adapter/' + adapter + '/tab.html';\n                    }\n                }\n\n                if (!instance.common.adminTab.singleton) {\n                    href += (href.includes('?') ? '&' : '?') + 'instance=' + instNum;\n                }\n\n                if (href.includes('%')) {\n                    // replace\n                    href = Utils.replaceLink(href, adapter, instNum, {\n                        hostname: this.props.hostname,\n                        protocol: this.props.protocol,\n                        objects: instances\n                    })\n                }\n\n                this.setState({ href });\n            });\n    }\n\n    render() {\n        if (!this.state.href) {\n            return <LinearProgress />;\n        }\n\n        if (window.location.port === '3000') {\n            return 'Test it in not development mode!';\n        } else {\n            return <iframe\n                className={ this.props.classes.root }\n                src={ this.state.href }\n                onError={ e => {\n                    e.target.onerror = null;\n                    this.setState({href: this.state.href.replace('tab_m.html', 'tab.html') });\n                }}\n            />;\n        }\n    }\n}\n\nCustomTab.propTypes = {\n    t: PropTypes.func,\n    lang: PropTypes.string,\n    themeName: PropTypes.string,\n    tab: PropTypes.string.isRequired,\n    instancesWorker: PropTypes.object.isRequired,\n    hostname: PropTypes.string,\n    protocol: PropTypes.string,\n    expertMode: PropTypes.bool,\n};\n\nexport default withWidth()(withStyles(styles)(CustomTab));","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\n\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { grey } from '@material-ui/core/colors';\n\nconst styles = theme => ({\n    closeButton: {\n        position: 'absolute',\n        right: theme.spacing(1),\n        top: theme.spacing(1),\n        color: theme.palette.grey[500],\n    },\n    log: {\n        height: 400,\n        width: 860,\n        backgroundColor: grey[500],\n        padding: theme.spacing(1),\n        overflowY: 'scroll'\n    }\n});\n\nclass ConfirmDialog extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            log: ['$ /.iobroker ' + (props.cmd || '')],\n            init: false,\n            max: null,\n            value: null,\n            progressText: ''\n        };\n\n        this.t = props.t;\n    }\n    \n    componentDidMount() {\n        if(this.props.ready && this.props.cmd) {\n            this.executeCommand();\n        }\n    }\n\n    componentDidUpdate() {\n        if(!this.state.init && this.props.ready && this.props.cmd) {\n            this.executeCommand();\n        }\n    }\n\n    async executeCommand() {\n\n        this.setState({\n            init: true\n        });\n\n        this.props.socket.registerCmdStdoutHandler(this.cmdStdoutHandler.bind(this));\n        this.props.socket.registerCmdStderrHandler(this.cmdStderrHandler.bind(this));\n        this.props.socket.registerCmdExitHandler(this.cmdExitHandler.bind(this));\n\n        const activeCmdId = Math.floor(Math.random() * 0xFFFFFFE) + 1;\n\n        this.setState({\n            activeCmdId\n        });\n\n        try {\n            await this.props.socket.cmdExec(this.props.currentHost, this.props.cmd, activeCmdId);\n        } catch(error) {\n            console.log(error);\n        }\n\n\n        /*this.props.socket._socket.on('cmdStderr', (_id, text) => {\n            \n            if (this.state.activeCmdId && this.state.activeCmdId === _id) {\n                console.log('cmdStderr');\n            console.log(_id);\n            console.log(text);\n                /*if (!$dialogCommand.data('error')) {\n                    $dialogCommand.data('error', text);\n                }\n                stdout += '\\nERROR: ' + text;\n                $stdout.val(stdout);\n                $stdout.scrollTop($stdout[0].scrollHeight - $stdout.height());*\n            }\n        });\n        this.props.socket._socket.on('cmdExit', (_id, exitCode) => {\n           \n            if (this.state.activeCmdId && this.state.activeCmdId === _id) {\n                console.log('cmdExit');\n                console.log(_id);\n                console.log(exitCode);\n                /*exitCode = parseInt(exitCode, 10);\n                stdout += '\\n' + (exitCode !== 0 ? 'ERROR: ' : '') + 'process exited with code ' + exitCode;\n                $stdout.val(stdout);\n                $stdout.scrollTop($stdout[0].scrollHeight - $stdout.height());\n    \n                $dialogCommand.find('.progress-dont-close').addClass('disabled');\n                $dialogCommandProgress.removeClass('indeterminate').css({'width': '100%'});\n                $dialogCommand.find('.btn').html(_('Close'));\n                $dialogCommand.data('finished', true);\n                $dialogCommand.data('max', true);\n                const $backButton = $adminSideMain.find('.button-command');\n                $backButton.removeClass('in-progress');\n    \n                if (!exitCode) {\n                    $dialogCommand.find('.progress-text').html(_('Success!'));\n                    $backButton.hide();\n                    if ($dialogCommand.find('.progress-dont-close input').prop('checked')) {\n                        setTimeout(function () {\n                            $dialogCommand.modal('close');\n                        }, 1500);\n                    }\n                } else {\n                    let error = $dialogCommand.data('error');\n                    if (error) {\n                        const m = error.match(/error: (.*)$/);\n                        if (m) {\n                            error = m[1];\n                        }\n    \n                        $dialogCommand.find('.progress-text').html(_('Done with error: %s', _(error))).addClass('error');\n                    } else {\n                        $dialogCommand.find('.progress-text').html(_('Done with error')).addClass('error');\n                    }\n                    $backButton.addClass('error');\n                    $backButton.show();\n                }\n                if (cmdCallback) {\n                    cmdCallback(exitCode);\n                    cmdCallback = null;\n                }*\n            }\n        });*/\n    }\n\n    cmdStdoutHandler(id, text) {\n        if (this.state.activeCmdId && this.state.activeCmdId === id) {\n\n            const log = this.state.log.slice();\n            log.push(text);\n\n            const upload = text.match(/^upload \\[(\\d+)]/);\n            const gotAdmin = !upload ? text.match(/^got [-_:\\/\\\\.\\w\\d]+\\/admin$/) : null;\n            const gotWww = !gotAdmin ? text.match(/^got [-_:\\/\\\\.\\w\\d]+\\/www$/) : null;\n\n            let max = this.state.max;\n            let value = null;\n            let progressText = '';\n\n            if (upload) {\n                max = max || parseInt(upload[1], 10);\n                value = parseInt(upload[1], 10);\n            } else if (gotAdmin) {\n                // upload of admin\n                progressText = this.t('Upload admin started');\n                max = null;\n            } else if (gotWww) {\n                // upload of www\n                progressText = this.t('Upload www started');\n                max = null;\n            }\n\n            this.setState({\n                log,\n                max,\n                value,\n                progressText\n            });\n\n            console.log('cmdStdout');\n        }\n    }\n\n    cmdStderrHandler(id, text) {\n        if (this.state.activeCmdId && this.state.activeCmdId === id) {\n            const log = this.state.log.slice();\n            log.push(text);\n\n            this.setState({\n                log\n            });\n            console.log('cmdStderr');\n            console.log(id);\n            console.log(text);\n        }\n    }\n\n    cmdExitHandler(id, exitCode) {\n        if (this.state.activeCmdId && this.state.activeCmdId === id) {\n            const log = this.state.log.slice();\n            log.push(exitCode);\n\n            this.setState({\n                log\n            });\n            console.log('cmdExit');\n            console.log(id);\n            console.log(exitCode);\n        }\n    }\n\n    getLog() {\n        return this.state.log.map((value, index) => {\n            return (\n                <Typography\n                    key={ index }\n                    component=\"p\"\n                    variant=\"caption\"\n                >\n                    { value }\n                </Typography>\n            )\n        });\n    }\n\n    render() {\n\n        const { classes } = this.props;\n\n        return (\n            <Dialog onClose={ this.props.onClose } open={ this.props.open } maxWidth=\"lg\">\n                <DialogTitle>\n                    { this.state.progressText || '' }\n                    <IconButton className={ classes.closeButton } onClick={ this.props.onClose }>\n                        <CloseIcon />\n                    </IconButton>\n                </DialogTitle>\n                <DialogContent dividers>\n                    <LinearProgress\n                        variant={ this.state.max ? 'determinate' : 'indeterminate' }\n                        value={ this.state.max && this.state.value ? 100 - Math.round((this.state.value / this.state.max) * 100) : 0 }\n                    />\n                    <Paper\n                        elevation={ 0 }\n                        className={ classes.log }\n                    >\n                        { this.getLog() }\n                    </Paper>\n                </DialogContent>\n                <DialogActions>\n                    <Button autoFocus onClick={ this.props.onConfirm } color=\"primary\">\n                        { this.props.confirmText || 'OK' }\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nConfirmDialog.propTypes = {\n    confirmText: PropTypes.string,\n    header: PropTypes.string,\n    onClose: PropTypes.func.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n    open: PropTypes.bool.isRequired\n};\n\nexport default withStyles(styles)(ConfirmDialog);","import React from 'react';\n\nimport withWidth from '@material-ui/core/withWidth';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport clsx from 'clsx';\n\nimport Connection from './components/Connection';\nimport { PROGRESS } from './components/Connection';\nimport Loader from '@iobroker/adapter-react/Components/Loader';\nimport I18n from '@iobroker/adapter-react/i18n';\nimport Router from '@iobroker/adapter-react/Components/Router';\n\n// @material-ui/core\nimport AppBar from '@material-ui/core/AppBar';\nimport Avatar from '@material-ui/core/Avatar';\n\n// import Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\n// @material-ui/icons\nimport MenuIcon from '@material-ui/icons/Menu';\nimport BuildIcon from '@material-ui/icons/Build';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport ExpertIcon from './components/ExperIcon';\n\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\nimport Brightness5Icon from '@material-ui/icons/Brightness5';\nimport Brightness6Icon from '@material-ui/icons/Brightness6';\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\n\n// @material-ui/lab\nimport Alert from '@material-ui/lab/Alert';\n\nimport ConfirmDialog from './components/ConfirmDialog';\nimport Drawer from './components/Drawer';\nimport { STATES as DrawerStates } from './components/Drawer';\nimport { DRAWER_FULL_WIDTH, DRAWER_COMPACT_WIDTH } from './components/Drawer';\nimport Connecting from './components/Connecting';\n\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './Theme';\nimport LogsWorker from './components/LogsWorker';\nimport InstancesWorker from './components/InstancesWorker';\nimport HostsWorker from './components/HostsWorker';\n\nimport Login from './login/Login';\n\n// Tabs\nimport Adapters from './tabs/Adapters';\nimport Instances from './tabs/Instances';\nimport Intro from './tabs/Intro';\nimport Logs from './tabs/Logs';\nimport Files from './tabs/Files';\nimport Objects from './tabs/Objects';\nimport BaseSettings from './tabs/BaseSettings';\nimport CustomTab from './tabs/CustomTab';\n\nimport i18n from '@iobroker/adapter-react/i18n';\nimport CommandDialog from './components/CommandDialog';\n\nconst query = {};\n(window.location.search || '').replace(/^\\?/, '').split('&').forEach(attr => {\n    const parts = attr.split('=');\n    if (!parts[0]) {\n        return;\n    }\n    query[parts[0]] = parts[1] === undefined ? true : decodeURIComponent(parts[1]);\n});\n\nconst styles = theme => ({\n    root: {\n        display:    'flex',\n        height:     '100%',\n    },\n    appBar: {\n        /*backgroundColor: blue[300],*/\n        transition: theme.transitions.create(['margin', 'width'], {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n    },\n    logoWhite: {\n        background: '#FFFFFF'\n    },\n    appBarShift: {\n      width: `calc(100% - ${DRAWER_FULL_WIDTH}px)`,\n      marginLeft: DRAWER_FULL_WIDTH,\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    appBarShiftCompact: {\n      width: `calc(100% - ${DRAWER_COMPACT_WIDTH}px)`,\n      marginLeft: DRAWER_COMPACT_WIDTH,\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    hide: {\n        display: 'none'\n    },\n    content: {\n        flexGrow: 1,\n        padding: theme.spacing(1),\n        transition: theme.transitions.create('margin', {\n            easing: theme.transitions.easing.sharp,\n            duration: theme.transitions.duration.leavingScreen,\n        }),\n        marginTop: theme.mixins.toolbar.minHeight,\n        overflowY: 'auto',\n        /*backgroundColor: grey[200]*/\n    },\n    contentMargin: {\n        marginLeft: -DRAWER_FULL_WIDTH,\n    },\n    contentMarginCompact: {\n        marginLeft: -DRAWER_COMPACT_WIDTH,\n    },\n    contentShift: {\n      transition: theme.transitions.create('margin', {\n        easing: theme.transitions.easing.easeOut,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n      marginLeft: 0\n    },\n    expertIcon: {\n        width: 22,\n        height: 22,\n        //color: theme.palette.text ? theme.palette.text.disabled : 'grey'\n    },\n    expertIconActive: {\n        //color: theme.palette.action.active\n    },\n    baseSettingsButton: {\n        color: 'red',\n    }\n});\n\nclass App extends Router {\n\n    constructor(props) {\n\n        super(props);\n\n        String.prototype.ucFirst = function() {\n            return this.substring(0, 1).toUpperCase() + this.substring(1).toLowerCase();\n        };\n\n        window.alert = message => {\n            if (message.toLowerCase().includes('error')) {\n                console.error(message);\n                this.showAlert(message, 'error');\n            } else {\n                console.log(message);\n                this.showAlert(message, 'info');\n            }\n        };\n\n        this.translations = {\n            'en': require('./i18n/en'),\n            'de': require('./i18n/de'),\n            'ru': require('./i18n/ru'),\n            'pt': require('./i18n/pt'),\n            'nl': require('./i18n/nl'),\n            'fr': require('./i18n/fr'),\n            'it': require('./i18n/it'),\n            'es': require('./i18n/es'),\n            'pl': require('./i18n/pl'),\n            'zh-cn': require('./i18n/zh-cn'),\n        };\n        \n        // init translations\n        I18n.setTranslations(this.translations);\n        I18n.setLanguage((navigator.language || navigator.userLanguage || 'en').substring(0, 2).toLowerCase());\n\n        if (!query.login) {\n            let drawerState = window.localStorage.getItem('App.drawerState');\n            if (drawerState) {\n                drawerState = parseInt(drawerState, 10);\n            } else {\n                drawerState = this.props.width === 'xs' ? DrawerStates.closed : DrawerStates.opened;\n            }\n\n            this.state = {\n                connected:      false,\n                progress:       0,\n                ready:          false,\n                lang:           'en',\n\n                //Finished\n                protocol:       this.getProtocol(),\n                hostname:       window.location.hostname,\n                port:           this.getPort(),\n                //---------\n\n                allTabs:        null,\n\n                expertMode:     window.localStorage.getItem('App.expertMode') === 'true',\n                \n                states:         {},\n                hosts:          [],\n                currentHost:    '',\n                currentHostName: '',\n                currentTab:     Router.getLocation(),\n                currentDialog:  null,\n                currentUser:    '',\n                subscribesStates: {},\n                subscribesObjects: {},\n                subscribesLogs: 0,\n                systemConfig:   null,\n\n                objects:        {},\n\n                waitForRestart: false,\n                tabs:           null,\n                config:         {},\n\n                stateChanged: false,\n\n                theme:          this.getTheme(),\n                themeName:      this.getThemeName(this.getTheme()),\n                themeType:      this.getThemeType(this.getTheme()),\n\n                alert: false,\n                alertType: 'info',\n                alertMessage: '',\n                drawerState,\n\n                tab: null,\n                allStored: true,\n                dataNotStoredDialog: false,\n                dataNotStoredTab: '',\n\n                baseSettingsOpened: null,\n                unsavedDataInDialog: false,\n\n                cmd: null,\n                cmdDialog: false\n            };\n            this.logsWorker = null;\n            this.instancesWorker = null;\n            this.hostsWorker = null;\n        } else {\n            this.state = {\n                login: true,\n                theme:          this.getTheme(),\n                themeName:      this.getThemeName(this.getTheme()),\n                themeType:      this.getThemeType(this.getTheme())\n            }\n        }\n    }\n\n    setUnsavedData(hasUnsavedData) {\n        if (hasUnsavedData !== this.state.unsavedDataInDialog) {\n            this.setState({unsavedDataInDialog: hasUnsavedData});\n        }\n    }\n\n    componentDidMount() {\n        if (!this.state.login) {\n            this.socket = new Connection({\n                name: 'admin',\n                port: this.getPort(),\n                autoSubscribes: ['*', 'system.adapter.*'],\n                autoSubscribeLog: true,\n                onProgress: progress => {\n                    if (progress === PROGRESS.CONNECTING) {\n                        this.setState({\n                            connected: false\n                        });\n                    } else if (progress === PROGRESS.READY) {\n                        this.setState({\n                            connected: true,\n                            progress: 100\n                        });\n                    } else {\n                        this.setState({\n                            connected: true,\n                            progress: Math.round(PROGRESS.READY / progress * 100)\n                        });\n                    }\n                },\n                onReady: async (objects, scripts) => {\n                    I18n.setLanguage(this.socket.systemLang);\n\n                    // create Workers\n                    this.logsWorker      = this.logsWorker      || new LogsWorker(this.socket, 1000);\n                    this.instancesWorker = this.instancesWorker || new InstancesWorker(this.socket);\n                    this.hostsWorker     = this.hostsWorker     || new HostsWorker(this.socket);\n\n                    const newState = {\n                        lang: this.socket.systemLang,\n                        ready: true,\n                        objects,\n                    };\n\n                    try {\n                        newState.systemConfig = await this.socket.getSystemConfig();\n                    } catch (error) {\n                        console.log(error);\n                    }\n\n                    newState.hosts = await this.socket.getHosts();\n\n                    if (!this.state.currentHost) {\n                        newState.currentHost = newState.hosts[0]._id;\n                        newState.currentHostName = newState.hosts[0].common.name;\n                    }\n\n                    this.setState(newState);\n\n                    this.logsWorker && this.logsWorker.setCurrentHost(this.state.currentHost);\n                },\n                //onObjectChange: (objects, scripts) => this.onObjectChange(objects, scripts),\n                onError: error => {\n                    console.error(error);\n                    this.showAlert(error, 'error');\n                }\n            });\n        }\n    }\n\n    /**\n     * Updates the current currentTab in the states\n     */\n    onHashChanged() {\n        this.setState({\n            currentTab: Router.getLocation()\n        });\n    }\n\n    /**\n     * Get the used port\n     */\n    getPort() {\n        let port = parseInt(window.location.port, 10);\n\n        if (isNaN(port)) {\n            switch(this.getProtocol()) {\n                case 'https:':\n                    port = 443;\n                    break;\n                case 'http:':\n                    port = 80;\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        if (!port || port === 3000) {\n            port = 8081;\n        }\n\n        return port;\n    }\n\n    /**\n     * Get the used protocol\n     */\n    getProtocol() {\n        return window.location.protocol;\n    }\n\n    /**\n     * Get a theme\n     * @param {string} name Theme name\n     * @returns {Theme}\n     */\n    getTheme(name) {\n        return theme(name ? name : window.localStorage && window.localStorage.getItem('App.themeName') ?\n            window.localStorage.getItem('App.themeName') : window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'colored');\n    }\n\n    /**\n     * Get the theme name\n     * @param {Theme} theme Theme\n     * @returns {string} Theme name\n     */\n    getThemeName(theme) {\n        return theme.name;\n    }\n\n    /**\n     * Get the theme type\n     * @param {Theme} theme Theme\n     * @returns {string} Theme type\n     */\n    getThemeType(theme) {\n        return theme.palette.type;\n    }\n\n    /**\n     * Changes the current theme\n     */\n    toggleTheme() {\n\n        const themeName = this.state.themeName;\n\n        const newThemeName = themeName === 'dark' ? 'blue' :\n            themeName === 'blue' ? 'colored' : themeName === 'colored' ? 'light' :\n            themeName === 'light' ? 'dark' : 'colored';\n\n        window.localStorage.setItem('App.themeName', newThemeName);\n        window.localStorage.setItem('App.theme', newThemeName === 'dark' || newThemeName === 'blue' ?\n            'dark' : 'light');\n\n        const theme = this.getTheme(newThemeName);\n\n        this.setState({\n            theme: theme,\n            themeName: this.getThemeName(theme),\n            themeType: this.getThemeType(theme)\n        });\n    }\n\n    async onObjectChange(id, obj) {\n        console.log('OBJECT: ' + id);\n        if (obj) {\n            this.setState(prevState => {\n                \n                const objects = prevState.objects;\n                objects[id] = obj;\n\n                return {\n                    objects: objects\n                };\n            });\n        } else {\n            this.setState(prevState => {\n                \n                const objects = prevState.objects;\n                delete objects[id];\n\n                return {\n                    objects: objects\n                };\n            });\n        }\n    }\n\n    async setTitle(title) {\n        document.title = title + ' - ' + (this.state.currentHostName || 'ioBroker');\n    }\n\n    /*addEventMessage(id, stateOrObj, isMessage, isState) {\n        /* // cannot directly use tabs.events.add, because to init time not available.\n        tabs.events.add(id, stateOrObj, isMessage, isState));\n    }\n\n    saveConfig(attr, value) {\n        if (attr) {\n            const config = this.state.config.slice();\n            config[attr] = value;\n            this.setState({\n            config: config\n            })\n        }\n\n        if (typeof Storage !== 'undefined') {\n            Storage.setItem('adminConfig', JSON.stringify(this.state.config));\n        }\n    }\n\n    saveTabs() {\n        try {  \n            this.socket.setObject('system.config', this.state.systemConfig);\n        } catch(error) {\n            this.showError(error);\n        }\n    }*/\n\n    /*getUser() {\n        if (!this.state.currentUser) {\n            this.socket.socket.emit('authEnabled', (auth, user) => {\n                const currentUser = 'system.user.' + user;\n                this.setState({\n                    currentUser: currentUser,\n                    authenticated: auth\n                });\n            });\n        } else if (this.state.objects[this.state.currentUser]) {\n            const obj = this.state.objects[this.state.currentUser];\n            let name = '';\n\n            if (!obj || !obj.common || !obj.common.name) {\n                name = this.state.currentUser.replace(/^system\\.user\\./);\n                name = name[0].toUpperCase() + name.substring(1).toLowerCase();\n            } else {\n                //name = translateName(obj.common.name);\n            }\n\n            if (obj && obj.common && obj.common.icon) {\n                const objs = {};\n                objs[this.state.currentUser] = obj;\n                //$('#current-user-icon').html(main.getIcon(main.currentUser, null, objs));\n            } else {\n                //$('#current-user-icon').html('<i className=\"large material-icons\">account_circle</i>');\n            }\n            //$('#current-user').html(name);\n            const groups = [];\n            for (let i = 0; i < this.state.tabs.users.groups.length; i++) {\n                const group = this.state.objects[this.state.tabs.users.groups[i]];\n                if (group && group.common && group.common.members && group.common.members.indexOf(this.state.currentUser) !== -1) {\n                    //groups.push(_(translateName(group.common.name)));\n                }\n            }\n            //$('#current-group').html(groups.join(', '));\n        }\n    }*/\n\n    getCurrentTab() {\n\n        if (this.state.baseSettingsOpened) {\n            return (<BaseSettings\n                key=\"intro\"\n                onUnsaveChanged={ hasUnsavedData => this.setUnsavedData(hasUnsavedData) }\n                lang={ this.state.lang }\n                showAlert={ (message, type) => this.showAlert(message, type) }\n                socket={ this.socket }\n                t={ I18n.t }\n            />);\n        }\n\n        if (this.state && this.state.currentTab && this.state.currentTab.tab) {\n            if (this.state.currentTab.tab === 'tab-adapters') {\n                return (\n                    <Adapters\n                        key=\"adapters\"\n                        systemConfig={ this.state.systemConfig }\n                        socket={ this.socket }\n                        hosts={ this.state.hosts }\n                        currentHost={ this.state.currentHost }\n                        currentHostName={ this.state.currentHostName }\n                        ready={ this.state.ready }\n                        t={ I18n.t }\n                        lang={ I18n.getLanguage() }\n                        expertMode={ this.state.expertMode }\n                        executeCommand={ cmd => this.executeCommand(cmd) }\n                    />\n                );\n            } else\n            if (this.state.currentTab.tab === 'tab-instances') {\n                return (\n                    <Instances\n                        key=\"instances\"\n                        socket={ this.socket }\n                        lang={ I18n.getLanguage() }\n                        protocol={ this.state.protocol }\n                        hostname={ this.state.hostname }\n                        expertMode={ this.state.expertMode }\n                        t={ I18n.t }\n                        configStored={ value => this.allStored(value) }\n                    />\n                );\n            } else\n            if (this.state.currentTab.tab === 'tab-intro') {\n                return (\n                    <Intro\n                        key=\"intro\"\n                        protocol={ this.state.protocol }\n                        hostname={ this.state.hostname }\n                        showAlert={ (message, type) => this.showAlert(message, type) }\n                        socket={ this.socket }\n                        systemConfig={ this.state.systemConfig }\n                        t={ I18n.t }\n                        lang={ I18n.getLanguage() }\n                    />\n                );\n            } else\n            if (this.state.currentTab.tab === 'tab-logs') {\n                return (\n                    <Logs\n                        key=\"logs\"\n                        t={ I18n.t }\n                        lang={ this.state.lang }\n                        socket={ this.socket }\n                        ready={ this.state.ready }\n                        logsWorker={ this.logsWorker }\n                        expertMode={ this.state.expertMode }\n                        currentHost={ this.state.currentHost }\n                        clearErrors={ cb => this.clearLogErrors(cb) }\n                    />\n                );\n            } else\n            if (this.state.currentTab.tab === 'tab-files') {\n                return (\n                    <Files\n                        key=\"files\"\n                        ready={ this.state.ready }\n                        t={ I18n.t }\n                        expertMode={ this.state.expertMode }\n                        lang={ I18n.getLanguage() }\n                        socket={ this.socket }\n                    />\n                );\n            } else\n            if (this.state.currentTab.tab === 'tab-objects') {\n                return (\n                    <Objects\n                        key=\"objects\"\n                        t={ I18n.t }\n                        themeName={ this.state.themeName }\n                        expertMode={ this.state.expertMode }\n                        lang={ I18n.getLanguage() }\n                        socket={ this.socket }\n                    />\n                );\n            } else {\n                const m = this.state.currentTab.tab.match(/^tab-([-\\w\\d]+)(-\\d+)?$/);\n                if (m) {\n                    const adapter  = m[1];\n                    const instance = m[2] ? parseInt(m[2], 10) : null;\n\n                    /*let link  = tab.common.adminTab.link || '/adapter/' + tab.common.name + '/tab.html';\n                    if (tab.common.materializeTab) {\n                        link  = tab.common.adminTab.link || '/adapter/' + tab.common.name + '/tab_m.html';\n                    }*/\n\n                    // /adapter/javascript/tab.html\n                    return (\n                        <CustomTab\n                            key={ this.state.currentTab.tab }\n                            t={ I18n.t }\n                            protocol={ this.state.protocol }\n                            hostname={ this.state.hostname }\n                            instancesWorker={ this.instancesWorker }\n                            tab={ this.state.currentTab.tab }\n                            themeName={ this.state.themeName }\n                            expertMode={ this.state.expertMode }\n                            lang={ I18n.getLanguage() }\n                        />\n                    );\n                }\n            }\n        } else {\n            this.handleNavigation('tab-intro');\n            return null;\n        }\n    }\n\n    handleAlertClose(event, reason) {\n        if (reason === 'clickaway') {\n          return;\n        }\n\n        this.setState({\n            alert: false\n        });\n    }\n\n    showAlert(message, type) {\n        \n        if (type !== 'error' && type !== 'warning' && type !== 'info' && type !== 'success') {\n            type = 'info';\n        }\n\n        this.setState({\n            alert: true,\n            alertType: type,\n            alertMessage: message\n        });\n    }\n\n    handleDrawerState(state) {\n        window.localStorage.setItem('App.drawerState', state);\n        this.setState({\n            drawerState: state\n        });\n    }\n\n    logout() {\n        if (window.location.port === '3000') {\n            window.location = window.location.protocol + '//' + window.location.hostname + ':8081/logout?dev';\n        } else {\n            window.location = '/logout';\n        }\n    }\n\n    handleNavigation(tab) {\n        if (tab) {\n            if (this.state.allStored) {\n\n                Router.doNavigate(tab);\n\n                this.setState({\n                    currentTab: Router.getLocation()\n                });\n            } else {\n                this.setState({\n                    dataNotStoredDialog: true,\n                    dataNotStoredTab: tab\n                });\n            }\n        }\n\n        if (this.props.width === 'xs' || this.props.width === 'sm') {\n            this.handleDrawerState(DrawerStates.closed);\n        }\n\n        tab = tab || (this.state.currentTab && this.state.currentTab.tab) || '';\n\n        this.setTitle(tab.replace('tab-', ''));\n    }\n\n    allStored(value) {\n        this.setState({\n            allStored: value\n        });\n    };\n\n    closeDataNotStoredDialog() {\n        this.setState({\n            dataNotStoredDialog: false\n        });\n    }\n\n    confirmDataNotStored() {\n        this.setState({\n            dataNotStoredDialog: false,\n            allStored: true\n        }, () => {\n            this.handleNavigation(this.state.dataNotStoredTab);\n        });\n    }\n\n    executeCommand(cmd) {\n        this.setState({\n            cmd,\n            cmdDialog: true\n        });\n    }\n\n    closeCmdDialog() {\n        this.setState({\n            cmd: null,\n            cmdDialog: false\n        });\n    }\n\n    render() {\n        if (this.state.login) {\n            return (\n                <ThemeProvider theme={ this.state.theme }>\n                    <Login t={ I18n.t } />\n                </ThemeProvider>\n            );\n        }\n        \n        if (!this.state.ready) {\n            return (\n                <ThemeProvider theme={ this.state.theme }>\n                    <Loader theme={ this.state.themeType } />\n                </ThemeProvider>\n            );\n        }\n\n        const { classes } = this.props;\n        const small = this.props.width === 'xs' || this.props.width === 'sm';\n\n        return (\n            <ThemeProvider theme={ this.state.theme }>\n                <Paper elevation={ 0 } className={ classes.root }>\n                    <AppBar\n                        color=\"default\"\n                        position=\"fixed\"\n                        className={ clsx(\n                            classes.appBar,\n                            {[classes.appBarShift]:        !small && this.state.drawerState === DrawerStates.opened},\n                            {[classes.appBarShiftCompact]: !small && this.state.drawerState === DrawerStates.compact}\n                        ) }\n                    >\n                        <Toolbar>\n                            <IconButton\n                                edge=\"start\"\n                                className={ clsx(classes.menuButton, !small && this.state.drawerState !== DrawerStates.closed && classes.hide) }\n                                onClick={ () => this.handleDrawerState(DrawerStates.opened) }\n                            >\n                                <MenuIcon />\n                            </IconButton>\n                            <IconButton>\n                                <VisibilityIcon />\n                            </IconButton>\n                            <IconButton>\n                                <BuildIcon />\n                            </IconButton>\n                            <IconButton onClick={ () => this.toggleTheme() }>\n                                { this.state.themeName === 'dark' &&\n                                    <Brightness4Icon />\n                                }\n                                { this.state.themeName === 'blue' &&\n                                    <Brightness5Icon />\n                                }\n                                { this.state.themeName === 'colored' &&\n                                    <Brightness6Icon />\n                                }\n                                { this.state.themeName === 'light' &&\n                                    <Brightness7Icon />\n                                }\n                            </IconButton>\n                            {/*This will be removed later to settings, to not allow so easy to enable it*/}\n                            <IconButton\n                                onClick={ () => {\n                                    window.localStorage.setItem('App.expertMode', !this.state.expertMode);\n                                    this.setState({expertMode: !this.state.expertMode});\n                                }}\n                                color={ this.state.expertMode ? 'secondary' : 'default' }\n                            >\n                                <ExpertIcon\n                                    title={ I18n.t('Toggle expert mode')}\n                                    glowColor={ this.getTheme().palette.secondary.main }\n                                    active={ this.state.expertMode }\n                                    className={ clsx(classes.expertIcon, this.state.expertMode && classes.expertIconActive)}\n                                />\n                            </IconButton>\n                            {/*This will be removed later to settings, to not allow so easy to edit it*/}\n                            {   this.state.expertMode && \n                                <IconButton>\n                                    <BuildIcon className={ classes.baseSettingsButton }/>\n                                </IconButton>\n                            }\n                            <Typography variant=\"h6\" className={classes.title} style={{flexGrow: 1}}>\n                            </Typography>\n                            <Grid container spacing={ 1 } alignItems=\"center\" style={{width: 'initial'}}>\n                                <Grid item>\n                                    <Typography>admin</Typography>\n                                </Grid>\n                                <Grid item>\n                                    <Avatar className={ clsx((this.state.themeName === 'colored' || this.state.themeName === 'blue') && classes.logoWhite) } alt=\"ioBroker\" src=\"img/no-image.png\" />\n                                </Grid>\n                            </Grid>\n                        </Toolbar>\n                    </AppBar>\n                    <Drawer\n                        state={ this.state.drawerState }\n                        handleNavigation={ name => this.handleNavigation(name) }\n                        onStateChange={ state => this.handleDrawerState(state) }\n                        onLogout={ () => this.logout() }\n                        currentTab={ this.state.currentTab && this.state.currentTab.tab }\n                        logsWorker={ this.logsWorker }\n                        instancesWorker={ this.instancesWorker }\n                        logoutTitle={ I18n.t('Logout') }\n                        isSecure={ this.socket.isSecure }\n                        t={ I18n.t }\n                        lang={ I18n.getLanguage() }\n                        socket={ this.socket }\n                        currentHost={ this.state.currentHost }\n                        expertMode={ this.state.expertMode }\n                        ready={ this.state.ready }\n                    />\n                    <Paper\n                        elevation={ 0 }\n                        square\n                        className={\n                            clsx(classes.content, {\n                                [classes.contentMargin]: !small && this.state.drawerState !== DrawerStates.compact,\n                                [classes.contentMarginCompact]: !small && this.state.drawerState !== DrawerStates.opened,\n                                [classes.contentShift]: !small && this.state.drawerState !== DrawerStates.closed\n                            })\n                        }\n                    >\n                        { this.getCurrentTab() }\n                    </Paper>\n                    <Snackbar open={ this.state.alert } autoHideDuration={ 6000 } onClose={ () => this.handleAlertClose() }>\n                        <Alert onClose={ () => this.handleAlertClose() } variant=\"filled\" severity={ this.state.alertType }>\n                            { this.state.alertMessage }\n                        </Alert>\n                    </Snackbar>\n                </Paper>\n                <ConfirmDialog\n                    onClose={ () => this.closeDataNotStoredDialog() }\n                    open={ this.state.dataNotStoredDialog }\n                    header={ i18n.t('Please confirm') }\n                    onConfirm={ () => this.confirmDataNotStored() }\n                    confirmText={ i18n.t('Ok') }\n                >\n                        { i18n.t('Some data are not stored. Discard?') }\n                </ConfirmDialog>\n                { this.state.cmd &&\n                    <CommandDialog\n                        onClose={ () => this.closeCmdDialog() }\n                        open={ this.state.cmdDialog }\n                        header={ i18n.t('Command') /* Placeholder */}\n                        onConfirm={ () => {} /* Test command */}\n                        cmd={ this.state.cmd }\n                        confirmText={ i18n.t('Ok') /* Test command */}\n                        socket={ this.socket }\n                        currentHost={ this.state.currentHost }\n                        ready={ this.state.ready }\n                        t={ I18n.t }\n                    />\n                }\n                { !this.state.connected && <Connecting /> }\n            </ThemeProvider>\n        );\n    }\n}\n\nexport default withWidth()(withStyles(styles)(App));","import { createMuiTheme } from '@material-ui/core/styles';\n\nimport orange from '@material-ui/core/colors/orange';\n\nexport default type => {\n    if (type === 'dark') {\n        return createMuiTheme({\n            name: type,\n            palette: {\n                type: 'dark',\n                background: {\n                    paper: '#121212',\n                    default: '#121212'\n                },\n                primary: {\n                    main: '#4dabf5'\n                },\n                secondary: {\n                    main: '#436a93'\n                },\n                text: {\n                    primary: '#ffffff',\n                    secondary: '#ffffff'\n                }\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#272727'\n                    }\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: orange[200],\n                        '&:hover': {\n                            color: orange[100]\n                        }\n                    }\n                },\n                MuiPaper: {\n                    elevation1: {\n                        backgroundColor: '#1d1d1d'\n                    },\n                    elevation2: {\n                        backgroundColor: '#212121'\n                    },\n                    elevation3: {\n                        backgroundColor: '#242424'\n                    },\n                    elevation4: {\n                        backgroundColor: '#272727'\n                    }\n                }\n            }\n        });\n    } else if (type === 'blue') {\n        return createMuiTheme({\n            name: type,\n            palette: {\n                type: 'dark',\n                background: {\n                    paper: '#151d21',\n                    default: '#151d21'\n                },\n                primary: {\n                    main: '#4dabf5'\n                },\n                secondary: {\n                    main: '#436a93'\n                },\n                text: {\n                    primary: '#ffffff',\n                    secondary: '#ffffff'\n                }\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#2a3135'\n                    }\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: orange[200],\n                        '&:hover': {\n                            color: orange[100]\n                        }\n                    }\n                },\n                MuiPaper: {\n                    elevation1: {\n                        backgroundColor: '#21282c'\n                    },\n                    elevation2: {\n                        backgroundColor: '#252d31'\n                    },\n                    elevation3: {\n                        backgroundColor: '#272f32'\n                    },\n                    elevation4: {\n                        backgroundColor: '#2a3135'\n                    }\n                }\n            }\n        });\n    } else if (type === 'colored') {\n        return createMuiTheme({\n            name: type,\n            palette: {\n                type: 'light',\n                primary: {\n                    main: '#3499CC'\n                },\n                secondary: {\n                    main: '#144578'\n                }\n            },\n            overrides: {\n                MuiAppBar: {\n                    colorDefault: {\n                        backgroundColor: '#3499CC'\n                    }\n                },\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: orange[400],\n                        '&:hover': {\n                            color: orange[300]\n                        }\n                    }\n                }\n            }\n        });\n    } else {\n        return createMuiTheme({\n            name: type,\n            palette: {\n                type: 'light',\n                primary: {\n                    main: '#3499CC'\n                },\n                secondary: {\n                    main: '#144578'\n                }\n            },\n            overrides: {\n                MuiLink: {\n                    root: {\n                        textTransform: 'uppercase',\n                        transition: 'color .3s ease',\n                        color: orange[400],\n                        '&:hover': {\n                            color: orange[300]\n                        }\n                    }\n                }\n            }\n        });\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {version} from '../package.json';\nimport { MuiThemeProvider} from '@material-ui/core/styles';\nimport * as Sentry from '@sentry/browser';\nimport * as SentryIntegrations from '@sentry/integrations';\nimport createTheme from '@iobroker/adapter-react/createTheme';\nimport App from './App';\n\nimport './index.css';\n\nconsole.log('iobroker.admin@' + version);\nlet theme = window.localStorage ? window.localStorage.getItem('App.theme') || 'light' : 'light';\n\nfunction build() {\n    return ReactDOM.render(<MuiThemeProvider theme={createTheme(theme)}>\n        <App onThemeChange={_theme => {\n            theme = _theme;\n            build();\n        }}/>\n    </MuiThemeProvider>, document.getElementById('root'));\n}\n\nSentry.init({\n    dsn: \"https://43643152dab3481db69950ba866ee9d6@sentry.iobroker.net/58\",\n    release: 'iobroker.admin@' + version,\n    integrations: [\n        new SentryIntegrations.Dedupe()\n    ]\n});\n\n\nbuild();"],"sourceRoot":""}